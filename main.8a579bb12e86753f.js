"use strict";(self.webpackChunktodoapp=self.webpackChunktodoapp||[]).push([[179],{2011:(rt,Ce,k)=>{k.d(Ce,{Dh:()=>de,GT:()=>pe,cc:()=>Te,hO:()=>Ge,on:()=>B,pX:()=>J,xv:()=>ue});var g=k(5e3),Z=k(127),O=k(5813);rt=k.hmd(rt);const oe=["ngOnDestroy"],J=(Ee,Je,ze,De={})=>new Proxy(Ee,{get:(ye,ve)=>ze.runOutsideAngular(()=>{var $e;if(Ee[ve])return(null===($e=null==De?void 0:De.spy)||void 0===$e?void 0:$e.get)&&De.spy.get(ve,Ee[ve]),Ee[ve];if(oe.indexOf(ve)>-1)return()=>{};const je=Je.toPromise().then(ee=>{const q=ee&&ee[ve];return"function"==typeof q?q.bind(ee):q&&q.then?q.then(te=>ze.run(()=>te)):ze.run(()=>q)});return new Proxy(()=>{},{get:(ee,q)=>je[q],apply:(ee,q,te)=>je.then(ge=>{var ne;const Me=ge&&ge(...te);return(null===(ne=null==De?void 0:De.spy)||void 0===ne?void 0:ne.apply)&&De.spy.apply(ve,te,Me),Me})})})}),pe=(Ee,Je)=>{Je.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(De=>{Object.defineProperty(Ee.prototype,De,Object.getOwnPropertyDescriptor(ze.prototype||ze,De))})})};class ie{constructor(Je){return Je}}const de=new g.OlP("angularfire2.app.options"),ue=new g.OlP("angularfire2.app.name");function B(Ee,Je,ze){const ye="object"==typeof ze&&ze||{};ye.name=ye.name||"string"==typeof ze&&ze||"[DEFAULT]";const $e=Z.Z.apps.filter(je=>je&&je.name===ye.name)[0]||Je.runOutsideAngular(()=>Z.Z.initializeApp(Ee,ye));try{JSON.stringify(Ee)!==JSON.stringify($e.options)&&j("error",`${$e.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new ie($e)}const j=(Ee,...Je)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Je)},Y={provide:ie,useFactory:B,deps:[de,g.R0b,[new g.FiY,ue]]};let Ge=(()=>{class Ee{constructor(ze){Z.Z.registerVersion("angularfire",O.q4.full,"core"),Z.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Z.Z.registerVersion("angular",g.q4F.full,ze.toString())}static initializeApp(ze,De){return{ngModule:Ee,providers:[{provide:de,useValue:ze},{provide:ue,useValue:De}]}}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(g.LFG(g.Lbi))},Ee.\u0275mod=g.oAB({type:Ee}),Ee.\u0275inj=g.cJS({providers:[Y]}),Ee})();function Te(Ee,Je,ze,De,ye){const[,ve,$e]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Ee)||[];if(ve)return function Oe(Ee,Je){try{return Ee.toString()===Je.toString()}catch(ze){return Ee===Je}}(ye,$e)||(he("error",`${Je} was already initialized on the ${ze} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ye,was:$e})),ve;{const je=De();return globalThis.\u0275AngularfireInstanceCache.push([Ee,je,ye]),je}}const Pe=!!rt.hot,he=(Ee,...Je)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(rt,Ce,k)=>{k.d(Ce,{q4:()=>wl,iC:()=>Tl,HU:()=>au,vb:()=>Wc,JM:()=>Us});var g=k(5e3),Z=k(5867),O=k(5861),oe=k(9681),J=k(2090),pe=k(4859),ie=k(1877);const de="@firebase/installations",j="w:0.5.8",Y="FIS_v2",Ee=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(D){return D instanceof J.ZR&&D.code.includes("request-failed")}function ze({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:te(D.expiresIn),creationTime:Date.now()}}function ye(D,b){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ee.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function je(D,{refreshToken:b}){const x=$e(D);return x.append("Authorization",function ge(D){return`${Y} ${D}`}(b)),x}function ee(D){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function te(D){return Number(D.replace("s","000"))}function ne(D,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=ze(D),z=$e(D),X=b.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&z.append("x-firebase-client",yt)}const Se={method:"POST",headers:z,body:JSON.stringify({fid:x,authVersion:Y,appId:D.appId,sdkVersion:j})},Ke=yield ee(()=>fetch(F,Se));if(Ke.ok){const yt=yield Ke.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:De(yt.authToken)}}throw yield ye("Create Installation",Ke)})).apply(this,arguments)}function se(D){return new Promise(b=>{setTimeout(b,D)})}const Zt=/^[cdef][\w-]{21}$/;function it(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function ct(D){return function vt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Zt.test(x)?x:""}catch(D){return""}}function nn(D){return`${D.appName}!${D.appId}`}const rn=new Map;function pi(D,b){const x=nn(D);Kt(x,b),function Lt(D,b){const x=function Kr(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=D=>{Kt(D.data.key,D.data.fid)}),Qn}();x&&x.postMessage({key:D,fid:b}),function ys(){0===rn.size&&Qn&&(Qn.close(),Qn=null)}()}(x,b)}function Kt(D,b){const x=rn.get(D);if(x)for(const F of x)F(b)}let Qn=null;const br="firebase-installations-store";let zi=null;function Wi(){return zi||(zi=(0,J.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(br)})),zi}function st(D,b){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*(D,b){const x=nn(D),z=(yield Wi()).transaction(br,"readwrite"),X=z.objectStore(br),Ae=yield X.get(x);return yield X.put(b,x),yield z.complete,(!Ae||Ae.fid!==b.fid)&&pi(D,b.fid),b})).apply(this,arguments)}function qn(D){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(D){const b=nn(D),F=(yield Wi()).transaction(br,"readwrite");yield F.objectStore(br).delete(b),yield F.complete})).apply(this,arguments)}function Yr(D,b){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(D,b){const x=nn(D),z=(yield Wi()).transaction(br,"readwrite"),X=z.objectStore(br),Ae=yield X.get(x),Se=b(Ae);return void 0===Se?yield X.delete(x):yield X.put(Se,x),yield z.complete,Se&&(!Ae||Ae.fid!==Se.fid)&&pi(D,Se.fid),Se})).apply(this,arguments)}function hn(D){return zn.apply(this,arguments)}function zn(){return(zn=(0,O.Z)(function*(D){let b;const x=yield Yr(D.appConfig,F=>{const z=_s(F),X=ia(D,z);return b=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function _s(D){return Pt(D||{fid:it(),registrationStatus:0})}function ia(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ee.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Vt(D,b){return et.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:gt(D)}:{installationEntry:b}}function et(){return(et=(0,O.Z)(function*(D,b){try{const x=yield ne(D,b);return st(D.appConfig,x)}catch(x){throw Je(x)&&409===x.customData.serverCode?yield qn(D.appConfig):yield st(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function gt(D){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(D){let b=yield Mi(D.appConfig);for(;1===b.registrationStatus;)yield se(100),b=yield Mi(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield hn(D);return F||x}return b})).apply(this,arguments)}function Mi(D){return Yr(D,b=>{if(!b)throw Ee.create("installation-not-found");return Pt(b)})}function Pt(D){return function Qs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ur(D,b){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=at(D,x),z=je(D,x),X=b.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&z.append("x-firebase-client",yt)}const Se={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:j,appId:D.appId}})},Ke=yield ee(()=>fetch(F,Se));if(Ke.ok)return De(yield Ke.json());throw yield ye("Generate Auth Token",Ke)})).apply(this,arguments)}function at(D,{fid:b}){return`${ze(D)}/${b}/authTokens:generate`}function lr(D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,O.Z)(function*(D,b=!1){let x;const F=yield Yr(D.appConfig,X=>{if(!xt(X))throw Ee.create("not-registered");const Ae=X.authToken;if(!b&&U(Ae))return X;if(1===Ae.requestStatus)return x=We(D,b),X;{if(!navigator.onLine)throw Ee.create("app-offline");const Se=$(X);return x=ut(D,Se),Se}});return x?yield x:F.authToken})).apply(this,arguments)}function We(D,b){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,b){let x=yield Ze(D.appConfig);for(;1===x.authToken.requestStatus;)yield se(100),x=yield Ze(D.appConfig);const F=x.authToken;return 0===F.requestStatus?lr(D,b):F})).apply(this,arguments)}function Ze(D){return Yr(D,b=>{if(!xt(b))throw Ee.create("not-registered");return function le(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function ut(D,b){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(D,b){try{const x=yield ur(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield st(D.appConfig,F),x}catch(x){if(!Je(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield st(D.appConfig,F)}else yield qn(D.appConfig);throw x}})).apply(this,arguments)}function xt(D){return void 0!==D&&2===D.registrationStatus}function U(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function $(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Le(){return(Le=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield hn(b);return F?F.catch(console.error):lr(b).catch(console.error),x.fid})).apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(D,b=!1){const x=D;return yield cr(x),(yield lr(x,b)).token})).apply(this,arguments)}function cr(D){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(D){const{registrationPromise:b}=yield hn(D);b&&(yield b)})).apply(this,arguments)}function Bn(D){return Ee.create("missing-app-config-values",{valueName:D})}const oa="installations",ke=D=>{const b=D.getProvider("app").getImmediate(),x=function Zi(D){if(!D||!D.options)throw Bn("App Configuration");if(!D.name)throw Bn("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw Bn(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},At=D=>{const b=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(b,oa).getImmediate();return{getId:()=>function K(D){return Le.apply(this,arguments)}(x),getToken:z=>function dt(D){return jt.apply(this,arguments)}(x,z)}};(function on(){(0,oe._registerComponent)(new pe.wA(oa,ke,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",At,"PRIVATE"))})(),(0,oe.registerVersion)(de,"0.5.8"),(0,oe.registerVersion)(de,"0.5.8","esm2017");const er="@firebase/remote-config",Sn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ph{constructor(b,x,F,z){this.client=b,this.storage=x,this.storageCache=F,this.logger=z}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return z;b.eTag=z&&z.eTag;const X=yield x.client.fetch(b),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Ae),X})()}}function Cc(D=navigator){return D.languages&&D.languages[0]||D.language}class Ba{constructor(b,x,F,z,X,Ae){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=z,this.apiKey=X,this.appId=Ae}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Se={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Ke={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:x.appId,language_code:Cc()},yt={method:"POST",headers:Se,body:JSON.stringify(Ke)},Ct=fetch(Ae,yt),Et=new Promise((ai,Di)=>{b.signal.addEventListener(()=>{const fo=new Error("The operation was aborted.");fo.name="AbortError",Di(fo)})});let Ln;try{yield Promise.race([Ct,Et]),Ln=yield Ct}catch(ai){let Di="fetch-client-network";throw"AbortError"===ai.name&&(Di="fetch-timeout"),Sn.create(Di,{originalErrorMessage:ai.message})}let wn=Ln.status;const Go=Ln.headers.get("ETag")||void 0;let ho,Tr;if(200===Ln.status){let ai;try{ai=yield Ln.json()}catch(Di){throw Sn.create("fetch-client-parse",{originalErrorMessage:Di.message})}ho=ai.entries,Tr=ai.state}if("INSTANCE_STATE_UNSPECIFIED"===Tr?wn=500:"NO_CHANGE"===Tr?wn=304:("NO_TEMPLATE"===Tr||"EMPTY_CONFIG"===Tr)&&(ho={}),304!==wn&&200!==wn)throw Sn.create("fetch-status",{httpStatus:wn});return{status:wn,eTag:Go,config:ho}})()}}class Rp{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var z=this;return(0,O.Z)(function*(){yield function kn(D,b){return new Promise((x,F)=>{const z=Math.max(b-Date.now(),0),X=setTimeout(x,z);D.addEventListener(()=>{clearTimeout(X),F(Sn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const X=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),X}catch(X){if(!function Tc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(X))throw X;const Ae={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Ae),z.attemptFetch(b,Ae)}})()}}class ja{constructor(b,x,F,z,X){this.app=b,this._client=x,this._storageCache=F,this._storage=z,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ju(D,b){const x=D.target.error||void 0;return Sn.create(b,{originalErrorMessage:x&&x.message})}const Ds="app_namespace_store";class gh{constructor(b,x,F,z=function kp(){return new Promise((D,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{b(Ju(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ds,{keyPath:"compositeKey"})}}catch(x){b(Sn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((z,X)=>{const Se=F.transaction([Ds],"readonly").objectStore(Ds),Ke=x.createCompositeKey(b);try{const yt=Se.get(Ke);yt.onerror=Ct=>{X(Ju(Ct,"storage-get"))},yt.onsuccess=Ct=>{const Et=Ct.target.result;z(Et?Et.value:void 0)}}catch(yt){X(Sn.create("storage-get",{originalErrorMessage:yt&&yt.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((X,Ae)=>{const Ke=z.transaction([Ds],"readwrite").objectStore(Ds),yt=F.createCompositeKey(b);try{const Ct=Ke.put({compositeKey:yt,value:x});Ct.onerror=Et=>{Ae(Ju(Et,"storage-set"))},Ct.onsuccess=()=>{X()}}catch(Ct){Ae(Sn.create("storage-set",{originalErrorMessage:Ct&&Ct.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((z,X)=>{const Se=F.transaction([Ds],"readwrite").objectStore(Ds),Ke=x.createCompositeKey(b);try{const yt=Se.delete(Ke);yt.onerror=Ct=>{X(Ju(Ct,"storage-delete"))},yt.onsuccess=()=>{z()}}catch(yt){X(Sn.create("storage-delete",{originalErrorMessage:yt&&yt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Sc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),X=yield x;X&&(b.lastFetchStatus=X);const Ae=yield F;Ae&&(b.lastSuccessfulFetchTimestampMillis=Ae);const Se=yield z;Se&&(b.activeConfig=Se)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function eo(){return mh.apply(this,arguments)}function mh(){return(mh=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Mo(){(0,oe._registerComponent)(new pe.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sn.create("registration-window");if(!(0,J.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:X,apiKey:Ae,appId:Se}=F.options;if(!X)throw Sn.create("registration-project-id");if(!Ae)throw Sn.create("registration-api-key");if(!Se)throw Sn.create("registration-app-id");const Ke=new gh(Se,F.name,x=x||"firebase"),yt=new Sc(Ke),Ct=new ie.Yd(er);Ct.logLevel=ie.in.ERROR;const Et=new Ba(z,oe.SDK_VERSION,x,X,Ae,Se),Ln=new Rp(Et,Ke),wn=new ph(Ln,Ke,yt,Ct),Go=new ja(F,wn,yt,Ke,Ct);return function Jr(D){const b=(0,J.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Go),Go},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(er,"0.3.7"),(0,oe.registerVersion)(er,"0.3.7","esm2017")}();const Xu="/firebase-messaging-sw.js",bs="/firebase-cloud-messaging-push-scope",Fr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",to="google.c.a.c_id",ua="google.c.a.c_l",xc="google.c.a.ts",Pp="google.c.a.e";var Cs=(()=>{return(D=Cs||(Cs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Cs;var D})();function ti(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ha(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),z=new Uint8Array(F.length);for(let X=0;X<F.length;++X)z[X]=F.charCodeAt(X);return z}const Ga="fcm_token_details_db",tr="fcm_token_object_Store";function yh(D){return qa.apply(this,arguments)}function qa(){return qa=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Ga))return null;let b=null;return(yield(0,J.X3)(Ga,5,function(){var F=(0,O.Z)(function*(z,X,Ae,Se){var Ke;if(X<2||!z.objectStoreNames.contains(tr))return;const yt=Se.objectStore(tr),Ct=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),Ct)if(2===X){const Et=Ct;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;b={token:Et.fcmToken,createTime:null!==(Ke=Et.createTime)&&void 0!==Ke?Ke:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:ti(Et.vapidKey)}}}else if(3===X){const Et=Ct;b={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ti(Et.auth),p256dh:ti(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ti(Et.vapidKey)}}}else if(4===X){const Et=Ct;b={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ti(Et.auth),p256dh:ti(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ti(Et.vapidKey)}}}});return function(z,X,Ae,Se){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Ga),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Mc(b)?b:null}),qa.apply(this,arguments)}function Mc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Ji="firebase-messaging-store";let la=null;function el(){return la||(la=(0,J.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(Ji)})),la}function cn(D){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(D){const b=ro(D),F=yield(yield el()).transaction(Ji).objectStore(Ji).get(b);if(F)return F;{const z=yield yh(D.appConfig.senderId);if(z)return yield Ts(D,z),z}})).apply(this,arguments)}function Ts(D,b){return tn.apply(this,arguments)}function tn(){return(tn=(0,O.Z)(function*(D,b){const x=ro(D),z=(yield el()).transaction(Ji,"readwrite");return yield z.objectStore(Ji).put(b,x),yield z.complete,b})).apply(this,arguments)}function Rc(D){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(D){const b=ro(D),F=(yield el()).transaction(Ji,"readwrite");yield F.objectStore(Ji).delete(b),yield F.complete})).apply(this,arguments)}function ro({appConfig:D}){return D.appId}const xn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ca(D,b){return mi.apply(this,arguments)}function mi(){return(mi=(0,O.Z)(function*(D,b){const x=yield Ss(D),F=lt(b),z={method:"POST",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(Vr(D.appConfig),z)).json()}catch(Ae){throw xn.create("token-subscribe-failed",{errorInfo:Ae})}if(X.error)throw xn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw xn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function hr(D,b){return As.apply(this,arguments)}function As(){return(As=(0,O.Z)(function*(D,b){const x=yield Ss(D),F=lt(b.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${Vr(D.appConfig)}/${b.token}`,z)).json()}catch(Ae){throw xn.create("token-update-failed",{errorInfo:Ae})}if(X.error)throw xn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw xn.create("token-update-no-token");return X.token})).apply(this,arguments)}function Xi(D,b){return Za.apply(this,arguments)}function Za(){return(Za=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Ss(D)};try{const X=yield(yield fetch(`${Vr(D.appConfig)}/${b}`,F)).json();if(X.error)throw xn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(z){throw xn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function Vr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ss(D){return xs.apply(this,arguments)}function xs(){return(xs=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function lt({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const z={web:{endpoint:x,auth:b,p256dh:D}};return F!==Fr&&(z.web.applicationPubKey=F),z}const Ka=6048e5;function da(D){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,O.Z)(function*(D){const b=yield rl(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:ti(b.getKey("auth")),p256dh:ti(b.getKey("p256dh"))},F=yield cn(D.firebaseDependencies);if(F){if(Oo(F.subscriptionOptions,x))return Date.now()>=F.createTime+Ka?tl(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Xi(D.firebaseDependencies,F.token)}catch(z){console.warn(z)}return we(D.firebaseDependencies,x)}return we(D.firebaseDependencies,x)})).apply(this,arguments)}function Qa(D){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(D){const b=yield cn(D.firebaseDependencies);b&&(yield Xi(D.firebaseDependencies,b.token),yield Rc(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function tl(D,b){return nl.apply(this,arguments)}function nl(){return(nl=(0,O.Z)(function*(D,b){try{const x=yield hr(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield Ts(D.firebaseDependencies,F),x}catch(x){throw yield Qa(D),x}})).apply(this,arguments)}function we(D,b){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(D,b){const F={token:yield ca(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Ts(D,F),F.token})).apply(this,arguments)}function rl(D,b){return fn.apply(this,arguments)}function fn(){return(fn=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ha(b)})})).apply(this,arguments)}function Oo(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function ko(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Ur(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const z=b.notification.image;z&&(D.notification.image=z)}(b,D),function il(D,b){!b.data||(D.data=b.data)}(b,D),function sl(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const x=b.fcmOptions.link;x&&(D.fcmOptions.link=x);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Nc(D){return"object"==typeof D&&!!D&&to in D}function ol(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function Ms(D){return xn.create("missing-app-config-values",{valueName:D})}ol("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ol("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class nr{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Xa(D){if(!D||!D.options)throw Ms("App Configuration Object");if(!D.name)throw Ms("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw Ms(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ni(D){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Xu,{scope:bs}),D.swRegistration.update().catch(()=>{})}catch(b){throw xn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Rs(D,b){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ni(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw xn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function al(D,b){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Fr)})).apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(D,b){if(!navigator)throw xn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xn.create("permission-blocked");return yield al(D,null==b?void 0:b.vapidKey),yield Rs(D,null==b?void 0:b.serviceWorkerRegistration),da(D)})).apply(this,arguments)}function ha(D,b,x){return fa.apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(D,b,x){const F=ll(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[to],message_name:x[ua],message_time:x[xc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ll(D){switch(D){case Cs.NOTIFICATION_CLICKED:return"notification_open";case Cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Oc(){return(Oc=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Cs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ko(x)):D.onMessageHandler.next(ko(x)));const F=x.data;Nc(F)&&"1"===F[Pp]&&(yield ha(D,x.messageType,F))})).apply(this,arguments)}const dl="@firebase/messaging",kc=D=>{const b=new nr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function cl(D,b){return Oc.apply(this,arguments)}(b,x)),b},so=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function nu(D,b){return ul.apply(this,arguments)}(b,F)}};function Fc(){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pc(){(0,oe._registerComponent)(new pe.wA("messaging",kc,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",so,"PRIVATE")),(0,oe.registerVersion)(dl,"0.9.12"),(0,oe.registerVersion)(dl,"0.9.12","esm2017")}();const fl="analytics",Jm="firebase_id",pa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ru="https://www.googletagmanager.com/gtag/js",Pn=new ie.Yd("@firebase/analytics");function Vc(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function Fp(D,b){const x=document.createElement("script");x.src=`${ru}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function Po(D,b,x,F,z,X){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,O.Z)(function*(D,b,x,F,z,X){const Ae=F[z];try{if(Ae)yield b[Ae];else{const Ke=(yield Vc(x)).find(yt=>yt.measurementId===z);Ke&&(yield b[Ke.appId])}}catch(Se){Pn.error(Se)}D("config",z,X)})).apply(this,arguments)}function gl(D,b,x,F,z){return ao.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(D,b,x,F,z){try{let X=[];if(z&&z.send_to){let Ae=z.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Se=yield Vc(x);for(const Ke of Ae){const yt=Se.find(Et=>Et.measurementId===Ke),Ct=yt&&b[yt.appId];if(!Ct){X=[];break}X.push(Ct)}}0===X.length&&(X=Object.values(b)),yield Promise.all(X),D("event",F,z||{})}catch(X){Pn.error(X)}})).apply(this,arguments)}function Lp(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(ru))return b;return null}const Rn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),jr=new class Br{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Fo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function jc(D){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,z={method:"GET",headers:Fo(F)},X=pa.replace("{app-id}",x),Ae=yield fetch(X,z);if(200!==Ae.status&&304!==Ae.status){let Se="";try{const Ke=yield Ae.json();(null===(b=Ke.error)||void 0===b?void 0:b.message)&&(Se=Ke.error.message)}catch(Ke){}throw Rn.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Se})}return Ae.json()})).apply(this,arguments)}function vh(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(D,b=jr,x){const{appId:F,apiKey:z,measurementId:X}=D.options;if(!F)throw Rn.create("no-app-id");if(!z){if(X)return{measurementId:X,appId:F};throw Rn.create("no-api-key")}const Ae=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Se=new ml;return setTimeout((0,O.Z)(function*(){Se.abort()}),void 0!==x?x:6e4),iu({appId:F,apiKey:z,measurementId:X},Ae,Se,b)})).apply(this,arguments)}function iu(D,b,x){return ri.apply(this,arguments)}function ri(){return(ri=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,z=jr){const{appId:X,measurementId:Ae}=D;try{yield bt(F,b)}catch(Se){if(Ae)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:X,measurementId:Ae};throw Se}try{const Se=yield jc(D);return z.deleteThrottleMetadata(X),Se}catch(Se){if(!$c(Se)){if(z.deleteThrottleMetadata(X),Ae)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:X,measurementId:Ae};throw Se}const Ke=503===Number(Se.customData.httpStatus)?(0,J.$s)(x,z.intervalMillis,30):(0,J.$s)(x,z.intervalMillis),yt={throttleEndTimeMillis:Date.now()+Ke,backoffCount:x+1};return z.setThrottleMetadata(X,yt),Pn.debug(`Calling attemptFetch again in ${Ke} millis`),iu(D,yt,F,z)}})).apply(this,arguments)}function bt(D,b){return new Promise((x,F)=>{const z=Math.max(b-Date.now(),0),X=setTimeout(x,z);D.addEventListener(()=>{clearTimeout(X),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function $c(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class ml{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function Hc(){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(){if(!(0,J.hl)())return Pn.warn(Rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(D){return Pn.warn(Rn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(D,b,x,F,z,X,Ae){var Se;const Ke=vh(D);Ke.then(wn=>{x[wn.measurementId]=wn.appId,D.options.measurementId&&wn.measurementId!==D.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wn=>Pn.error(wn)),b.push(Ke);const yt=Hc().then(wn=>{if(wn)return F.getId()}),[Ct,Et]=yield Promise.all([Ke,yt]);Lp()||Fp(X,Ct.measurementId),z("js",new Date);const Ln=null!==(Se=null==Ae?void 0:Ae.config)&&void 0!==Se?Se:{};return Ln.origin="firebase",Ln.update=!0,null!=Et&&(Ln[Jm]=Et),z("config",Ct.measurementId,Ln),Ct.measurementId})).apply(this,arguments)}class Lo{constructor(b){this.app=b}_delete(){return delete ii[this.app.options.appId],Promise.resolve()}}let ii={},ks=[];const ga={};let Ps,Oi,Ni="dataLayer",_l=!1;function vi(D,b,x){!function Vo(){const D=[];if((0,J.ru)()&&D.push("This is a browser extension environment."),(0,J.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,z)=>`(${z+1}) ${F}`).join(" "),x=Rn.create("invalid-analytics-context",{errorInfo:b});Pn.warn(x.message)}}();const F=D.options.appId;if(!F)throw Rn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Rn.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ii[F])throw Rn.create("already-exists",{id:F});if(!_l){!function ts(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Ni);const{wrappedGtag:X,gtagCore:Ae}=function _h(D,b,x,F,z){let X=function(...Ae){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(X=window[z]),window[z]=function Bc(D,b,x,F){function X(){return(X=(0,O.Z)(function*(Ae,Se,Ke){try{"event"===Ae?yield gl(D,b,x,Se,Ke):"config"===Ae?yield Po(D,b,x,F,Se,Ke):D("set",Se)}catch(yt){Pn.error(yt)}})).apply(this,arguments)}return function z(Ae,Se,Ke){return X.apply(this,arguments)}}(X,D,b,x),{gtagCore:X,wrappedGtag:window[z]}}(ii,ks,ga,Ni,"gtag");Oi=X,Ps=Ae,_l=!0}return ii[F]=function Fn(D,b,x,F,z,X,Ae){return ns.apply(this,arguments)}(D,ks,ga,b,Ps,Ni,x),new Lo(D)}function ma(){return(ma=(0,O.Z)(function*(D,b,x,F,z){if(z&&z.global)D("event",x,F);else{const X=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function En(){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}const Ls="@firebase/analytics";!function jp(){(0,oe._registerComponent)(new pe.wA(fl,(b,{options:x})=>vi(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function D(b){try{const x=b.getProvider(fl).getImmediate();return{logEvent:(F,z,X)=>function Bp(D,b,x,F){D=(0,J.m9)(D),function Uo(D,b,x,F,z){return ma.apply(this,arguments)}(Oi,ii[D.app.options.appId],b,x,F).catch(z=>Pn.error(z))}(x,F,z,X)}}catch(x){throw Rn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Ls,"0.7.8"),(0,oe.registerVersion)(Ls,"0.7.8","esm2017")}();var Vs=k(4408),su=k(7565);const vl=new class mn extends su.v{}(class is extends Vs.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):b.flush(this)}});var $p=k(4986),El=k(8505),gr=k(9468),si=k(5363);const wl=new g.GfV("7.3.0"),ss="__angularfire_symbol__analyticsIsSupportedValue",Ii="__angularfire_symbol__analyticsIsSupported",Pi="__angularfire_symbol__remoteConfigIsSupportedValue",ya="__angularfire_symbol__remoteConfigIsSupported",Il="__angularfire_symbol__messagingIsSupportedValue",Dl="__angularfire_symbol__messagingIsSupported";function Us(D,b,x){if(b){if(1===b.length)return b[0];const X=b.filter(Ae=>Ae.app===x);if(1===X.length)return X[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ii]||(globalThis[Ii]=En().then(D=>globalThis[ss]=D).catch(()=>globalThis[ss]=!1)),globalThis[Dl]||(globalThis[Dl]=Fc().then(D=>globalThis[Il]=D).catch(()=>globalThis[Il]=!1)),globalThis[ya]||(globalThis[ya]=eo().then(D=>globalThis[Pi]=D).catch(()=>globalThis[Pi]=!1));const Wc=(D,b)=>{const x=b?[b]:(0,Z.C6)(),F=[];return x.forEach(z=>{z.container.getProvider(D).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function lo(){}class ou{constructor(b,x=vl){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const z=this.zone;return this.delegate.schedule(function(Ae){z.runGuarded(()=>{b.apply(this,[Ae])})},x,F)}}class Fi{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",lo,{},lo,lo)),x.pipe((0,El.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let au=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ou(Zone.current)),this.insideAngular=x.run(()=>new ou(Zone.current,$p.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Li(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Tl(D){return Li(),function co(D){return function(x){return(x=x.lift(new Fi(D.ngZone))).pipe((0,gr.R)(D.outsideAngular),(0,si.Q)(D.insideAngular))}}(Li())(D)}},2090:(rt,Ce,k)=>{k.d(Ce,{$s:()=>Qs,BH:()=>Te,G6:()=>ee,L:()=>ue,LL:()=>vt,Lj:()=>kt,Mn:()=>$e,Sg:()=>Oe,UG:()=>Ee,US:()=>ie,X3:()=>ut,ZB:()=>Y,ZR:()=>se,b$:()=>De,d:()=>ye,eu:()=>te,hl:()=>q,jU:()=>Je,m9:()=>at,ne:()=>st,pd:()=>zi,r3:()=>Kt,ru:()=>ze,tV:()=>B,uI:()=>he,vZ:()=>ys,w1:()=>ve,xO:()=>xi,xb:()=>Qn,z$:()=>Pe,zI:()=>ge,zd:()=>br});var g=k(5861);const J=function(U){const L=[];let $=0;for(let le=0;le<U.length;le++){let K=U.charCodeAt(le);K<128?L[$++]=K:K<2048?(L[$++]=K>>6|192,L[$++]=63&K|128):55296==(64512&K)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(K=65536+((1023&K)<<10)+(1023&U.charCodeAt(++le)),L[$++]=K>>18|240,L[$++]=K>>12&63|128,L[$++]=K>>6&63|128,L[$++]=63&K|128):(L[$++]=K>>12|224,L[$++]=K>>6&63|128,L[$++]=63&K|128)}return L},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let K=0;K<U.length;K+=3){const Le=U[K],dt=K+1<U.length,jt=dt?U[K+1]:0,cr=K+2<U.length,Ut=cr?U[K+2]:0;let sn=(15&jt)<<2|Ut>>6,Wn=63&Ut;cr||(Wn=64,dt||(sn=64)),le.push($[Le>>2],$[(3&Le)<<4|jt>>4],$[sn],$[Wn])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,le=0;for(;$<U.length;){const K=U[$++];if(K<128)L[le++]=String.fromCharCode(K);else if(K>191&&K<224){const Le=U[$++];L[le++]=String.fromCharCode((31&K)<<6|63&Le)}else if(K>239&&K<365){const cr=((7&K)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[le++]=String.fromCharCode(55296+(cr>>10)),L[le++]=String.fromCharCode(56320+(1023&cr))}else{const Le=U[$++],dt=U[$++];L[le++]=String.fromCharCode((15&K)<<12|(63&Le)<<6|63&dt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let K=0;K<U.length;){const Le=$[U.charAt(K++)],jt=K<U.length?$[U.charAt(K)]:0;++K;const Ut=K<U.length?$[U.charAt(K)]:64;++K;const Dt=K<U.length?$[U.charAt(K)]:64;if(++K,null==Le||null==jt||null==Ut||null==Dt)throw Error();le.push(Le<<2|jt>>4),64!==Ut&&(le.push(jt<<4&240|Ut>>2),64!==Dt&&le.push(Ut<<6&192|Dt))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=J(U);return ie.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return ie.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Y(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!Ge($)||(U[$]=Y(U[$],L[$]));return U}function Ge(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,le)=>{$?this.reject($):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,le))}}}function Oe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",K=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const dt=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:K,exp:K+3600,auth_time:K,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(dt)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Je(){return"object"==typeof self&&self.self===self}function ze(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Pe().indexOf("Electron/")>=0}function ve(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function $e(){return Pe().indexOf("MSAppHost/")>=0}function ee(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function te(){return new Promise((U,L)=>{try{let $=!0;const le="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(le);K.onsuccess=()=>{K.result.close(),$||self.indexedDB.deleteDatabase(le),U(!0)},K.onupgradeneeded=()=>{$=!1},K.onerror=()=>{var Le;L((null===(Le=K.error)||void 0===Le?void 0:Le.message)||"")}}catch($){L($)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class se extends Error{constructor(L,$,le){super($),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}}class vt{constructor(L,$,le){this.service=L,this.serviceName=$,this.errors=le}create(L,...$){const le=$[0]||{},K=`${this.service}/${L}`,Le=this.errors[L],dt=Le?function Zt(U,L){return U.replace(An,($,le)=>{const K=L[le];return null!=K?String(K):`<${le}?>`})}(Le,le):"Error";return new se(K,`${this.serviceName}: ${dt} (${K}).`,le)}}const An=/\{\$([^}]+)}/g;function Kt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Qn(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ys(U,L){if(U===L)return!0;const $=Object.keys(U),le=Object.keys(L);for(const K of $){if(!le.includes(K))return!1;const Le=U[K],dt=L[K];if(Dr(Le)&&Dr(dt)){if(!ys(Le,dt))return!1}else if(Le!==dt)return!1}for(const K of le)if(!$.includes(K))return!1;return!0}function Dr(U){return null!==U&&"object"==typeof U}function xi(U){const L=[];for(const[$,le]of Object.entries(U))Array.isArray(le)?le.forEach(K=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function br(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[K,Le]=le.split("=");L[decodeURIComponent(K)]=decodeURIComponent(Le)}}),L}function zi(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function st(U,L){const $=new kr(U,L);return $.subscribe.bind($)}class kr{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,le){let K;if(void 0===L&&void 0===$&&void 0===le)throw new Error("Missing Observer.");K=function Un(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:le},void 0===K.next&&(K.next=Yr),void 0===K.error&&(K.error=Yr),void 0===K.complete&&(K.complete=Yr);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(dt){}}),this.observers.push(K),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yr(){}function Qs(U,L=1e3,$=2){const le=L*Math.pow($,U),K=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+K)}function at(U){return U&&U._delegate?U._delegate:U}function lr(U,L){return new Promise(($,le)=>{U.onsuccess=K=>{$(K.target.result)},U.onerror=K=>{var Le;le(`${L}: ${null===(Le=K.target.error)||void 0===Le?void 0:Le.message}`)}})}class Nt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$="readonly"){return new We(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new be(this._db.createObjectStore(L,$))}close(){this._db.close()}}class We{constructor(L){this._transaction=L,this.complete=new Promise(($,le)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new be(this._transaction.objectStore(L))}}class be{constructor(L){this._store=L}index(L){return new Ze(this._store.index(L))}createIndex(L,$,le){return new Ze(this._store.createIndex(L,$,le))}get(L){return lr(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return lr(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return lr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return lr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ze{constructor(L){this._index=L}get(L){return lr(this._index.get(L),"Error reading from IndexedDB")}}function ut(U,L,$){return new Promise((le,K)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=dt=>{le(new Nt(dt.target.result))},Le.onerror=dt=>{var jt;K(`Error opening indexedDB: ${null===(jt=dt.target.error)||void 0===jt?void 0:jt.message}`)},Le.onupgradeneeded=dt=>{$(new Nt(Le.result),dt.oldVersion,dt.newVersion,new We(Le.transaction))}}catch(Le){K(`Error opening indexedDB: ${Le.message}`)}})}function kt(U){return xt.apply(this,arguments)}function xt(){return(xt=(0,g.Z)(function*(U){return new Promise((L,$)=>{try{const le=indexedDB.deleteDatabase(U);le.onsuccess=()=>{L()},le.onerror=K=>{var Le;$(`Error deleting indexedDB database "${U}": ${null===(Le=K.target.error)||void 0===Le?void 0:Le.message}`)}}catch(le){$(`Error deleting indexedDB database "${U}": ${le.message}`)}})})).apply(this,arguments)}},9975:(rt,Ce,k)=>{var g=k(5e3);let Z=null;function O(){return Z}const ie=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ue(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ge(){return new j((0,g.LFG)(ie))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pe(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,g.LFG)(ie).location;return new ze((0,g.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const Je=new g.OlP("appBaseHref");let ze=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const d=this.prepareExternalUrl(o+Pe(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){const d=this.prepareExternalUrl(o+Pe(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(Je,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let d=this.prepareExternalUrl(o+Pe(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){let d=this.prepareExternalUrl(o+Pe(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(Je,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(je(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pe(r))}normalize(t){return n.stripTrailingSlash(function $e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Pe,n.joinWithSlash=Te,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(de))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new ye((0,g.LFG)(he),(0,g.LFG)(de))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}var ge=(()=>((ge=ge||{})[ge.Format=0]="Format",ge[ge.Standalone=1]="Standalone",ge))(),ne=(()=>((ne=ne||{})[ne.Narrow=0]="Narrow",ne[ne.Abbreviated=1]="Abbreviated",ne[ne.Wide=2]="Wide",ne[ne.Short=3]="Short",ne))(),Me=(()=>((Me=Me||{})[Me.Short=0]="Short",Me[Me.Medium=1]="Medium",Me[Me.Long=2]="Long",Me[Me.Full=3]="Full",Me))(),se=(()=>((se=se||{})[se.Decimal=0]="Decimal",se[se.Group=1]="Group",se[se.List=2]="List",se[se.PercentSign=3]="PercentSign",se[se.PlusSign=4]="PlusSign",se[se.MinusSign=5]="MinusSign",se[se.Exponential=6]="Exponential",se[se.SuperscriptingExponent=7]="SuperscriptingExponent",se[se.PerMille=8]="PerMille",se[se.Infinity=9]="Infinity",se[se.NaN=10]="NaN",se[se.TimeSeparator=11]="TimeSeparator",se[se.CurrencyDecimal=12]="CurrencyDecimal",se[se.CurrencyGroup=13]="CurrencyGroup",se))();function Jt(n,e){return qn((0,g.cg1)(n)[g.wAp.DateFormat],e)}function qi(n,e){return qn((0,g.cg1)(n)[g.wAp.TimeFormat],e)}function Kt(n,e){return qn((0,g.cg1)(n)[g.wAp.DateTimeFormat],e)}function Lt(n,e){const t=(0,g.cg1)(n),r=t[g.wAp.NumberSymbols][e];if(void 0===r){if(e===se.CurrencyDecimal)return t[g.wAp.NumberSymbols][se.Decimal];if(e===se.CurrencyGroup)return t[g.wAp.NumberSymbols][se.Group]}return r}function zi(n){if(!n[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function qn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Un(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const zn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_s={},ia=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Vt=(()=>((Vt=Vt||{})[Vt.Short=0]="Short",Vt[Vt.ShortGMT=1]="ShortGMT",Vt[Vt.Long=2]="Long",Vt[Vt.Extended=3]="Extended",Vt))(),et=(()=>((et=et||{})[et.FullYear=0]="FullYear",et[et.Month=1]="Month",et[et.Date=2]="Date",et[et.Hours=3]="Hours",et[et.Minutes=4]="Minutes",et[et.Seconds=5]="Seconds",et[et.FractionalSeconds=6]="FractionalSeconds",et[et.Day=7]="Day",et))(),gt=(()=>((gt=gt||{})[gt.DayPeriods=0]="DayPeriods",gt[gt.Days=1]="Days",gt[gt.Months=2]="Months",gt[gt.Eras=3]="Eras",gt))();function Jn(n,e,t,r){let o=function jt(n){if(Ut(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,l=1,d=1]=n.split("-").map(m=>+m);return Mi(o,l-1,d)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(zn))return function cr(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,l=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-t,m=Number(n[5]||0)-r,w=Number(n[6]||0),C=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(e,d,m,w,C),e}(r)}const e=new Date(n);if(!Ut(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Pt(t,e)||e;let m,d=[];for(;e;){if(m=ia.exec(e),!m){d.push(e);break}{d=d.concat(m.slice(1));const M=d.pop();if(!M)break;e=M}}let w=o.getTimezoneOffset();r&&(w=K(r,w),o=function dt(n,e,t){const r=t?-1:1,o=n.getTimezoneOffset();return function Le(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(K(e,o)-o))}(o,r,!0));let C="";return d.forEach(M=>{const N=function le(n){if($[n])return $[n];let e;switch(n){case"G":case"GG":case"GGG":e=Nt(gt.Eras,ne.Abbreviated);break;case"GGGG":e=Nt(gt.Eras,ne.Wide);break;case"GGGGG":e=Nt(gt.Eras,ne.Narrow);break;case"y":e=at(et.FullYear,1,0,!1,!0);break;case"yy":e=at(et.FullYear,2,0,!0,!0);break;case"yyy":e=at(et.FullYear,3,0,!1,!0);break;case"yyyy":e=at(et.FullYear,4,0,!1,!0);break;case"Y":e=L(1);break;case"YY":e=L(2,!0);break;case"YYY":e=L(3);break;case"YYYY":e=L(4);break;case"M":case"L":e=at(et.Month,1,1);break;case"MM":case"LL":e=at(et.Month,2,1);break;case"MMM":e=Nt(gt.Months,ne.Abbreviated);break;case"MMMM":e=Nt(gt.Months,ne.Wide);break;case"MMMMM":e=Nt(gt.Months,ne.Narrow);break;case"LLL":e=Nt(gt.Months,ne.Abbreviated,ge.Standalone);break;case"LLLL":e=Nt(gt.Months,ne.Wide,ge.Standalone);break;case"LLLLL":e=Nt(gt.Months,ne.Narrow,ge.Standalone);break;case"w":e=U(1);break;case"ww":e=U(2);break;case"W":e=U(1,!0);break;case"d":e=at(et.Date,1);break;case"dd":e=at(et.Date,2);break;case"c":case"cc":e=at(et.Day,1);break;case"ccc":e=Nt(gt.Days,ne.Abbreviated,ge.Standalone);break;case"cccc":e=Nt(gt.Days,ne.Wide,ge.Standalone);break;case"ccccc":e=Nt(gt.Days,ne.Narrow,ge.Standalone);break;case"cccccc":e=Nt(gt.Days,ne.Short,ge.Standalone);break;case"E":case"EE":case"EEE":e=Nt(gt.Days,ne.Abbreviated);break;case"EEEE":e=Nt(gt.Days,ne.Wide);break;case"EEEEE":e=Nt(gt.Days,ne.Narrow);break;case"EEEEEE":e=Nt(gt.Days,ne.Short);break;case"a":case"aa":case"aaa":e=Nt(gt.DayPeriods,ne.Abbreviated);break;case"aaaa":e=Nt(gt.DayPeriods,ne.Wide);break;case"aaaaa":e=Nt(gt.DayPeriods,ne.Narrow);break;case"b":case"bb":case"bbb":e=Nt(gt.DayPeriods,ne.Abbreviated,ge.Standalone,!0);break;case"bbbb":e=Nt(gt.DayPeriods,ne.Wide,ge.Standalone,!0);break;case"bbbbb":e=Nt(gt.DayPeriods,ne.Narrow,ge.Standalone,!0);break;case"B":case"BB":case"BBB":e=Nt(gt.DayPeriods,ne.Abbreviated,ge.Format,!0);break;case"BBBB":e=Nt(gt.DayPeriods,ne.Wide,ge.Format,!0);break;case"BBBBB":e=Nt(gt.DayPeriods,ne.Narrow,ge.Format,!0);break;case"h":e=at(et.Hours,1,-12);break;case"hh":e=at(et.Hours,2,-12);break;case"H":e=at(et.Hours,1);break;case"HH":e=at(et.Hours,2);break;case"m":e=at(et.Minutes,1);break;case"mm":e=at(et.Minutes,2);break;case"s":e=at(et.Seconds,1);break;case"ss":e=at(et.Seconds,2);break;case"S":e=at(et.FractionalSeconds,1);break;case"SS":e=at(et.FractionalSeconds,2);break;case"SSS":e=at(et.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=be(Vt.Short);break;case"ZZZZZ":e=be(Vt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=be(Vt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=be(Vt.Long);break;default:return null}return $[n]=e,e}(M);C+=N?N(o,t,w):"''"===M?"'":M.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function Mi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Pt(n,e){const t=function Zt(n){return(0,g.cg1)(n)[g.wAp.LocaleId]}(n);if(_s[t]=_s[t]||{},_s[t][e])return _s[t][e];let r="";switch(e){case"shortDate":r=Jt(n,Me.Short);break;case"mediumDate":r=Jt(n,Me.Medium);break;case"longDate":r=Jt(n,Me.Long);break;case"fullDate":r=Jt(n,Me.Full);break;case"shortTime":r=qi(n,Me.Short);break;case"mediumTime":r=qi(n,Me.Medium);break;case"longTime":r=qi(n,Me.Long);break;case"fullTime":r=qi(n,Me.Full);break;case"short":const o=Pt(n,"shortTime"),l=Pt(n,"shortDate");r=Qs(Kt(n,Me.Short),[o,l]);break;case"medium":const d=Pt(n,"mediumTime"),m=Pt(n,"mediumDate");r=Qs(Kt(n,Me.Medium),[d,m]);break;case"long":const w=Pt(n,"longTime"),C=Pt(n,"longDate");r=Qs(Kt(n,Me.Long),[w,C]);break;case"full":const M=Pt(n,"fullTime"),N=Pt(n,"fullDate");r=Qs(Kt(n,Me.Full),[M,N])}return r&&(_s[t][e]=r),r}function Qs(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function ur(n,e,t="-",r,o){let l="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,l=t));let d=String(n);for(;d.length<e;)d="0"+d;return r&&(d=d.substr(d.length-e)),l+d}function at(n,e,t=0,r=!1,o=!1){return function(l,d){let m=function lr(n,e){switch(n){case et.FullYear:return e.getFullYear();case et.Month:return e.getMonth();case et.Date:return e.getDate();case et.Hours:return e.getHours();case et.Minutes:return e.getMinutes();case et.Seconds:return e.getSeconds();case et.FractionalSeconds:return e.getMilliseconds();case et.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((t>0||m>-t)&&(m+=t),n===et.Hours)0===m&&-12===t&&(m=12);else if(n===et.FractionalSeconds)return function Xn(n,e){return ur(n,3).substr(0,e)}(m,e);const w=Lt(d,se.MinusSign);return ur(m,e,w,r,o)}}function Nt(n,e,t=ge.Format,r=!1){return function(o,l){return function We(n,e,t,r,o,l){switch(t){case gt.Months:return function ct(n,e,t){const r=(0,g.cg1)(n),l=qn([r[g.wAp.MonthsFormat],r[g.wAp.MonthsStandalone]],e);return qn(l,t)}(e,o,r)[n.getMonth()];case gt.Days:return function it(n,e,t){const r=(0,g.cg1)(n),l=qn([r[g.wAp.DaysFormat],r[g.wAp.DaysStandalone]],e);return qn(l,t)}(e,o,r)[n.getDay()];case gt.DayPeriods:const d=n.getHours(),m=n.getMinutes();if(l){const C=function Wi(n){const e=(0,g.cg1)(n);return zi(e),(e[g.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Un(r):[Un(r[0]),Un(r[1])])}(e),M=function st(n,e,t){const r=(0,g.cg1)(n);zi(r);const l=qn([r[g.wAp.ExtraData][0],r[g.wAp.ExtraData][1]],e)||[];return qn(l,t)||[]}(e,o,r),N=C.findIndex(H=>{if(Array.isArray(H)){const[Q,ce]=H,Fe=d>=Q.hours&&m>=Q.minutes,tt=d<ce.hours||d===ce.hours&&m<ce.minutes;if(Q.hours<ce.hours){if(Fe&&tt)return!0}else if(Fe||tt)return!0}else if(H.hours===d&&H.minutes===m)return!0;return!1});if(-1!==N)return M[N]}return function An(n,e,t){const r=(0,g.cg1)(n),l=qn([r[g.wAp.DayPeriodsFormat],r[g.wAp.DayPeriodsStandalone]],e);return qn(l,t)}(e,o,r)[d<12?0:1];case gt.Eras:return function nn(n,e){return qn((0,g.cg1)(n)[g.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,l,n,e,t,r)}}function be(n){return function(e,t,r){const o=-1*r,l=Lt(t,se.MinusSign),d=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case Vt.Short:return(o>=0?"+":"")+ur(d,2,l)+ur(Math.abs(o%60),2,l);case Vt.ShortGMT:return"GMT"+(o>=0?"+":"")+ur(d,1,l);case Vt.Long:return"GMT"+(o>=0?"+":"")+ur(d,2,l)+":"+ur(Math.abs(o%60),2,l);case Vt.Extended:return 0===r?"Z":(o>=0?"+":"")+ur(d,2,l)+":"+ur(Math.abs(o%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function xt(n){return Mi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function U(n,e=!1){return function(t,r){let o;if(e){const l=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,d=t.getDate();o=1+Math.floor((d+l)/7)}else{const l=xt(t),d=function kt(n){const e=Mi(n,0,1).getDay();return Mi(n,0,1+(e<=4?4:11)-e)}(l.getFullYear()),m=l.getTime()-d.getTime();o=1+Math.round(m/6048e5)}return ur(o,n,Lt(r,se.MinusSign))}}function L(n,e=!1){return function(t,r){return ur(xt(t).getFullYear(),n,Lt(r,se.MinusSign),e)}}const $={};function K(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Ut(n){return n instanceof Date&&!isNaN(n.valueOf())}class ws{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,l,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ws(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===l?void 0:l);else if(null!==l){const m=r.get(l);r.move(m,d),Ki(m,o)}});for(let o=0,l=r.length;o<l;o++){const m=r.get(o).context;m.index=o,m.count=l,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ki(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ki(n,e){n.context.$implicit=e.item}let Jr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new en,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){La("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){La("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class en{constructor(){this.$implicit=null,this.ngIf=null}}function La(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}function kn(n,e){return new g.vHH(2100,"")}class Tc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Rp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Qi=new Rp,Np=new Tc;let ja=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,g.QGY)(t))return Qi;if((0,g.F4k)(t))return Np;throw kn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.sBO,16))},n.\u0275pipe=g.Yjl({name:"async",type:n,pure:!1}),n})();const kp=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let gh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",o,l){var d;if(null==t||""===t||t!=t)return null;try{return Jn(t,r,l||this.locale,null!==(d=null!=o?o:this.defaultTimezone)&&void 0!==d?d:void 0)}catch(m){throw kn()}}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.soG,16),g.Y36(kp,24))},n.\u0275pipe=g.Yjl({name:"date",type:n,pure:!0}),n})(),ei=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function tr(n){return"server"===n}let za=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Wa((0,g.LFG)(ie),window)}),n})();class Wa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function la(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const d=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ji(this.window.history)||Ji(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ji(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ts extends class No extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){Z||(Z=n)}(new Ts)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Rc(){return tn=tn||document.querySelector("base"),tn?tn.getAttribute("href"):null}();return null==t?null:function ro(n){no=no||document.createElement("a"),no.setAttribute("href",n);const e=no.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){tn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let no,tn=null;const dr=new g.OlP("TRANSITION_ID"),ca=[{provide:g.ip1,useFactory:function xn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[dr,ie,g.zs3],multi:!0}];class mi{static init(){(0,g.VLi)(new mi)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let l=o.length,d=!1;const m=function(w){d=d||w,l--,0==l&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let hr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const As=new g.OlP("EventManagerPlugins");let Xi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const d=o[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(As),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Vr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ss=(()=>{class n extends Vr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(xs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(xs))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function xs(n){O().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ka=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(Ka,n),t.push(o))}return t}function Mt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let fn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Oo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new il(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new sl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Xi),g.LFG(Ss),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Oo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=lt[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Mt(r)):this.eventManager.addEventListener(e,t,Mt(r))}}class il extends Oo{constructor(e,t,r,o){super(e),this.component=r;const l=we(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function tl(n){return"_ngcontent-%COMP%".replace(Ka,n)}(o+"-"+r.id),this.hostAttr=function nl(n){return"_nghost-%COMP%".replace(Ka,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class sl extends Oo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=we(o.id,o.styles,[]);for(let d=0;d<l.length;d++){const m=document.createElement("style");m.textContent=l[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Nc=(()=>{class n extends Za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ol=["alt","control","meta","shift"],Ms={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ni={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let eu=(()=>{class n extends Za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let d="";if(ol.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Rs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&nr.hasOwnProperty(e)&&(e=nr[e]))}return Ms[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ol.forEach(l=>{l!=o&&ni[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ul=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function yi(){Ts.makeCurrent(),mi.init()},multi:!0},{provide:ie,useFactory:function tu(){return(0,g.RDi)(document),document},deps:[]}]),ha=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function al(){return new g.qLn},deps:[]},{provide:As,useClass:Nc,multi:!0,deps:[ie,g.R0b,g.Lbi]},{provide:As,useClass:eu,multi:!0,deps:[ie]},{provide:fn,useClass:fn,deps:[Xi,Ss,g.AFp]},{provide:g.FYo,useExisting:fn},{provide:Vr,useExisting:Ss},{provide:Ss,useClass:Ss,deps:[ie]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Xi,useClass:Xi,deps:[As,g.R0b]},{provide:class cn{},useClass:hr,deps:[]}];let fa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:dr,useExisting:g.AFp},ca]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:ha,imports:[ei,g.hGG]}),n})();"undefined"!=typeof window&&window;var Mn=k(8996),Rn=k(7669);function ht(...n){const e=(0,Rn.yG)(n);return(0,Mn.D)(n,e)}var rr=k(7579);class Br extends rr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var jr=k(8306);const{isArray:Fo}=Array,{getPrototypeOf:jc,prototype:an,keys:vh}=Object;function _i(n){if(1===n.length){const e=n[0];if(Fo(e))return{args:e,keys:null};if(function iu(n){return n&&"object"==typeof n&&jc(n)===an}(e)){const t=vh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ri=k(4671),bt=k(4004);const{isArray:$c}=Array;function Hc(n){return(0,bt.U)(e=>function ml(n,e){return $c(e)?n(...e):n(e)}(n,e))}function uo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Fn=k(5403),ns=k(9672);function ks(n,e,t){n?(0,ns.f)(t,n,e):e()}var ga=k(576);function Ni(n,e){const t=(0,ga.m)(n)?n:()=>n,r=o=>o.error(t());return new jr.y(e?o=>e.schedule(r,0,o):r)}const Ps=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Oi=k(8189);function Gc(...n){return function _l(){return(0,Oi.J)(1)}()((0,Mn.D)(n,(0,Rn.yG)(n)))}var Vo=k(8421);function vi(n){return new jr.y(e=>{(0,Vo.Xf)(n()).subscribe(e)})}var Uo=k(515),ma=k(727),Cr=k(4482);function Ei(){return(0,Cr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qc extends jr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Cr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ma.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ma.w0.EMPTY)}return e}refCount(){return Ei()(this)}}function Nn(n,e){return(0,Cr.e)((t,r)=>{let o=null,l=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Fn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const M=l++;(0,Vo.Xf)(n(w,M)).subscribe(o=(0,Fn.x)(r,N=>r.next(e?e(w,N,M,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Bo=k(5698);function wi(...n){const e=(0,Rn.yG)(n);return(0,Cr.e)((t,r)=>{(e?Gc(n,t,e):Gc(n,t)).subscribe(r)})}function jo(n,e,t,r,o){return(l,d)=>{let m=t,w=e,C=0;l.subscribe((0,Fn.x)(d,M=>{const N=C++;w=m?n(w,M,N):(m=!0,M),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function pr(n,e){return(0,Cr.e)(jo(n,e,arguments.length>=2,!0))}function rs(n,e){return(0,Cr.e)((t,r)=>{let o=0;t.subscribe((0,Fn.x)(r,l=>n.call(e,l,o++)&&r.next(l)))})}function ki(n){return(0,Cr.e)((e,t)=>{let l,r=null,o=!1;r=e.subscribe((0,Fn.x)(t,void 0,void 0,d=>{l=(0,Vo.Xf)(n(d,ki(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,l.subscribe(t))})}var En=k(5577);function Fs(n,e){return(0,ga.m)(e)?(0,En.z)(n,e,1):(0,En.z)(n,1)}function zc(n){return n<=0?()=>Uo.E:(0,Cr.e)((e,t)=>{let r=[];e.subscribe((0,Fn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function gn(n=Vp){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Vp(){return new Ps}function Up(n){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Ls(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rs((o,l)=>n(o,l,r)):ri.y,(0,Bo.q)(1),t?Up(e):gn(()=>new Ps))}var $r=k(8505);class Vs{constructor(e,t){this.id=e,this.url=t}}class is extends Vs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class su extends Vs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mn extends Vs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vl extends Vs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $o extends Vs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $p extends Vs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class El extends Vs{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gr extends Vs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class si extends Vs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ss{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ii{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ya{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Il{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const St="primary";class bl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jn(n){return new bl(n)}const Cl="ngNavigationCancelingError";function Us(n){const e=Error("NavigationCancelingError: "+n);return e[Cl]=!0,e}function lo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const d=r[l],m=n[l];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Fi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!au(n[o],e[o]))return!1;return!0}function au(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function Li(n){return Array.prototype.concat.apply([],n)}function Zc(n){return n.length>0?n[n.length-1]:null}function $n(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function oi(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Mn.D)(Promise.resolve(n)):ht(n)}const co={exact:function b(n,e,t){if(!Ct(n.segments,e.segments)||!X(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!b(n.children[r],e.children[r],t))return!1;return!0},subset:F},Ho={exact:function D(n,e){return Fi(n,e)},subset:function x(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>au(n[t],e[t]))},ignored:()=>!0};function uu(n,e,t){return co[t.paths](n.root,e.root,t.matrixParams)&&Ho[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return z(n,e,e.segments,t)}function z(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ct(o,t)||e.hasChildren()||!X(o,t,r))}if(n.segments.length===t.length){if(!Ct(n.segments,t)||!X(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(Ct(n.segments,o)&&X(n.segments,o,r)&&n.children[St])&&z(n.children[St],e,l,r)}}function X(n,e,t){return e.every((r,o)=>Ho[t](n[o].parameters,r.parameters))}class Ae{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return Go.serialize(this)}}class Se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$n(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ho(this)}}class Ke{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jn(this.parameters)),this._parameterMap}toString(){return _a(this)}}function Ct(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ln{}class wn{parse(e){const t=new Yc(e);return new Ae(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Tr(e.root,!0)}`,r=function Xm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Di(t)}=${Di(o)}`).join("&"):`${Di(t)}=${Di(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function fo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Go=new wn;function ho(n){return n.segments.map(e=>_a(e)).join("/")}function Tr(n,e){if(!n.hasChildren())return ho(n);if(e){const t=n.children[St]?Tr(n.children[St],!1):"",r=[];return $n(n.children,(o,l)=>{l!==St&&r.push(`${l}:${Tr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Et(n,e){let t=[];return $n(n.children,(r,o)=>{o===St&&(t=t.concat(e(r,o)))}),$n(n.children,(r,o)=>{o!==St&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===St?[Tr(n.children[St],!1)]:[`${o}:${Tr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${ho(n)}/${t[0]}`:`${ho(n)}/(${t.join("//")})`}}function ai(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Di(n){return ai(n).replace(/%3B/gi,";")}function Kc(n){return ai(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Al(n){return decodeURIComponent(n)}function Sl(n){return Al(n.replace(/\+/g,"%20"))}function _a(n){return`${Kc(n.path)}${function Hp(n){return Object.keys(n).map(e=>`;${Kc(e)}=${Kc(n[e])}`).join("")}(n.parameters)}`}const ey=/^[^\/()?;=#]+/;function os(n){const e=n.match(ey);return e?e[0]:""}const xl=/^[^=?&#]+/,ny=/^[^&#]+/;class Yc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[St]=new Se(e,t)),r}parseSegment(){const e=os(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ke(Al(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=os(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=os(this.remaining);o&&(r=o,this.capture(r))}e[Al(t)]=Al(r)}parseQueryParam(e){const t=function ty(n){const e=n.match(xl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Gp(n){const e=n.match(ny);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Sl(t),l=Sl(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=os(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=St);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[St]:new Se([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ry{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Eh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Eh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return wh(e,this._root).map(t=>t.value)}}function Eh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Eh(n,t);if(r)return r}return null}function wh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wh(n,t);if(r.length)return r.unshift(e),r}return[]}class po{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function go(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Qc extends ry{constructor(e,t){super(e),this.snapshot=t,Xc(this,e)}toString(){return this.snapshot.toString()}}function va(n,e){const t=function iy(n,e){const d=new lu([],{},{},"",{},St,e,null,n.root,-1,{});return new Ih("",new po(d,[]))}(n,e),r=new Br([new Ke("",{})]),o=new Br({}),l=new Br({}),d=new Br({}),m=new Br(""),w=new qo(r,o,d,m,l,St,e,t.root);return w.snapshot=t.root,new Qc(new po(w,[]),t)}class qo{constructor(e,t,r,o,l,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(e=>jn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(e=>jn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function Jc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lu{constructor(e,t,r,o,l,d,m,w,C,M,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=M,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ih extends ry{constructor(e,t){super(t),this.url=e,Xc(this,t)}toString(){return ed(this._root)}}function Xc(n,e){e.value._routerState=n,e.children.forEach(t=>Xc(n,t))}function ed(n){const e=n.children.length>0?` { ${n.children.map(ed).join(", ")} } `:"";return`${n.value}${e}`}function td(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Fi(e.params,t.params)||n.params.next(t.params),function ou(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Fi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Dh(n,e){const t=Fi(n.params,e.params)&&function yt(n,e){return Ct(n,e)&&n.every((t,r)=>Fi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Dh(n.parent,e.parent))}function Ml(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function bh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Ml(n,r,o);return Ml(n,r)})}(n,e,t);return new po(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const d=l.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Ml(n,m)),d}}const r=function ay(n){return new qo(new Br(n.url),new Br(n.params),new Br(n.queryParams),new Br(n.fragment),new Br(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>Ml(n,l));return new po(r,o)}}function zo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function cu(n){return"object"==typeof n&&null!=n&&n.outlets}function qp(n,e,t,r,o){let l={};if(r&&$n(r,(m,w)=>{l[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Ae(t,l,o);const d=Ch(n,e,t);return new Ae(d,l,o)}function Ch(n,e,t){const r={};return $n(n.children,(o,l)=>{r[l]=o===e?t:Ch(o,e,t)}),new Se(n.segments,r)}class uy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zo(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(cu);if(o&&o!==Zc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Th{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function hy(n,e,t){if(n||(n=new Se([],{})),0===n.segments.length&&n.hasChildren())return js(n,e,t);const r=function y0(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const d=n.segments[o],m=t[r];if(cu(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!bi(w,C,d))return l;r+=2}else{if(!bi(w,{},d))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Se(n.segments.slice(0,r.pathIndex),{});return l.children[St]=new Se(n.segments.slice(r.pathIndex),n.children),js(l,0,o)}return r.match&&0===o.length?new Se(n.segments,{}):r.match&&!n.hasChildren()?Ah(n,e,t):r.match?js(n,0,o):Ah(n,e,t)}function js(n,e,t){if(0===t.length)return new Se(n.segments,{});{const r=function dy(n){return cu(n[0])?n[0].outlets:{[St]:n}}(t),o={};return $n(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[d]=hy(n.children[d],e,l))}),$n(n.children,(l,d)=>{void 0===r[d]&&(o[d]=l)}),new Se(n.segments,o)}}function Ah(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(cu(l)){const w=du(l.outlets);return new Se(r,w)}if(0===o&&zo(t[0])){r.push(new Ke(n.segments[e].path,Sh(t[0]))),o++;continue}const d=cu(l)?l.outlets[St]:`${l}`,m=o<t.length-1?t[o+1]:null;d&&m&&zo(m)?(r.push(new Ke(d,Sh(m))),o+=2):(r.push(new Ke(d,{})),o++)}return new Se(r,{})}function du(n){const e={};return $n(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ah(new Se([],{}),0,t))}),e}function Sh(n){const e={};return $n(n,(t,r)=>e[r]=`${t}`),e}function bi(n,e,t){return n==t.path&&Fi(e,t.parameters)}class Wp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),td(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=go(t);e.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,o[d],r),delete o[d]}),$n(o,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=go(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=go(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=go(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new Il(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Pi(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(td(o),o===l)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),td(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function nd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class rd{constructor(e,t){this.routes=e,this.module=t}}function Ea(n){return"function"==typeof n}function hu(n){return n instanceof Ae}const Nl=Symbol("INITIAL_VALUE");function Wo(){return Nn(n=>function Lo(...n){const e=(0,Rn.yG)(n),t=(0,Rn.jO)(n),{args:r,keys:o}=_i(n);if(0===r.length)return(0,Mn.D)([],e);const l=new jr.y(function ii(n,e,t=ri.y){return r=>{ks(e,()=>{const{length:o}=n,l=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)ks(e,()=>{const C=(0,Mn.D)(n[w],e);let M=!1;C.subscribe((0,Fn.x)(r,N=>{l[w]=N,M||(M=!0,m--),m||r.next(t(l.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>uo(o,d):ri.y));return t?l.pipe(Hc(t)):l}(n.map(e=>e.pipe((0,Bo.q)(1),wi(Nl)))).pipe(pr((e,t)=>{let r=!1;return t.reduce((o,l,d)=>o!==Nl?o:(l===Nl&&(r=!0),r||!1!==l&&d!==t.length-1&&!hu(l)?o:l),e)},Nl),rs(e=>e!==Nl),(0,bt.U)(e=>hu(e)?e:!0===e),(0,Bo.q)(1)))}class fy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ol,this.attachRef=null}}class Ol{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new fy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let kl=(()=>{class n{constructor(t,r,o,l,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=l||St,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Nh(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ol),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Nh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===qo?this.route:e===Ol?this.childContexts:this.parent.get(e,t)}}let Oh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[kl],encapsulation:2}),n})();function Pl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];id(r,kh(e,r))}}function id(n,e){n.children&&Pl(n.children,e)}function kh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ph(n){const e=n.children&&n.children.map(Ph),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=Oh),t}function Yt(n){return n.outlet||St}function Fh(n,e){const t=n.filter(r=>Yt(r)===e);return t.push(...n.filter(r=>Yt(r)!==e)),t}const Kp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Kp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||lo)(t,n,e);if(!l)return Object.assign({},Kp);const d={};$n(l.posParams,(w,C)=>{d[C]=w.path});const m=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:m,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function Fl(n,e,t,r,o="corrected"){if(t.length>0&&function gy(n,e,t){return t.some(r=>od(n,e,r)&&Yt(r)!==St)}(n,t,r)){const d=new Se(e,function sd(n,e,t,r){const o={};o[St]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Yt(l)!==St){const d=new Se([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Yt(l)]=d}return o}(n,e,r,new Se(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Yp(n,e,t){return t.some(r=>od(n,e,r))}(n,t,r)){const d=new Se(n.segments,function py(n,e,t,r,o,l){const d={};for(const m of r)if(od(n,t,m)&&!o[Yt(m)]){const w=new Se([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===l?n.segments.length:e.length,d[Yt(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const l=new Se(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function od(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function my(n,e,t,r){return!!(Yt(n)===r||r!==St&&od(e,t,n))&&("**"===n.path||fu(e,n,t).matched)}function yy(n,e,t){return 0===e.length&&!n.children[t]}class Zo{constructor(e){this.segmentGroup=e||null}}class mr{constructor(e){this.urlTree=e}}function mo(n){return Ni(new Zo(n))}function Ll(n){return Ni(new mr(n))}class Vh{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Fl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Se(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,St).pipe((0,bt.U)(l=>this.createUrlTree(Ia(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ki(l=>{if(l instanceof mr)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Zo?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,St).pipe((0,bt.U)(o=>this.createUrlTree(Ia(o),e.queryParams,e.fragment))).pipe(ki(o=>{throw o instanceof Zo?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Se([],{[St]:e}):e;return new Ae(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,bt.U)(l=>new Se([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,Mn.D)(o).pipe(Fs(l=>{const d=r.children[l],m=Fh(t,l);return this.expandSegmentGroup(e,m,d,l).pipe((0,bt.U)(w=>({segment:w,outlet:l})))}),pr((l,d)=>(l[d.outlet]=d.segment,l),{}),function Bp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rs((o,l)=>n(o,l,r)):ri.y,zc(1),t?Up(e):gn(()=>new Ps))}())}expandSegment(e,t,r,o,l,d){return(0,Mn.D)(r).pipe(Fs(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,l,d).pipe(ki(C=>{if(C instanceof Zo)return ht(null);throw C}))),Ls(m=>!!m),ki((m,w)=>{if(m instanceof Ps||"EmptyError"===m.name)return yy(t,o,l)?ht(new Se([],{})):mo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,l,d,m){return my(o,t,l,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d):mo(t):mo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ll(l):this.lineralizeSegments(r,l).pipe((0,En.z)(d=>{const m=new Se(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:M}=fu(t,o,l);if(!m)return mo(t);const N=this.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?Ll(N):this.lineralizeSegments(o,N).pipe((0,En.z)(H=>this.expandSegment(e,t,r,H.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ht(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,bt.U)(N=>(r._loadedConfig=N,new Se(o,{})))):ht(new Se(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=fu(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,En.z)(M=>{const N=M.module,H=M.routes,{segmentGroup:Q,slicedSegments:ce}=Fl(t,m,w,H),Fe=new Se(Q.segments,Q.children);if(0===ce.length&&Fe.hasChildren())return this.expandChildren(N,H,Fe).pipe((0,bt.U)(Wt=>new Se(m,Wt)));if(0===H.length&&0===ce.length)return ht(new Se(m,{}));const tt=Yt(r)===l;return this.expandSegment(N,Fe,H,ce,tt?St:l,!0).pipe((0,bt.U)(Gt=>new Se(m.concat(Gt.segments),Gt.children)))})):mo(t)}getChildConfig(e,t,r){return t.children?ht(new rd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ht(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,En.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,bt.U)(l=>(t._loadedConfig=l,l))):function Ar(n){return Ni(Us(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ht(new rd([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?ht(o.map(d=>{const m=e.get(d);let w;if(function xh(n){return n&&Ea(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Ea(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return oi(w)})).pipe(Wo(),(0,$r.b)(d=>{if(!hu(d))return;const m=Us(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,bt.U)(d=>!0===d)):ht(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ht(r);if(o.numberOfChildren>1||!o.children[St])return Ni(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[St]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new Ae(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $n(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[l]=t[m]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let d={};return $n(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Se(l,d)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Ia(n){const e={};for(const r of Object.keys(n.children)){const l=Ia(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function Ci(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new Se(n.segments.concat(e.segments),e.children)}return n}(new Se(n.segments,e))}class Qp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Da{constructor(e,t){this.component=e,this.route=t}}function Bh(n,e,t){const r=n._root;return ui(r,e?e._root:null,t,[r.value])}function Vl(n,e,t){const r=function _y(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ui(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=go(e);return n.children.forEach(d=>{(function Xp(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const w=function vy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ct(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ct(n.url,e.url)||!Fi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dh(n,e)||!Fi(n.queryParams,e.queryParams);default:return!Dh(n,e)}}(d,l,l.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Qp(r)):(l.data=d.data,l._resolvedData=d._resolvedData),ui(n,e,l.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Da(m.outlet.component,d))}else d&&ba(e,m,o),o.canActivateChecks.push(new Qp(r)),ui(n,null,l.component?m?m.children:null:t,r,o)})(d,l[d.value.outlet],t,r.concat([d.value]),o),delete l[d.value.outlet]}),$n(l,(d,m)=>ba(d,t.getContext(m),o)),o}function ba(n,e,t){const r=go(n),o=n.value;$n(r,(l,d)=>{ba(l,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Da(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Hh{}function Gh(n){return new jr.y(e=>e.error(n))}class qh{constructor(e,t,r,o,l,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const e=Fl(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,St);if(null===t)return null;const r=new lu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new po(r,t),l=new Ih(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=sy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const d=t.children[l],m=Fh(e,l),w=this.processSegmentGroup(m,d,l);if(null===w)return null;r.push(...w)}const o=tg(r);return function Dy(n){n.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const l of e){const d=this.processSegmentAgainstRoute(l,t,r,o);if(null!==d)return d}return yy(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!my(e,t,r,o))return null;let l,d=[],m=[];if("**"===e.path){const Q=r.length>0?Zc(r).parameters:{};l=new lu(r,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Yt(e),e.component,e,h(t),p(t)+r.length,T(e))}else{const Q=fu(t,e,r);if(!Q.matched)return null;d=Q.consumedSegments,m=Q.remainingSegments,l=new lu(d,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Yt(e),e.component,e,h(t),p(t)+d.length,T(e))}const w=function by(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:M}=Fl(t,d,m,w.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===M.length&&C.hasChildren()){const Q=this.processChildren(w,C);return null===Q?null:[new po(l,Q)]}if(0===w.length&&0===M.length)return[new po(l,[])];const N=Yt(e)===o,H=this.processSegment(w,C,M,N?St:o);return null===H?null:[new po(l,H)]}}function Cy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function tg(n){const e=[],t=new Set;for(const r of n){if(!Cy(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=tg(r.children);e.push(new po(r.value,o))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function p(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function T(n){return n.resolve||{}}function Ye(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nt(n){return Nn(e=>{const t=n(e);return t?(0,Mn.D)(t).pipe((0,bt.U)(()=>e)):ht(e)})}class Bl extends class Ui{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const pu=new g.OlP("ROUTES");class gu{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,bt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=l.create(e);return new rd(Li(d.injector.get(pu,void 0,g.XFs.Self|g.XFs.Optional)).map(Ph),d)}),ki(l=>{throw t._loader$=void 0,l}));return t._loader$=new qc(o,()=>new rr.x).pipe(Ei()),t._loader$}loadModuleFactory(e){return oi(e()).pipe((0,En.z)(t=>t instanceof g.YKP?ht(t):(0,Mn.D)(this.compiler.compileModuleAsync(t))))}}class Ty{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ko(n){throw n}function ad(n,e,t){return e.parse("/")}function ud(n,e){return ht(null)}const Wh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ld={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ti=(()=>{class n{constructor(t,r,o,l,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rr.x,this.errorHandler=Ko,this.malformedUriErrorHandler=ad,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ud,afterPreactivation:ud},this.urlHandlingStrategy=new Ty,this.routeReuseStrategy=new Bl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Tl(){return new Ae(new Se([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gu(d,m,H=>this.triggerEvent(new wl(H)),H=>this.triggerEvent(new ss(H))),this.routerState=va(this.currentUrlTree,this.rootComponentType),this.transitions=new Br({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(rs(o=>0!==o.id),(0,bt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Nn(o=>{let l=!1,d=!1;return ht(o).pipe((0,$r.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ng(m.source)&&(this.browserUrlTree=m.extractedUrl),ht(m).pipe(Nn(N=>{const H=this.transitions.getValue();return r.next(new is(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?Uo.E:Promise.resolve(N)}),function Uh(n,e,t,r){return Nn(o=>function wa(n,e,t,r,o){return new Vh(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,bt.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$r.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function R(n,e,t,r,o){return(0,En.z)(l=>function Iy(n,e,t,r,o="emptyOnly",l="legacy"){try{const d=new qh(n,e,t,r,o,l).recognize();return null===d?Gh(new Hh):ht(d)}catch(d){return Gh(d)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,bt.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$r.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Q,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new $o(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Q,source:ce,restoredState:Fe,extras:tt}=m,Ht=new is(H,this.serializeUrl(Q),ce,Fe);r.next(Ht);const Gt=va(Q,this.rootComponentType).snapshot;return ht(Object.assign(Object.assign({},m),{targetSnapshot:Gt,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},tt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Uo.E}),nt(m=>{const{targetSnapshot:w,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:Q}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!Q})}),(0,$r.b)(m=>{const w=new $p(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,bt.U)(m=>Object.assign(Object.assign({},m),{guards:Bh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Ey(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?ht(Object.assign(Object.assign({},t),{guardsResult:!0})):function eg(n,e,t,r){return(0,Mn.D)(n).pipe((0,En.z)(o=>function Ul(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?ht(l.map(m=>{const w=Vl(m,e,o);let C;if(function _0(n){return n&&Ea(n.canDeactivate)}(w))C=oi(w.canDeactivate(n,e,t,r));else{if(!Ea(w))throw new Error("Invalid CanDeactivate guard");C=oi(w(n,e,t,r))}return C.pipe(Ls())})).pipe(Wo()):ht(!0)}(o.component,o.route,t,e,r)),Ls(o=>!0!==o,!0))}(d,r,o,n).pipe((0,En.z)(m=>m&&function Zp(n){return"boolean"==typeof n}(m)?function yr(n,e,t,r){return(0,Mn.D)(e).pipe(Fs(o=>Gc(function $h(n,e){return null!==n&&e&&e(new Ii(n)),ht(!0)}(o.route.parent,r),function jh(n,e){return null!==n&&e&&e(new ya(n)),ht(!0)}(o.route,r),function yo(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(d=>function Jp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>vi(()=>ht(d.guards.map(w=>{const C=Vl(w,d.node,t);let M;if(function Rh(n){return n&&Ea(n.canActivateChild)}(C))M=oi(C.canActivateChild(r,n));else{if(!Ea(C))throw new Error("Invalid CanActivateChild guard");M=oi(C(r,n))}return M.pipe(Ls())})).pipe(Wo())));return ht(l).pipe(Wo())}(n,o.path,t),function wy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ht(!0);const o=r.map(l=>vi(()=>{const d=Vl(l,e,t);let m;if(function Mh(n){return n&&Ea(n.canActivate)}(d))m=oi(d.canActivate(e,n));else{if(!Ea(d))throw new Error("Invalid CanActivate guard");m=oi(d(e,n))}return m.pipe(Ls())}));return ht(o).pipe(Wo())}(n,o.route,t))),Ls(o=>!0!==o,!0))}(r,l,n,e):ht(m)),(0,bt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,$r.b)(m=>{if(hu(m.guardsResult)){const C=Us(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new El(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),rs(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),nt(m=>{if(m.guards.canActivateChecks.length)return ht(m).pipe((0,$r.b)(w=>{const C=new gr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Nn(w=>{let C=!1;return ht(w).pipe(function G(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ht(t);let l=0;return(0,Mn.D)(o).pipe(Fs(d=>function re(n,e,t,r){return function Ve(n,e,t,r){const o=Ye(n);if(0===o.length)return ht({});const l={};return(0,Mn.D)(o).pipe((0,En.z)(d=>function ft(n,e,t,r){const o=Vl(n,e,r);return oi(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,$r.b)(m=>{l[d]=m}))),zc(1),(0,En.z)(()=>Ye(l).length===o.length?ht(l):Uo.E))}(n._resolve,n,e,r).pipe((0,bt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),sy(n,t).resolve),null)))}(d.route,r,n,e)),(0,$r.b)(()=>l++),zc(1),(0,En.z)(d=>l===o.length?ht(t):Uo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$r.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,$r.b)(w=>{const C=new si(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),nt(m=>{const{targetSnapshot:w,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:Q}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!Q})}),(0,bt.U)(m=>{const w=function oy(n,e,t){const r=Ml(n,e._root,t?t._root:void 0);return new Qc(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,$r.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,bt.U)(r=>(new Wp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,$r.b)({next(){l=!0},complete(){l=!0}}),function jp(n){return(0,Cr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;l||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ki(m=>{if(d=!0,function Wc(n){return n&&n[Cl]}(m)){const w=hu(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new mn(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ng(o.source)};this.scheduleNavigation(M,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new vl(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Uo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const l={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Pl(t),this.config=t.map(Ph),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,M=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=l||null}return null!==N&&(N=this.removeEmptyProps(N)),function Bs(n,e,t,r,o){if(0===t.length)return qp(e.root,e.root,e.root,r,o);const l=function ly(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new uy(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return $n(l.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===d?(l.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,l]},[]);return new uy(t,e,r)}(t);if(l.toRoot())return qp(e.root,e.root,new Se([],{}),r,o);const d=function zp(n,e,t){if(n.isAbsolute)return new Th(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new Th(l,l===e.root,0)}const r=zo(n.commands[0])?0:1;return function cy(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Th(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),m=d.processChildren?js(d.segmentGroup,d.index,l.commands):hy(d.segmentGroup,d.index,l.commands);return qp(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=hu(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Zh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Wh):!1===r?Object.assign({},ld):r,hu(t))return uu(this.currentUrlTree,t,o);const l=this.parseUrl(t);return uu(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new su(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,M,N;d?(C=d.resolve,M=d.reject,N=d.promise):N=new Promise((ce,Fe)=>{C=ce,M=Fe});const H=++this.navigationId;let Q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Q=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Q=0,this.setTransition({id:H,targetPageId:Q,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:C,reject:M,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ce=>Promise.reject(ce))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new mn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ng(n){return"imperative"!==n}let Kh=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new rr.x,this.subscription=t.events.subscribe(l=>{l instanceof su&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,l,d){if(0!==t||r||o||l||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:cd(this.skipLocationChange),replaceUrl:cd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:cd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ti),g.Y36(qo),g.Y36(he))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function cd(n){return""===n||!!n}class xy{}class E0{preload(e,t){return ht(null)}}let w0=(()=>{class n{constructor(t,r,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new gu(o,r,w=>t.triggerEvent(new wl(w)),w=>t.triggerEvent(new ss(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(rs(t=>t instanceof su),Fs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,Mn.D)(o).pipe((0,Oi.J)(),(0,bt.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ht(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,En.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ti),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(xy))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),rg=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof is?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof su&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Dl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Dl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const as=new g.OlP("ROUTER_CONFIGURATION"),Ry=new g.OlP("ROUTER_FORROOT_GUARD"),I0=[ye,{provide:Ln,useClass:wn},{provide:Ti,useFactory:function Oy(n,e,t,r,o,l,d={},m,w){const C=new Ti(null,n,e,t,r,o,Li(l));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function C0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(M=>{var N,H;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(H=console.groupEnd)||void 0===H||H.call(console)}),C},deps:[Ln,Ol,ye,g.zs3,g.Sil,pu,as,[class zh{},new g.FiY],[class In{},new g.FiY]]},Ol,{provide:qo,useFactory:function ig(n){return n.routerState.root},deps:[Ti]},w0,E0,class My{preload(e,t){return t().pipe(ki(()=>ht(null)))}},{provide:as,useValue:{enableTracing:!1}}];function XI(){return new g.PXZ("Router",Ti)}let Ca=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[I0,Ny(t),{provide:Ry,useFactory:b0,deps:[[Ti,new g.FiY,new g.tp0]]},{provide:as,useValue:r||{}},{provide:he,useFactory:D0,deps:[de,[new g.tBr(Je),new g.FiY],as]},{provide:rg,useFactory:eD,deps:[Ti,za,as]},{provide:xy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:E0},{provide:g.PXZ,multi:!0,useFactory:XI},[dd,{provide:g.ip1,multi:!0,useFactory:T0,deps:[dd]},{provide:Py,useFactory:ky,deps:[dd]},{provide:g.tb,multi:!0,useExisting:Py}]]}}static forChild(t){return{ngModule:n,providers:[Ny(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ry,8),g.LFG(Ti,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function eD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new rg(n,e,t)}function D0(n,e,t={}){return t.useHash?new De(n,e):new ze(n,e)}function b0(n){return"guarded"}function Ny(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:pu,multi:!0,useValue:n}]}let dd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new rr.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),l=this.injector.get(Ti),d=this.injector.get(as);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?ht(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(as),o=this.injector.get(w0),l=this.injector.get(rg),d=this.injector.get(Ti),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),l.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function T0(n){return n.appInitializer.bind(n)}function ky(n){return n.bootstrapListener.bind(n)}const Py=new g.OlP("Router Initializer"),A0=new g.OlP("GETS_ALL_IMAGE_DTO");function S0(n,e){if(1&n&&(g.TgZ(0,"div",2),g._UZ(1,"img",3),g.qZA()),2&n){const t=e.$implicit;g.xp6(1),g.Q6J("src",t.src,g.LSH)("alt",t.alt)}}let tD=(()=>{class n{constructor(t){this._getsAllImageDto=t,this.image$=this._getsAllImageDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(A0))},n.\u0275cmp=g.Xpm({type:n,selectors:[["lib-images"]],decls:3,vars:3,consts:[[1,"row"],["class","col-4 ",4,"ngFor","ngForOf"],[1,"col-4"],[1,"img-fluid","images-on-homepage",3,"src","alt"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g.YNc(1,S0,2,2,"div",1),g.ALo(2,"async"),g.qZA()),2&t&&(g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,r.image$)))},directives:[Zn],pipes:[ja],encapsulation:2,changeDetection:0}),n})(),nD=(()=>{class n{onChangeClicked(){let t=document.getElementById("buttonOfChange");null!=t&&(t.style.display="block");let r=document.getElementById("changeToForm");null!=r&&(r.style.display="none")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home-page"]],decls:12,vars:0,consts:[[1,"container","container-fluid","p-4","m-4"],[1,"d-flex","justify-content-center","p-2"],[1,"fs-1","text","fw-bold"],[1,"fs-6","text","fw-light"],[1,"d-flex","justify-content-center","p-2","m-2"],["id","changeToForm","type","submit","data-bs-toggle","collapse","data-bs-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample","role","button","routerLink","/task-list",1,"border-0","btn","text-white",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"p",2),g._uU(3,"Get a clear view of the day ahead"),g.qZA()(),g.TgZ(4,"div",1)(5,"p",3),g._uU(6,"All your tasks that are due today will show up here."),g.qZA()(),g.TgZ(7,"div",4)(8,"a",5),g.NdJ("click",function(){return r.onChangeClicked()}),g._uU(9," Add Task "),g.qZA()()(),g.TgZ(10,"div"),g._UZ(11,"lib-images"),g.qZA())},directives:[Kh,tD],encapsulation:2,changeDetection:0}),n})(),og=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),mu=(()=>{class n extends og{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Ta=new g.OlP("NgValueAccessor"),N0={provide:Ta,useExisting:(0,g.Gpc)(()=>Bi),multi:!0},iD=new g.OlP("CompositionEventMode");let Bi=(()=>{class n extends og{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rD(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(iD,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[g._Bn([N0]),g.qOj]}),n})();const li=new g.OlP("NgValidators"),_u=new g.OlP("NgAsyncValidators");function $s(n){return null!=n}function $y(n){const e=(0,g.QGY)(n)?(0,Mn.D)(n):n;return(0,g.CqO)(e),e}function F0(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ag(n,e){return e.map(t=>t(n))}function ug(n){return n.map(e=>function Aa(n){return!n.validate}(e)?e:t=>e.validate(t))}function Yh(n){return null!=n?function Hy(n){if(!n)return null;const e=n.filter($s);return 0==e.length?null:function(t){return F0(ag(t,e))}}(ug(n)):null}function lg(n){return null!=n?function oD(n){if(!n)return null;const e=n.filter($s);return 0==e.length?null:function(t){return function x0(...n){const e=(0,Rn.jO)(n),{args:t,keys:r}=_i(n),o=new jr.y(l=>{const{length:d}=t;if(!d)return void l.complete();const m=new Array(d);let w=d,C=d;for(let M=0;M<d;M++){let N=!1;(0,Vo.Xf)(t[M]).subscribe((0,Fn.x)(l,H=>{N||(N=!0,C--),m[M]=H},()=>w--,void 0,()=>{(!w||!N)&&(C||l.next(r?uo(r,m):m),l.complete())}))}});return e?o.pipe(Hc(e)):o}(ag(t,e).map($y)).pipe((0,bt.U)(F0))}}(ug(n)):null}function aD(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Qh(n){return n._rawValidators}function Jh(n){return n._rawAsyncValidators}function Xh(n){return n?Array.isArray(n)?n:[n]:[]}function hd(n,e){return Array.isArray(n)?n.includes(e):n===e}function cg(n,e){const t=Xh(e);return Xh(n).forEach(o=>{hd(t,o)||t.push(o)}),t}function uD(n,e){return Xh(e).filter(t=>!hd(n,t))}class L0{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Yh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vu extends L0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ai extends L0{get formDirective(){return null}get path(){return null}}class V0{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let U0=(()=>{class n extends V0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(vu,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),cD=(()=>{class n extends V0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ai,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function fd(n,e){zy(n,e),e.valueAccessor.writeValue(n.value),function B0(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&fg(n,e)})}(n,e),function pD(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&fg(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),_o(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function nf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zy(n,e){const t=Qh(n);null!==e.validator?n.setValidators(aD(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Jh(n);null!==e.asyncValidator?n.setAsyncValidators(aD(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();nf(e._rawValidators,o),nf(e._rawAsyncValidators,o)}function _o(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Qh(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(d=>d!==e.validator);l.length!==o.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const o=Jh(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(d=>d!==e.asyncValidator);l.length!==o.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return nf(e._rawValidators,r),nf(e._rawAsyncValidators,r),t}function fg(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Gl="VALID",af="INVALID",Sa="PENDING",uf="DISABLED";function H0(n){return(lf(n)?n.validators:n)||null}function Ky(n){return Array.isArray(n)?Yh(n):n||null}function gg(n,e){return(lf(e)?e.asyncValidators:n)||null}function G0(n){return Array.isArray(n)?lg(n):n||null}function lf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const q0=n=>n instanceof mg,Yy=n=>n instanceof Qy;function z0(n){return q0(n)?n.value:n.getRawValue()}function W0(n,e){const t=Yy(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function yD(n,e){Yy(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class Z0{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Ky(this._rawValidators),this._composedAsyncValidatorFn=G0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gl}get invalid(){return this.status===af}get pending(){return this.status==Sa}get disabled(){return this.status===uf}get enabled(){return this.status!==uf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Ky(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=G0(e)}addValidators(e){this.setValidators(cg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uD(e,this._rawAsyncValidators))}hasValidator(e){return hd(this._rawValidators,e)}hasAsyncValidator(e){return hd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Sa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uf,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gl,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gl||this.status===Sa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uf:Gl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Sa,this._hasOwnPendingAsyncValidator=!0;const t=$y(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function $0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Yy(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof _D)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?uf:this.errors?af:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sa)?Sa:this._anyControlsHaveStatus(af)?af:Gl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class mg extends Z0{constructor(e=null,t,r){super(H0(t),gg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lf(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Qy extends Z0{constructor(e,t,r){super(H0(t),gg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){yD(this,e),Object.keys(e).forEach(r=>{W0(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=z0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class _D extends Z0{constructor(e,t,r){super(H0(t),gg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){yD(this,e),e.forEach((r,o)=>{W0(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>z0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),n_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const r_=new g.OlP("NgModelWithFormControlWarning"),i_={provide:Ai,useExisting:(0,g.Gpc)(()=>_g)};let _g=(()=>{class n extends Ai{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_o(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return fd(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){pd(t.control||null,t,!1),pg(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Hl(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(pd(r||null,t),q0(o)&&(fd(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Wy(n,e){zy(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function gD(n,e){return _o(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zy(this.form,this),this._oldForm&&_o(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(li,10),g.Y36(_u,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([i_]),g.qOj,g.TTD]}),n})();const a_={provide:vu,useExisting:(0,g.Gpc)(()=>rE)};let rE=(()=>{class n extends vu{constructor(t,r,o,l,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Zy(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===Bi?t=l:function sf(n){return Object.getPrototypeOf(n.constructor)===mu}(l)?r=l:o=l}),o||r||t||null}(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function wu(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function hg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(Ai,13),g.Y36(li,10),g.Y36(_u,10),g.Y36(Ta,10),g.Y36(r_,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([a_]),g.qOj,g.TTD]}),n})(),Qo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[n_]]}),n})(),f_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:r_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Qo]}),n})(),pE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[ei,f_,Ca]]}),n})();var kD=k(4986),Hr=k(5813);function p_(){return(0,Cr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Fn.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}function sA(n,e){return n===e}var He,Hs=k(2011),PD=(k(820),k(3942)),_e=k(5861),_d=k(9681),vd=k(4859),Iu=k(1877),Ft=k(2090),mE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Du={},yE=yE||{},Tt=mE||self;function ff(){}function bg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ed(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var _E="closure_uid_"+(1e9*Math.random()>>>0),vE=0;function g_(n,e,t){return n.call.apply(n.bind,arguments)}function LD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function _r(n,e,t){return(_r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g_:LD).apply(null,arguments)}function Cg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Gr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function bu(){this.s=this.s,this.o=this.o}var UD={};bu.prototype.s=!1,bu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function FD(n){return Object.prototype.hasOwnProperty.call(n,_E)&&n[_E]||(n[_E]=++vE)}(this);delete UD[n]}},bu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const EE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},pf=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function wE(n){return Array.prototype.concat.apply([],arguments)}function ql(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Tg(n){return/^[\s\xa0]*$/.test(n)}var vr,IE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qr(n,e){return-1!=n.indexOf(e)}function Gs(n,e){return n<e?-1:n>e?1:0}e:{var zr=Tt.navigator;if(zr){var Cu=zr.userAgent;if(Cu){vr=Cu;break e}}vr=""}function Id(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ls(n){const e={};for(const t in n)e[t]=n[t];return e}var Ag="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zl(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<Ag.length;l++)t=Ag[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Tu(n){return Tu[" "](n),n}Tu[" "]=ff;var gf,n,bd=qr(vr,"Opera"),wo=qr(vr,"Trident")||qr(vr,"MSIE"),Wl=qr(vr,"Edge"),Au=Wl||wo,Zl=qr(vr,"Gecko")&&!(qr(vr.toLowerCase(),"webkit")&&!qr(vr,"Edge"))&&!(qr(vr,"Trident")||qr(vr,"MSIE"))&&!qr(vr,"Edge"),Cd=qr(vr.toLowerCase(),"webkit")&&!qr(vr,"Edge");function m_(){var n=Tt.document;return n?n.documentMode:void 0}e:{var Sg="",xg=(n=vr,Zl?/rv:([^\);]+)(\)|;)/.exec(n):Wl?/Edge\/([\d\.]+)/.exec(n):wo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Cd?/WebKit\/(\S+)/.exec(n):bd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xg&&(Sg=xg?xg[1]:""),wo){var Mg=m_();if(null!=Mg&&Mg>parseFloat(Sg)){gf=String(Mg);break e}}gf=Sg}var DE={};var BD=Tt.document&&wo&&(m_()||parseInt(gf,10))||void 0,CE=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",ff,e),Tt.removeEventListener("test",ff,e)}catch(t){}return n}();function ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function mf(n,e){if(ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Zl){e:{try{Tu(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:TE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&mf.Z.h.call(this)}}ci.prototype.h=function(){this.defaultPrevented=!0},Gr(mf,ci);var TE={2:"touch",3:"pen",4:"mouse"};mf.prototype.h=function(){mf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yf="closure_listenable_"+(1e6*Math.random()|0),jD=0;function AE(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++jD,this.ca=this.fa=!1}function Ng(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _f(n){this.src=n,this.g={},this.h=0}function __(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=EE(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(Ng(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function v_(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}_f.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=v_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new AE(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var SE="closure_lm_"+(1e6*Math.random()|0),E_={};function Og(n,e,t,r,o){if(r&&r.once)return HD(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Og(n,e[l],t,r,o);return null}return t=Su(t),n&&n[yf]?n.N(e,t,Ed(r)?!!r.capture:!!r,o):kg(n,e,t,!1,r,o)}function kg(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var d=Ed(o)?!!o.capture:!!o,m=NE(n);if(m||(n[SE]=m=new _f(n)),(t=m.add(e,t,r,d,l)).proxy)return t;if(r=function $D(){var e=RE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)CE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(ME(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function HD(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)HD(n,e[l],t,r,o);return null}return t=Su(t),n&&n[yf]?n.O(e,t,Ed(r)?!!r.capture:!!r,o):kg(n,e,t,!0,r,o)}function GD(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)GD(n,e[l],t,r,o);else r=Ed(r)?!!r.capture:!!r,t=Su(t),n&&n[yf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=v_(l=n.g[e],t,r,o))&&(Ng(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=NE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=v_(e,t,r,o)),(t=-1<n?e[n]:null)&&xE(t))}function xE(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[yf])__(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ME(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=NE(e))?(__(t,n),0==t.h&&(t.src=null,e[SE]=null)):Ng(n)}}}function ME(n){return n in E_?E_[n]:E_[n]="on"+n}function RE(n,e){if(n.ca)n=!0;else{e=new mf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&xE(n),n=t.call(r,e)}return n}function NE(n){return(n=n[SE])instanceof _f?n:null}var w_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Su(n){return"function"==typeof n?n:(n[w_]||(n[w_]=function(e){return n.handleEvent(e)}),n[w_])}function Sr(){bu.call(this),this.i=new _f(this),this.P=this,this.I=null}function xr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ci(e,n);else if(e instanceof ci)e.target=e.target||n;else{var o=e;zl(e=new ci(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];o=Pg(d,r,!0,e)&&o}if(o=Pg(d=e.g=n,r,!0,e)&&o,o=Pg(d,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=Pg(d=e.g=t[l],r,!1,e)&&o}function Pg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&__(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Gr(Sr,bu),Sr.prototype[yf]=!0,Sr.prototype.removeEventListener=function(n,e,t,r){GD(this,n,e,t,r)},Sr.prototype.M=function(){if(Sr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ng(t[r]);delete n.g[e],n.h--}}this.I=null},Sr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Sr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Fg=Tt.JSON.stringify;function Lg(){var n=OE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var b_,I_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zD,n=>n.reset());class zD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function WD(n){Tt.setTimeout(()=>{throw n},0)}function D_(n,e){b_||function ZD(){var n=Tt.Promise.resolve(void 0);b_=function(){n.then(kE)}}(),Vg||(b_(),Vg=!0),OE.add(n,e)}var Vg=!1,OE=new class qD{constructor(){this.h=this.g=null}add(e,t){const r=I_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function kE(){for(var n;n=Lg();){try{n.h.call(n.g)}catch(t){WD(t)}var e=I_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Vg=!1}function vf(n,e){Sr.call(this),this.h=n||1,this.g=e||Tt,this.j=_r(this.kb,this),this.l=Date.now()}function Ef(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function PE(n,e,t){if("function"==typeof n)t&&(n=_r(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_r(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function Ug(n){n.g=PE(()=>{n.g=null,n.i&&(n.i=!1,Ug(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Gr(vf,Sr),(He=vf.prototype).da=!1,He.S=null,He.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xr(this,"tick"),this.da&&(Ef(this),this.start()))}},He.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},He.M=function(){vf.Z.M.call(this),Ef(this),delete this.g};class KD extends bu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ug(this)}M(){super.M(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bg(n){bu.call(this),this.h=n,this.g={}}Gr(Bg,bu);var Td=[];function C_(n,e,t,r){Array.isArray(t)||(t&&(Td[0]=t.toString()),t=Td);for(var o=0;o<t.length;o++){var l=Og(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function jg(n){Id(n.g,function(e,t){this.g.hasOwnProperty(t)&&xE(e)},n),n.g={}}function Ad(){this.g=!0}function xa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function aA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<o.length;d++)o[d]=""}}}return Fg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Bg.prototype.M=function(){Bg.Z.M.call(this),jg(this)},Bg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ad.prototype.Aa=function(){this.g=!1},Ad.prototype.info=function(){};var Kl={},Hg=null;function Sd(){return Hg=Hg||new Sr}function A_(n){ci.call(this,Kl.Ma,n)}function xd(n){const e=Sd();xr(e,new A_(e,n))}function Gg(n,e){ci.call(this,Kl.STAT_EVENT,n),this.stat=e}function di(n){const e=Sd();xr(e,new Gg(e,n))}function S_(n,e){ci.call(this,Kl.Na,n),this.size=e}function Yl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}Kl.Ma="serverreachability",Gr(A_,ci),Kl.STAT_EVENT="statevent",Gr(Gg,ci),Kl.Na="timingevent",Gr(S_,ci);var wf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},FE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qg(){}function zg(){}qg.prototype.h=null;var N_,Md={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function M_(){ci.call(this,"d")}function R_(){ci.call(this,"c")}function If(){}function Ql(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Bg(this),this.P=LE,this.W=new vf(n=Au?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new O_}function O_(){this.i=null,this.g="",this.h=!1}Gr(M_,ci),Gr(R_,ci),Gr(If,qg),If.prototype.g=function(){return new XMLHttpRequest},If.prototype.i=function(){return{}},N_=new If;var LE=45e3,Wg={},Df={};function Zg(n,e,t){n.K=1,n.v=Nd(Ma(e)),n.s=t,n.U=!0,k_(n,null)}function k_(n,e){n.F=Date.now(),bf(n),n.A=Ma(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),jE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new O_,n.g=ow(n.l,t?e:null,!n.s),0<n.O&&(n.L=new KD(_r(n.Ia,n,n.g),n.O)),C_(n.V,n.g,"readystatechange",n.gb),e=n.H?ls(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),xd(1),function YD(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var d="",m=l.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var M=C[0];C=C[1];var N=M.split("_");d=2<=N.length&&"type"==N[1]?d+(M+"=")+C+"&":d+(M+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function P_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function F_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=uA(n,t),o==Df){4==e&&(n.o=4,di(14),r=!1),xa(n.j,n.m,null,"[Incomplete Response]");break}if(o==Wg){n.o=4,di(15),xa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xa(n.j,n.m,o,null),Kg(n,o)}P_(n)&&o!=Df&&o!=Wg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),iw(e),e.L=!0,di(11))):(xa(n.j,n.m,t,"[Invalid Chunked Response]"),Dn(n),Tf(n))}function uA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Df:(t=Number(e.substring(t,r)),isNaN(t)?Wg:(r+=1)+t>e.length?Df:(e=e.substr(r,t),n.C=r+t,e))}function bf(n){n.Y=Date.now()+n.P,VE(n,n.P)}function VE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yl(_r(n.eb,n),e)}function Cf(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function Tf(n){0==n.l.G||n.I||Z_(n.l,n)}function Dn(n){Cf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ef(n.W),jg(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Kg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Xg(t.i,n)))if(t.I=n.N,!n.J&&Xg(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Yl(_r(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;W_(t),Lf(t)}Ru(t),di(18)}if(1>=j_(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Fd(t,11)}else if((n.J||t.g==n)&&W_(t),!Tg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const M=C[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const ce=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var l=r.i;!l.g&&(qr(ce,"spdy")||qr(ce,"quic")||qr(ce,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Rf(l,l.h),l.h=null))}if(r.D){const Fe=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,bn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=sw(r,r.H?r.la:null,r.W),d.J){Nf(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(Cf(m),bf(m)),r.g=d}else rw(r);0<t.l.length&&Vf(t)}else"stop"!=C[0]&&"close"!=C[0]||Fd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Fd(t,7):rm(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}xd(4)}catch(C){}}function L_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(bg(n)||"string"==typeof n)pf(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(bg(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function QD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(bg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function Jl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Jl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function V_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];xu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)xu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function xu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(He=Ql.prototype).setTimeout=function(n){this.P=n},He.gb=function(n){n=n.target;const e=this.L;e&&3==Ra(n)?e.l():this.Ia(n)},He.Ia=function(n){try{if(n==this.g)e:{const M=Ra(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>M)&&(3!=M||Au||this.g&&(this.h.h||this.g.ga()||XE(this.g)))){this.I||4!=M||7==e||xd(8==e||0>=N?3:2),Cf(this);var t=this.g.ba();this.N=t;t:if(P_(this)){var r=XE(this.g);n="";var o=r.length,l=4==Ra(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Dn(this),Tf(this);var d="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function $g(n,e,t,r,o,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,di(12),Dn(this),Tf(this);break e}xa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kg(this,t)}this.U?(F_(this,M,d),Au&&this.i&&3==M&&(C_(this.V,this.W,"tick",this.fb),this.W.start())):(xa(this.j,this.m,d,null),Kg(this,d)),4==M&&Dn(this),this.i&&!this.I&&(4==M?Z_(this.l,this):(this.i=!1,bf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,di(12)):(this.o=0,di(13)),Dn(this),Tf(this)}}}catch(M){}},He.fb=function(){if(this.g){var n=Ra(this.g),e=this.g.ga();this.C<e.length&&(Cf(this),F_(this,n,e),this.i&&4!=n&&bf(this))}},He.cancel=function(){this.I=!0,Dn(this)},He.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function T_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xd(3),di(17)),Dn(this),this.o=2,Tf(this)):VE(this,this.Y-n)},(He=Jl.prototype).R=function(){V_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},He.T=function(){return V_(this),this.g.concat()},He.get=function(n,e){return xu(this.h,n)?this.h[n]:e},He.set=function(n,e){xu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},He.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var U_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Xl){this.g=void 0!==e?e:n.g,Af(this,n.j),this.s=n.s,Yg(this,n.i),Sf(this,n.m),this.l=n.l,e=n.h;var t=new Mf;t.i=e.i,e.g&&(t.g=new Jl(e.g),t.h=e.h),JD(this,t),this.o=n.o}else n&&(t=String(n).match(U_))?(this.g=!!e,Af(this,t[1]||"",!0),this.s=xf(t[2]||""),Yg(this,t[3]||"",!0),Sf(this,t[4]),this.l=xf(t[5]||"",!0),JD(this,t[6]||"",!0),this.o=xf(t[7]||"")):(this.g=!!e,this.h=new Mf(null,this.g))}function Ma(n){return new Xl(n)}function Af(n,e,t){n.j=t?xf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Yg(n,e,t){n.i=t?xf(e,!0):e}function Sf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function JD(n,e,t){e instanceof Mf?(n.h=e,function nb(n,e){e&&!n.j&&(Mu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Qg(this,r),jE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ji(e,eb)),n.h=new Mf(e,n.g))}function bn(n,e,t){n.h.set(e,t)}function Nd(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function xf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ji(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Io),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Io(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ji(e,qs,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ji(e,qs,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ji(t,"/"==t.charAt(0)?BE:UE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ji(t,tb)),n.join("")};var qs=/[#\/\?@]/g,UE=/[#\?:]/g,BE=/[#\?]/g,eb=/[#\?@]/g,tb=/#/g;function Mf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Mu(n){n.g||(n.g=new Jl,n.h=0,n.i&&function Rd(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qg(n,e){Mu(n),e=ec(n,e),xu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,xu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&V_(n)))}function Od(n,e){return Mu(n),e=ec(n,e),xu(n.g.h,e)}function jE(n,e,t){Qg(n,e),0<t.length&&(n.i=null,n.g.set(ec(n,e),ql(t)),n.h+=t.length)}function ec(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function B_(n){this.l=n||Jg,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ea&&Tt.g.Ea()&&Tt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(He=Mf.prototype).add=function(n,e){Mu(this),this.i=null,n=ec(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},He.forEach=function(n,e){Mu(this),this.g.forEach(function(t,r){pf(t,function(o){n.call(e,o,r,this)},this)},this)},He.T=function(){Mu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},He.R=function(n){Mu(this);var e=[];if("string"==typeof n)Od(this,n)&&(e=wE(e,this.g.get(ec(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=wE(e,n[t])}return e},He.set=function(n,e){return Mu(this),this.i=null,Od(this,n=ec(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},He.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},He.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=o;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var Jg=10;function HE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function j_(n){return n.h?1:n.g?n.g.size:0}function Xg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Rf(n,e){n.g?n.g.add(e):n.h=e}function Nf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ql(n.i)}function em(){}function GE(){this.g=new em}function qE(n,e,t){const r=t||"";try{L_(n,function(o,l){let d=o;Ed(o)&&(d=Fg(o)),e.push(r+l+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Of(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function kd(n){this.l=n.$b||null,this.j=n.ib||!1}function kf(n,e){Sr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=H_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}B_.prototype.cancel=function(){if(this.i=$_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},em.prototype.stringify=function(n){return Tt.JSON.stringify(n,void 0)},em.prototype.parse=function(n){return Tt.JSON.parse(n,void 0)},Gr(kd,qg),kd.prototype.g=function(){return new kf(this.l,this.j)},kd.prototype.i=function(n){return function(){return n}}({}),Gr(kf,Sr);var H_=0;function WE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Pf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ff(n)}function Ff(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(He=kf.prototype).open=function(n,e){if(this.readyState!=H_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ff(this)},He.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pf(this)),this.readyState=H_},He.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ff(this)),this.g&&(this.readyState=3,Ff(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Tt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},He.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pf(this):Ff(this),3==this.readyState&&WE(this)}},He.Ua=function(n){this.g&&(this.response=this.responseText=n,Pf(this))},He.Ta=function(n){this.g&&(this.response=n,Pf(this))},He.ha=function(){this.g&&Pf(this)},He.setRequestHeader=function(n,e){this.v.append(n,e)},He.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},He.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(kf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rb=Tt.JSON.parse;function ir(n){Sr.call(this),this.headers=new Jl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ZE,this.K=this.L=!1}Gr(ir,Sr);var ZE="",ib=/^https?$/i,sb=["POST","PUT"];function ab(n){return"content-type"==n.toLowerCase()}function KE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,YE(n),tm(n)}function YE(n){n.D||(n.D=!0,xr(n,"complete"),xr(n,"error"))}function QE(n){if(n.h&&void 0!==yE&&(!n.C[1]||4!=Ra(n)||2!=n.ba()))if(n.v&&4==Ra(n))PE(n.Fa,0,n);else if(xr(n,"readystatechange"),4==Ra(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(U_)[1]||null;if(!o&&Tt.self&&Tt.self.location){var l=Tt.self.location.protocol;o=l.substr(0,l.length-1)}r=!ib.test(o?o.toLowerCase():"")}t=r}if(t)xr(n,"complete"),xr(n,"success");else{n.m=6;try{var d=2<Ra(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",YE(n)}}finally{tm(n)}}}function tm(n,e){if(n.g){JE(n);const t=n.g,r=n.C[0]?ff:null;n.g=null,n.C=null,e||xr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function JE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function Ra(n){return n.g?n.g.readyState:0}function XE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ZE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function ew(n){let e="";return Id(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function Pd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function G_(n){this.za=0,this.l=[],this.h=new Ad,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Pd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Pd("baseRetryDelayMs",5e3,n),this.$a=Pd("retryDelaySeedMs",1e4,n),this.Ya=Pd("forwardChannelMaxRetries",2,n),this.ra=Pd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new B_(n&&n.concurrentRequestLimit),this.Ca=new GE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function rm(n){if(q_(n),3==n.G){var e=n.V++,t=Ma(n.F);bn(t,"SID",n.J),bn(t,"RID",e),bn(t,"TYPE","terminate"),Do(n,t),(e=new Ql(n,n.h,e,void 0)).K=2,e.v=Nd(Ma(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(t=Tt.navigator.sendBeacon(e.v.toString(),"")),!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ow(e.l,null),e.g.ea(e.v)),e.F=Date.now(),bf(e)}pt(n)}function Lf(n){n.g&&(iw(n),n.g.cancel(),n.g=null)}function q_(n){Lf(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),W_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function im(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Vf(n)}function Vf(n){HE(n.i)||n.m||(n.m=!0,D_(n.Ha,n),n.C=0)}function z_(n,e){var t;t=e?e.m:n.V++;const r=Ma(n.F);bn(r,"SID",n.J),bn(r,"RID",t),bn(r,"AID",n.U),Do(n,r),n.o&&n.s&&nm(r,n.o,n.s),t=new Ql(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=nw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Rf(n.i,t),Zg(t,r,e)}function Do(n,e){n.j&&L_({},function(t,r){bn(e,r,t)})}function nw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?_r(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=o[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const M=o[w].g;if(C-=l,0>C)l=Math.max(0,o[w].h-100),m=!1;else try{qE(M,d,"req"+C+"_")}catch(N){r&&r(M)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function rw(n){n.g||n.u||(n.Y=1,D_(n.Ga,n),n.A=0)}function Ru(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Yl(_r(n.Ga,n),K_(n,n.A)),n.A++,0))}function iw(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function sm(n){n.g=new Ql(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ma(n.oa);bn(e,"RID","rpc"),bn(e,"SID",n.J),bn(e,"CI",n.N?"0":"1"),bn(e,"AID",n.U),Do(n,e),bn(e,"TYPE","xmlhttp"),n.o&&n.s&&nm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Nd(Ma(e)),t.s=null,t.U=!0,k_(t,n)}function W_(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function Z_(n,e){var t=null;if(n.g==e){W_(n),iw(n),n.g=null;var r=2}else{if(!Xg(n.i,e))return;t=e.D,Nf(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;xr(r=Sd(),new S_(r,t,e,o)),Vf(n)}else rw(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function tw(n,e){return!(j_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Yl(_r(n.Ha,n,e),K_(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ru(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Fd(n,5);break;case 4:Fd(n,10);break;case 3:Fd(n,6);break;default:Fd(n,2)}}function K_(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Fd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=_r(n.jb,n);t||(t=new Xl("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||Af(t,"https"),Nd(t)),function zE(n,e){const t=new Ad;if(Tt.Image){const r=new Image;r.onload=Cg(Of,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Cg(Of,t,r,"TestLoadImage: error",!1,e),r.onabort=Cg(Of,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cg(Of,t,r,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else di(2);n.G=0,n.j&&n.j.va(e),pt(n),q_(n)}function pt(n){n.G=0,n.I=-1,n.j&&((0!=$_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ql(n.l),n.l.length=0),n.j.ua())}function sw(n,e,t){let r=function Jo(n){return n instanceof Xl?Ma(n):new Xl(n,void 0)}(t);if(""!=r.i)e&&Yg(r,e+"."+r.i),Sf(r,r.m);else{const o=Tt.location;r=function XD(n,e,t,r){var o=new Xl(null,void 0);return n&&Af(o,n),e&&Yg(o,e),t&&Sf(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Id(n.aa,function(o,l){bn(r,l,o)}),t=n.sa,(e=n.D)&&t&&bn(r,e,t),bn(r,"VER",n.ma),Do(n,r),r}function ow(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Ba&&!n.qa?new kd({ib:!0}):n.qa)).L=n.H,e}function aw(){}function tc(){if(wo&&!(10<=Number(BD)))throw Error("Environmental error: no available transport.")}function cs(n,e){Sr.call(this),this.g=new G_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Tg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new pn(this)}function Uf(n){M_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Bf(){R_.call(this),this.status=1}function pn(n){this.g=n}(He=ir.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():N_.g(),this.C=function x_(n){return n.h||(n.h=n.i())}(this.u?this.u:N_),this.g.onreadystatechange=_r(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void KE(this,l)}n=t||"";const o=new Jl(this.headers);r&&L_(r,function(l,d){o.set(d,l)}),r=function wd(n){e:{var e=ab;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Tt.FormData&&n instanceof Tt.FormData,!(0<=EE(sb,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{JE(this),0<this.B&&((this.K=function ob(n){return wo&&function bE(){return function Dd(n){var e=DE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=IE(String(gf)).split("."),t=IE("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",l=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Gs(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Gs(0==o[2].length,0==l[2].length)||Gs(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_r(this.pa,this)):this.A=PE(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){KE(this,l)}},He.pa=function(){void 0!==yE&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xr(this,"timeout"),this.abort(8))},He.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,xr(this,"complete"),xr(this,"abort"),tm(this))},He.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tm(this,!0)),ir.Z.M.call(this)},He.Fa=function(){this.s||(this.F||this.v||this.l?QE(this):this.cb())},He.cb=function(){QE(this)},He.ba=function(){try{return 2<Ra(this)?this.g.status:-1}catch(n){return-1}},He.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},He.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rb(e)}},He.Da=function(){return this.m},He.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(He=G_.prototype).ma=8,He.G=1,He.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},He.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Ql(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=ls(l),zl(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=nw(this,o,e),bn(t=Ma(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),Do(this,t),this.o&&l&&nm(t,this.o,l),Rf(this.i,o),this.Ra&&bn(t,"TYPE","init"),this.ja?(bn(t,"$req",e),bn(t,"SID","null"),o.$=!0,Zg(o,t,null)):Zg(o,t,e),this.G=2}}else 3==this.G&&(n?z_(this,n):0==this.l.length||HE(this.i)||z_(this))},He.Ga=function(){if(this.u=null,sm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Yl(_r(this.bb,this),n)}},He.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,di(10),Lf(this),sm(this))},He.ab=function(){null!=this.v&&(this.v=null,Lf(this),Ru(this),di(19))},He.jb=function(n){n?(this.h.info("Successfully pinged google.com"),di(2)):(this.h.info("Failed to ping google.com"),di(1))},(He=aw.prototype).xa=function(){},He.wa=function(){},He.va=function(){},He.ua=function(){},He.Oa=function(){},tc.prototype.g=function(n,e){return new cs(n,e)},Gr(cs,Sr),cs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),D_(_r(n.hb,n,e))),di(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=sw(n,null,n.W),Vf(n)},cs.prototype.close=function(){rm(this.g)},cs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,im(this.g,e)}else this.v?((e={}).__data__=Fg(n),im(this.g,e)):im(this.g,n)},cs.prototype.M=function(){this.g.j=null,delete this.j,rm(this.g),delete this.g,cs.Z.M.call(this)},Gr(Uf,M_),Gr(Bf,R_),Gr(pn,aw),pn.prototype.xa=function(){xr(this.g,"a")},pn.prototype.wa=function(n){xr(this.g,new Uf(n))},pn.prototype.va=function(n){xr(this.g,new Bf(n))},pn.prototype.ua=function(){xr(this.g,"b")},tc.prototype.createWebChannel=tc.prototype.g,cs.prototype.send=cs.prototype.u,cs.prototype.open=cs.prototype.m,cs.prototype.close=cs.prototype.close,wf.NO_ERROR=0,wf.TIMEOUT=8,wf.HTTP_ERROR=6,FE.COMPLETE="complete",zg.EventType=Md,Md.OPEN="a",Md.CLOSE="b",Md.ERROR="c",Md.MESSAGE="d",Sr.prototype.listen=Sr.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.La,ir.prototype.getLastErrorCode=ir.prototype.Da,ir.prototype.getStatus=ir.prototype.ba,ir.prototype.getResponseJson=ir.prototype.Qa,ir.prototype.getResponseText=ir.prototype.ga,ir.prototype.send=ir.prototype.ea;var lA=Du.createWebChannelTransport=function(){return new tc},uw=Du.getStatEventTarget=function(){return Sd()},Y_=Du.ErrorCode=wf,ub=Du.EventType=FE,lw=Du.Event=Kl,Q_=Du.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cw=Du.FetchXmlHttpFactory=kd,jf=Du.WebChannel=zg,lb=Du.XhrIo=ir;const dw="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let Xo="9.6.11";const Nu=new Iu.Yd("@firebase/firestore");function J_(){return Nu.logLevel}function Re(n,...e){if(Nu.logLevel<=Iu.in.DEBUG){const t=e.map(om);Nu.debug(`Firestore (${Xo}): ${n}`,...t)}}function Kn(n,...e){if(Nu.logLevel<=Iu.in.ERROR){const t=e.map(om);Nu.error(`Firestore (${Xo}): ${n}`,...t)}}function Ld(n,...e){if(Nu.logLevel<=Iu.in.WARN){const t=e.map(om);Nu.warn(`Firestore (${Xo}): ${n}`,...t)}}function om(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+n;throw Kn(e),new Error(e)}function mt(n,e){n||Xe()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Ft.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class X_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class db{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fw{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Er,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,_e.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},w=C=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Er)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new X_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new Wr(e)}}class hb{constructor(e,t,r){this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class fb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new hb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?o(l):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.p=t.token,new pb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function pw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}zs.A=-1;class Hf{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=pw(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function Vd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function ev(n){return n+"\0"}class Cn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Cn.fromMillis(Date.now())}static fromDate(e){return Cn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Cn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Cn(0,0))}static max(){return new _t(new Cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function gw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Gf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends Gf{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const gb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Gf{construct(e,t,r){return new Mr(e,t,r)}static isValidIdentifier(e){return gb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(l(),o++)}if(l(),d)throw new xe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class bo{constructor(e){this.fields=e,e.sort(Mr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new sr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const yb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(n){if(mt(!!n),"string"==typeof n){let e=0;const t=yb.exec(n);if(mt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ou(n){return"string"==typeof n?sr.fromBase64String(n):sr.fromUint8Array(n)}function tv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function am(n){const e=n.mapValue.fields.__previous_value__;return tv(e)?am(e):e}function qf(n){const e=Na(n.mapValue.fields.__local_write_time__.timestampValue);return new Cn(e.seconds,e.nanos)}class yw{constructor(e,t,r,o,l,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class ea{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}function rc(n){return null==n}function zf(n){return 0===n&&1/n==-1/0}function _w(n){return"number"==typeof n&&Number.isInteger(n)&&!zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(zt.fromString(e))}static fromName(e){return new Be(zt.fromString(e).popFirst(5))}static empty(){return new Be(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new zt(e.slice()))}}const vw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nv={nullValue:"NULL_VALUE"};function ic(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tv(n)?4:Dw(n)?9:10:Xe()}function ta(n,e){if(n===e)return!0;const t=ic(n);if(t!==ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qf(n).isEqual(qf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Na(r.timestampValue),d=Na(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ou(n.bytesValue).isEqual(Ou(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Hn(r.geoPointValue.latitude)===Hn(o.geoPointValue.latitude)&&Hn(r.geoPointValue.longitude)===Hn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Hn(r.integerValue)===Hn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Hn(r.doubleValue),d=Hn(o.doubleValue);return l===d?zf(l)===zf(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return Vd(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:return function(r,o){const l=r.mapValue.fields||{},d=o.mapValue.fields||{};if(gw(l)!==gw(d))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===d[m]||!ta(l[m],d[m])))return!1;return!0}(n,e);default:return Xe()}var o}function Wf(n,e){return void 0!==(n.values||[]).find(t=>ta(t,e))}function ku(n,e){if(n===e)return 0;const t=ic(n),r=ic(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(o,l){const d=Hn(o.integerValue||o.doubleValue),m=Hn(l.integerValue||l.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Ew(n.timestampValue,e.timestampValue);case 4:return Ew(qf(n),qf(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(o,l){const d=Ou(o),m=Ou(l);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),m=l.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=Rt(d[w],m[w]);if(0!==C)return C}return Rt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const d=Rt(Hn(o.latitude),Hn(l.latitude));return 0!==d?d:Rt(Hn(o.longitude),Hn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const d=o.values||[],m=l.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=ku(d[w],m[w]);if(C)return C}return Rt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const d=o.fields||{},m=Object.keys(d),w=l.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let M=0;M<m.length&&M<C.length;++M){const N=Rt(m[M],C[M]);if(0!==N)return N;const H=ku(d[m[M]],w[C[M]]);if(0!==H)return H}return Rt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function Ew(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=Na(n),r=Na(e),o=Rt(t.seconds,r.seconds);return 0!==o?o:Rt(t.nanos,r.nanos)}function Ud(n){return rv(n)}function rv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Na(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ou(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const d of r.values||[])l?l=!1:o+=",",o+=rv(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const m of o)d?d=!1:l+=",",l+=`${m}:${rv(r.fields[m])}`;return l+"}"}(n.mapValue):Xe();var e}function sc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function um(n){return!!n&&"integerValue"in n}function Bd(n){return!!n&&"arrayValue"in n}function ww(n){return!!n&&"nullValue"in n}function Iw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zf(n){return!!n&&"mapValue"in n}function Kf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Dw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _b(n){return"nullValue"in n?nv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sc(ea.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function iv(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sc(ea.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vw:Xe()}function lm(n,e){return void 0===n?e:void 0===e||ku(n,e)>0?n:e}function sv(n,e){return void 0===n?e:void 0===e||ku(n,e)<0?n:e}class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kf(t)}setAll(e){let t=Mr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Kf(d):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Zf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){nc(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Rr(Kf(this.value))}}function bw(n){const e=[];return nc(n.fields,(t,r)=>{const o=new Mr([t]);if(Zf(r)){const l=bw(r.mapValue).fields;if(0===l.length)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new bo(e)}class Tn{constructor(e,t,r,o,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,_t.min(),_t.min(),Rr.empty(),0)}static newFoundDocument(e,t,r){return new Tn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new Tn(e,2,t,_t.min(),Rr.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,_t.min(),Rr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jd{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function ov(n){return n.fields.find(e=>2===e.kind)}function Pu(n){return n.fields.filter(e=>2!==e.kind)}jd.UNKNOWN_ID=-1;class cm{constructor(e,t){this.fieldPath=e,this.kind=t}}class $d{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $d(0,Fu.min())}}function Cw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new Cn(t+1,0):new Cn(t,r));return new Fu(o,Be.empty(),e)}function Tw(n){return new Fu(n.readTime,n.key,-1)}class Fu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fu(_t.min(),Be.empty(),-1)}static max(){return new Fu(_t.max(),Be.empty(),-1)}}function vb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}class dm{constructor(e,t=null,r=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.P=null}}function Aw(n,e=null,t=[],r=[],o=null,l=null,d=null){return new dm(n,e,t,r,o,l,d)}function Ws(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Ud(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),rc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ud(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ud(r)).join(",")),e.P=t}return e.P}function Qf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Ib(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ta(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ow(n.startAt,e.startAt)&&Ow(n.endAt,e.endAt)}function av(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Jf(n,e){return n.filters.filter(t=>t instanceof Zr&&t.field.isEqual(e))}function Sw(n,e,t){let r,o=!0;for(const l of Jf(n,e)){let d,m=!0;switch(l.op){case"<":case"<=":d=_b(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,m=!1;break;case"!=":case"not-in":d=nv}lm(r,d)===d&&(r=d,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];lm(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function xw(n,e,t){let r,o=!0;for(const l of Jf(n,e)){let d,m=!0;switch(l.op){case">=":case">":d=iv(l.value),m=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,m=!1;break;case"!=":case"not-in":d=vw}sv(r,d)===d&&(r=d,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];sv(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Zr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Eb(e,t,r):"array-contains"===t?new fm(e,r):"in"===t?new Xf(e,r):"not-in"===t?new wb(e,r):"array-contains-any"===t?new Nw(e,r):new Zr(e,t,r)}static V(e,t,r){return"in"===t?new Mw(e,r):new Rw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ku(t,this.value)):null!==t&&ic(this.value)===ic(t)&&this.v(ku(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Eb extends Zr{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.v(t)}}class Mw extends Zr{constructor(e,t){super(e,"in",t),this.keys=hm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Rw extends Zr{constructor(e,t){super(e,"not-in",t),this.keys=hm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class fm extends Zr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bd(t)&&Wf(t.arrayValue,this.value)}}class Xf extends Zr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wf(this.value.arrayValue,t)}}class wb extends Zr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wf(this.value.arrayValue,t)}}class Nw extends Zr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wf(this.value.arrayValue,r))}}class Oa{constructor(e,t){this.position=e,this.inclusive=t}}class Hd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ib(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function pm(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(r=l.field.isKeyField()?Be.comparator(Be.fromName(d.referenceValue),t.key):ku(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function Ow(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}class Lu{constructor(e,t=null,r=[],o=[],l=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function kw(n,e,t,r,o,l,d,m){return new Lu(n,e,t,r,o,l,d,m)}function Gd(n){return new Lu(n)}function ka(n){return!rc(n.limit)&&"F"===n.limitType}function ep(n){return!rc(n.limit)&&"L"===n.limitType}function Vu(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Pw(n){for(const e of n.filters)if(e.S())return e.field;return null}function gm(n){return null!==n.collectionGroup}function qd(n){const e=qe(n);if(null===e.D){e.D=[];const t=Pw(e),r=Vu(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Hd(t)),e.D.push(new Hd(Mr.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Hd(Mr.keyField(),l))}}}return e.D}function Co(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=Aw(e.path,e.collectionGroup,qd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of qd(e))t.push(new Hd(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Oa(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Oa(e.startAt.position,!e.startAt.inclusive):null;e.C=Aw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function uv(n,e,t){return new Lu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mm(n,e){return Qf(Co(n),Co(e))&&n.limitType===e.limitType}function lv(n){return`${Ws(Co(n))}|lt:${n.limitType}`}function tp(n){return`Query(target=${function Yf(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ud(r.value)}`;var r}).join(", ")}]`),rc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ud(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ud(t)).join(",")),`Target(${e})`}(Co(n))}; limitType=${n.limitType})`}function cv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Be.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,d){const m=pm(o,l,d);return o.inclusive?m<=0:m<0}(t.startAt,qd(t),r)||t.endAt&&!function(o,l,d){const m=pm(o,l,d);return o.inclusive?m>=0:m>0}(t.endAt,qd(t),r)));var t,r}function Fw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Lw(n){return(e,t)=>{let r=!1;for(const o of qd(n)){const l=Db(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function Db(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(o,l,d){const m=l.data.field(o),w=d.data.field(o);return null!==m&&null!==w?ku(m,w):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function Vw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zf(e)?"-0":e}}function Uw(n){return{integerValue:""+n}}function Bw(n,e){return _w(e)?Uw(e):Vw(n,e)}class ym{constructor(){this._=void 0}}function bb(n,e,t){return n instanceof oc?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Uu?dv(n,e):n instanceof Bu?hv(n,e):function(r,o){const l=zd(r,o),d=jw(l)+jw(r.k);return um(l)&&um(r.k)?Uw(d):Vw(r.M,d)}(n,e)}function Cb(n,e,t){return n instanceof Uu?dv(n,e):n instanceof Bu?hv(n,e):t}function zd(n,e){return n instanceof ac?um(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class oc extends ym{}class Uu extends ym{constructor(e){super(),this.elements=e}}function dv(n,e){const t=fv(e);for(const r of n.elements)t.some(o=>ta(o,r))||t.push(r);return{arrayValue:{values:t}}}class Bu extends ym{constructor(e){super(),this.elements=e}}function hv(n,e){let t=fv(e);for(const r of n.elements)t=t.filter(o=>!ta(o,r));return{arrayValue:{values:t}}}class ac extends ym{constructor(e,t){super(),this.M=e,this.k=t}}function jw(n){return Hn(n.integerValue||n.doubleValue)}function fv(n){return Bd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wd{constructor(e,t){this.field=e,this.transform=t}}class Ab{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ju(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _m{}function pv(n,e,t){n instanceof np?function(r,o,l){const d=r.value.clone(),m=rp(r.fieldTransforms,o,l.transformResults);d.setAll(m),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof uc?function(r,o,l){if(!ju(r.precondition,o))return void o.convertToUnknownDocument(l.version);const d=rp(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll($w(r)),m.setAll(d),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Zs(n,e,t){var o;n instanceof np?function(r,o,l){if(!ju(r.precondition,o))return;const d=r.value.clone(),m=ip(r.fieldTransforms,l,o);d.setAll(m),o.convertToFoundDocument(Zd(o),d).setHasLocalMutations()}(n,e,t):n instanceof uc?function(r,o,l){if(!ju(r.precondition,o))return;const d=ip(r.fieldTransforms,l,o),m=o.data;m.setAll($w(r)),m.setAll(d),o.convertToFoundDocument(Zd(o),m).setHasLocalMutations()}(n,e,t):ju(n.precondition,o=e)&&o.convertToNoDocument(_t.min())}function Sb(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=zd(r.transform,o||null);null!=l&&(null==t&&(t=Rr.empty()),t.set(r.field,l))}return t||null}function vm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Vd(t,r,(o,l)=>function Tb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Uu&&r instanceof Uu||t instanceof Bu&&r instanceof Bu?Vd(t.elements,r.elements,ta):t instanceof ac&&r instanceof ac?ta(t.k,r.k):t instanceof oc&&r instanceof oc);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Zd(n){return n.isFoundDocument()?n.version:_t.min()}class np extends _m{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class uc extends _m{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function $w(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function rp(n,e,t){const r=new Map;mt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,m=e.data.field(l.field);r.set(l.field,Cb(d,m,t[o]))}return r}function ip(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,bb(l,d,e))}return r}class sp extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class gv extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Hw{constructor(e){this.count=e}}var Yn,$t;function mv(n){switch(n){default:return Xe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function Gw(n){if(void 0===n)return Kn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Yn.OK:return ae.OK;case Yn.CANCELLED:return ae.CANCELLED;case Yn.UNKNOWN:return ae.UNKNOWN;case Yn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Yn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Yn.INTERNAL:return ae.INTERNAL;case Yn.UNAVAILABLE:return ae.UNAVAILABLE;case Yn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Yn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Yn.NOT_FOUND:return ae.NOT_FOUND;case Yn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Yn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Yn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Yn.ABORTED:return ae.ABORTED;case Yn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Yn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Yn.DATA_LOSS:return ae.DATA_LOSS;default:return Xe()}}($t=Yn||(Yn={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";class $u{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){nc(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return mw(this.inner)}size(){return this.innerSize}}class ar{constructor(e,t){this.comparator=e,this.root=t||wr.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wr.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kd(this.root,e,this.comparator,!0)}}class Kd{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wr{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:wr.RED,this.left=null!=o?o:wr.EMPTY,this.right=null!=l?l:wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new wr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return wr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}wr.EMPTY=null,wr.RED=!0,wr.BLACK=!1,wr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new wr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Em(this.data.getIterator())}getIteratorFrom(e){return new Em(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class Em{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hu(n){return n.hasNext()?n.getNext():void 0}const xb=new ar(Be.comparator);function Ks(){return xb}const Mb=new ar(Be.comparator);function yv(){return Mb}function Yd(){return new $u(n=>n.toString(),(n,e)=>n.isEqual(e))}const _v=new ar(Be.comparator),qw=new yn(Be.comparator);function un(...n){let e=qw;for(const t of n)e=e.add(t);return e}const zw=new yn(Rt);function op(){return zw}class ap{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Qd.createSynthesizedTargetChangeForCurrentChange(e,t)),new ap(_t.min(),r,op(),Ks(),un())}}class Qd{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Qd(sr.EMPTY_BYTE_STRING,t,un(),un(),un())}}class up{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Ww{constructor(e,t){this.targetId=e,this.$=t}}class vv{constructor(e,t,r=sr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Zw{constructor(){this.B=0,this.L=Kw(),this.U=sr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=un(),t=un(),r=un();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new Qd(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Kw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Si{constructor(e){this.nt=e,this.st=new Map,this.it=Ks(),this.rt=lc(),this.ot=new yn(Rt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const l=o.target;if(av(l))if(0===r){const d=new Be(l.path);this.ct(t,d,Tn.newNoDocument(d,_t.min()))}else mt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,d)=>{const m=this.wt(d);if(m){if(l.current&&av(m.target)){const w=new Be(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,Tn.newNoDocument(w,e))}l.j&&(t.set(d,l.H()),l.J())}});let r=un();this.rt.forEach((l,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(e));const o=new ap(e,t,this.ot,this.it,r);return this.it=Ks(),this.rt=lc(),this.ot=new yn(Rt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Zw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new yn(Rt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Zw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function lc(){return new ar(Be.comparator)}function Kw(){return new ar(Be.comparator)}const Rb={asc:"ASCENDING",desc:"DESCENDING"},dA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class lp{constructor(e,t){this.databaseId=e,this.N=t}}function cp(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wm(n,e){return n.N?e.toBase64():e.toUint8Array()}function Nb(n,e){return cp(n,e.toTimestamp())}function Ir(n){return mt(!!n),_t.fromTimestamp(function(e){const t=Na(e);return new Cn(t.seconds,t.nanos)}(n))}function Ev(n,e){return(t=n,new zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Yw(n){const e=zt.fromString(n);return mt(nI(e)),e}function cc(n,e){return Ev(n.databaseId,e.path)}function To(n,e){const t=Yw(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(Ob(t))}function Im(n,e){return Ev(n.databaseId,e)}function dp(n){const e=Yw(n);return 4===e.length?zt.emptyPath():Ob(e)}function dc(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ob(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function wv(n,e,t){return{name:cc(n,e),fields:t.value.mapValue.fields}}function Qw(n,e,t){const r=To(n,e.name),o=Ir(e.updateTime),l=new Rr({mapValue:{fields:e.fields}}),d=Tn.newFoundDocument(r,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Jd(n,e){let t;if(e instanceof np)t={update:wv(n,e.key,e.value)};else if(e instanceof sp)t={delete:cc(n,e.key)};else if(e instanceof uc)t={update:wv(n,e.key,e.data),updateMask:tI(e.fieldMask)};else{if(!(e instanceof gv))return Xe();t={verify:cc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const d=l.transform;if(d instanceof oc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Uu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Bu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ac)return{fieldPath:l.field.canonicalString(),increment:d.k};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Nb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function Iv(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?or.updateTime(Ir(o.updateTime)):void 0!==o.exists?or.exists(o.exists):or.none():or.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,d){let m=null;"setToServerValue"in d?(mt("REQUEST_TIME"===d.setToServerValue),m=new oc):"appendMissingElements"in d?m=new Uu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Bu(d.removeAllFromArray.values||[]):"increment"in d?m=new ac(l,d.increment):Xe();const w=Mr.fromServerFormat(d.fieldPath);return new Wd(w,m)}(n,o)):[];var o;if(e.update){const o=To(n,e.update.name),l=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new bo((e.updateMask.fieldPaths||[]).map(C=>Mr.fromServerFormat(C)));return new uc(o,l,d,t,r)}return new np(o,l,t,r)}if(e.delete){const o=To(n,e.delete);return new sp(o,t)}if(e.verify){const o=To(n,e.verify);return new gv(o,t)}return Xe()}function bm(n,e){return{documents:[Im(n,e.path)]}}function kb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Im(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Im(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(M=>function(N){if("=="===N.op){if(Iw(N.value))return{unaryFilter:{field:hc(N.field),op:"IS_NAN"}};if(ww(N.value))return{unaryFilter:{field:hc(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Iw(N.value))return{unaryFilter:{field:hc(N.field),op:"IS_NOT_NAN"}};if(ww(N.value))return{unaryFilter:{field:hc(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hc(N.field),op:Fb(N.op),value:N.value}}}(M));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(w){if(0!==w.length)return w.map(C=>{return{field:hc((M=C).field),direction:eI(M.dir)};var M})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(C=e.limit,n.N||rc(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Xw(n){let e=dp(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){mt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let l=[];t.where&&(l=bv(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(M=>{return new Hd(fc((N=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(M){let N;return N="object"==typeof M?M.value:M,rc(N)?null:N}(t.limit));let w=null;var M;t.startAt&&(w=new Oa((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new Oa(M.values||[],!M.before)}(t.endAt)),kw(e,o,d,l,m,"F",w,C)}function bv(n){return n?void 0!==n.unaryFilter?[Vb(n)]:void 0!==n.fieldFilter?[Lb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>bv(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function eI(n){return Rb[n]}function Fb(n){return dA[n]}function hc(n){return{fieldPath:n.canonicalString()}}function fc(n){return Mr.fromServerFormat(n.fieldPath)}function Lb(n){return Zr.create(fc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function Vb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=fc(n.unaryFilter.field);return Zr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=fc(n.unaryFilter.field);return Zr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fc(n.unaryFilter.field);return Zr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fc(n.unaryFilter.field);return Zr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function tI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cv(e)),e=rI(n.get(t),e);return Cv(e)}function rI(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Cv(n){return n+"\x01\x01"}function Ao(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&Xe(),n.charAt(d+1)){case"\x01":const m=n.substring(l,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(l,d),o+="\0";break;case"\x11":o+=n.substring(l,d+1);break;default:Xe()}l=d+2}return new zt(r)}const iI=["userId","batchId"];function Cm(n,e){return[n,hi(e)]}function Ub(n,e,t){return[n,hi(e),t]}const sI={},hA=["prefixPath","collectionGroup","readTime","documentId"],fA=["prefixPath","collectionGroup","documentId"],pA=["collectionGroup","readTime","prefixPath","documentId"],gA=["canonicalId","targetId"],mA=["targetId","path"],yA=["path","targetId"],_A=["collectionId","parent"],vA=["indexId","uid"],Tm=["uid","sequenceNumber"],EA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oI=["indexId","uid","orderedDocumentKey"],Tv=["userId","collectionPath","documentId"],aI=["userId","collectionPath","largestBatchId"],uI=["userId","collectionGroup","largestBatchId"],Bb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Av=[...Bb,"documentOverlays"],Sv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jb=[...Sv,"indexConfiguration","indexState","indexEntries"],xv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $b{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let o=0,l=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++l,d&&l===o&&t()},w=>r(w))}),d=!0,l===o&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(o=>o?fe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class Am{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Er,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Sm(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Mv(r.target.error);this.At.reject(new Sm(e,o))}}static open(e,t,r,o){try{return new Am(t,e.transaction(o,r))}catch(l){throw new Sm(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wA(t)}}class ds{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===ds.Vt((0,Ft.z$)())&&Kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),pc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ft.hl)())return!1;if(ds.St())return!0;const e=(0,Ft.z$)(),t=ds.Vt(e),r=0<t&&t<10,o=ds.Dt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{o(new Sm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Sm(e,m))},l.onupgradeneeded=d=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,_e.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Nt(e);const w=Am.open(l.db,e,d?"readonly":"readwrite",r),C=o(w).next(M=>(w.Pt(),M)).catch(M=>(w.abort(M),fe.reject(M))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),l.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Hb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return pc(this.Ft.delete())}}class Sm extends xe{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xd(n){return"IndexedDbTransactionError"===n.name}class wA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pc(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),pc(this.store.add(e))}get(e){return pc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),pc(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),pc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.Kt(o,(d,m)=>{l.push(m)}).next(()=>l)}{const o=this.store.getAll(r.range);return new fe((l,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{l(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((o,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(l,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new fe((r,o)=>{t.onerror=l=>{const d=Mv(l.target.error);o(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((o,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new Hb(m),C=t(m.primaryKey,m.value,w);if(C instanceof fe){const M=C.catch(N=>(w.done(),fe.reject(N)));r.push(M)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pc(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Mv(r.target.error);t(o)}})}let lI=!1;function Mv(n){const e=ds.Vt((0,Ft.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lI||(lI=!0,setTimeout(()=>{throw r},0)),r}}return n}class Gb extends $b{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Nr(n,e){const t=qe(n);return ds.xt(t.Ht,e)}class hp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&pv(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Zs(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Zs(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Vd(this.mutations,e.mutations,(t,r)=>vm(t,r))&&Vd(this.baseMutations,e.baseMutations,(t,r)=>vm(t,r))}}class Rv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){mt(e.mutations.length===r.length);let o=_v;const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new Rv(e,t,r,o)}}class hs{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gu{constructor(e,t,r,o,l=_t.min(),d=_t.min(),m=sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Gu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class xm{constructor(e){this.Jt=e}}function cI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:eh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:cc(o=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:cp(o,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qu(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:qu(e.version)}}var o,l;return r}function eh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zu(n){const e=new Cn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function th(n,e){const t=(e.baseMutations||[]).map(l=>Iv(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Iv(n.Jt,l)),o=Cn.fromMillis(e.localWriteTimeMs);return new hp(e.batchId,o,t,r)}function nh(n){const e=zu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zu(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(mt(1===(o=n.query).documents.length),r=Co(Gd(dp(o.documents[0])))):r=Co(Xw(n.query)),new Gu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,sr.fromBase64String(n.resumeToken))}function dI(n,e){const t=qu(e.snapshotVersion),r=qu(e.lastLimboFreeSnapshotVersion);let o;o=av(e.target)?bm(n.Jt,e.target):kb(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ws(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Nv(n){const e=Xw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?uv(e,e.limit,"L"):e}function Ov(n,e){return new hs(e.largestBatchId,Iv(n.Jt,e.overlayMutation))}function Mm(n,e){const t=e.path.lastSegment();return[n,hi(e.path.popLast()),t]}class gc{getBundleMetadata(e,t){return kv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:zu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return kv(e).put({bundleId:(r=t).id,createTime:qu(Ir(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Pv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Nv(o.bundledQuery),readTime:zu(o.readTime)};var o})}saveNamedQuery(e,t){return Pv(e).put({name:(r=t).name,readTime:qu(Ir(r.readTime)),bundledQuery:r.bundledQuery});var r}}function kv(n){return Nr(n,"bundles")}function Pv(n){return Nr(n,"namedQueries")}class Fv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Fv(e,t.uid||"")}getOverlay(e,t){return Rm(e).get(Mm(this.userId,t)).next(r=>r?Ov(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((l,d)=>{const m=new hs(t,d);o.push(this.Xt(e,m))}),fe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(hi(d.getCollectionPath())));const l=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(Rm(e).Qt("collectionPathOverlayIndex",m))}),fe.waitFor(l)}getOverlaysForCollection(e,t,r){const o=Yd(),l=hi(t),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Rm(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=Ov(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=Yd();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rm(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,M)=>{const N=Ov(this.M,C);l.size()<o||N.largestBatchId===d?(l.set(N.getKey(),N),d=N.largestBatchId):M.done()}).next(()=>l)}Xt(e,t){return Rm(e).put(function(r,o,l){const[d,m,w]=Mm(o,l.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Jd(r.Jt,l.mutation)}}(this.M,this.userId,t))}}function Rm(n){return Nr(n,"documentOverlays")}class mc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),zf(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ou(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Dw(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xe()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Be.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function zb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function hI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=zb(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}mc.fe=new mc;class fI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=hI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=hI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Wb{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Zb{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Nm{constructor(){this.De=new fI,this.Ce=new Wb(this.De),this.xe=new Zb(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class na{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new na(this.indexId,this.documentKey,this.arrayValue,r)}}function Wu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=pI(n.arrayValue,e.arrayValue),0!==t?t:(t=pI(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function pI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Kb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=ov(e);if(void 0!==t&&!this.Be(t))return!1;const r=Pu(e);let o=0,l=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class gI{constructor(){this.qe=new fp}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getFieldIndex(e,t){return fe.resolve(null)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class fp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new yn(zt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new yn(zt.comparator)).toArray()}}const Zu=new Uint8Array(0);class mI{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new fp,this.Ge=new $u(r=>Ws(r),(r,o)=>Qf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const l={collectionId:r,parent:hi(o)};return yI(e).put(l)}return fe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[ev(t),""],!1,!0);return yI(e).qt(o).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(Ao(d.parent))}return r})}addFieldIndex(e,t){const r=pp(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=pp(e),o=Om(e),l=rh(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=rh(e);let o=!0;const l=new Map;return fe.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),l.set(d,m)})).next(()=>{if(o){let d=un();const m=[];return fe.forEach(l,(w,C)=>{var M;Re("IndexedDbIndexManager",`Using index ${M=w,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Wt=>`${Wt.fieldPath}:${Wt.kind}`).join(",")}`} to execute ${Ws(t)}`);const N=function(Wt,Ot){const qt=ov(Ot);if(void 0===qt)return null;for(const dn of Jf(Wt,qt.fieldPath))switch(dn.op){case"array-contains-any":return dn.value.arrayValue.values||[];case"array-contains":return[dn.value]}return null}(C,w),H=function(Wt,Ot){const qt=new Map;for(const dn of Pu(Ot))for(const Gi of Jf(Wt,dn.fieldPath))switch(Gi.op){case"==":case"in":qt.set(dn.fieldPath.canonicalString(),Gi.value);break;case"not-in":case"!=":return qt.set(dn.fieldPath.canonicalString(),Gi.value),Array.from(qt.values())}return null}(C,w),Q=function(Wt,Ot){const qt=[];let dn=!0;for(const Gi of Pu(Ot)){const Mp=0===Gi.kind?Sw(Wt,Gi.fieldPath,Wt.startAt):xw(Wt,Gi.fieldPath,Wt.startAt);if(!Mp.value)return null;qt.push(Mp.value),dn&&(dn=Mp.inclusive)}return new Oa(qt,dn)}(C,w),ce=function(Wt,Ot){const qt=[];let dn=!0;for(const Gi of Pu(Ot)){const Mp=0===Gi.kind?xw(Wt,Gi.fieldPath,Wt.endAt):Sw(Wt,Gi.fieldPath,Wt.endAt);if(!Mp.value)return null;qt.push(Mp.value),dn&&(dn=Mp.inclusive)}return new Oa(qt,dn)}(C,w),Fe=this.je(w,C,Q),tt=this.je(w,C,ce),Ht=this.We(w,C,H),Gt=this.ze(w.indexId,N,Fe,!!Q&&Q.inclusive,tt,!!ce&&ce.inclusive,Ht);return fe.forEach(Gt,Wt=>r.Gt(Wt,t.limit).next(Ot=>{Ot.forEach(qt=>{const dn=Be.fromSegments(qt.documentKey);d.has(dn)||(d=d.add(dn),m.push(dn))})}))}).next(()=>m)}return fe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,l,d,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),C=w/(null!=t?t.length:1),M=[];for(let N=0;N<w;++N){const H=t?this.He(t[N/C]):Zu,Q=r?this.Je(e,H,r[N%C],o):this.Ye(e),ce=l?this.Xe(e,H,l[N%C],d):this.Ye(e+1);M.push(...this.createRange(Q,ce,m.map(Fe=>this.Je(e,H,Fe,!0))))}return M}Je(e,t,r,o){const l=new na(e,Be.empty(),t,r);return o?l:l.ke()}Xe(e,t,r,o){const l=new na(e,Be.empty(),t,r);return o?l.ke():l}Ye(e){return new na(e,Be.empty(),Zu,Zu)}getFieldIndex(e,t){const r=new Kb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{const d=l.filter(m=>r.$e(m));return d.sort((m,w)=>w.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new Nm;for(const o of Pu(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const d=r.Ne(o.kind);mc.fe.Zt(l,d)}return r.Se()}He(e){const t=new Nm;return mc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Nm;return mc.fe.Zt(sc(this.databaseId,t),r.Ne(function(o){const l=Pu(o);return 0===l.length?0:l[l.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Nm);let l=0;for(const d of Pu(e)){const m=r[l++];for(const w of o)if(this.en(t,d.fieldPath)&&Bd(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);mc.fe.Zt(m,C)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],l=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Nm;w.seed(m.Se()),mc.fe.Zt(d,w.Ne(t.kind)),l.push(w)}return l}en(e,t){return!!e.filters.find(r=>r instanceof Zr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=pp(e),o=Om(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const d=[];return fe.forEach(l,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,M){const N=M?new $d(M.sequenceNumber,new Fu(zu(M.readTime),new Be(Ao(M.documentKey)),M.largestBatchId)):$d.empty(),H=C.fields.map(([Q,ce])=>new cm(Mr.fromServerFormat(Q),ce));return new jd(C.indexId,C.collectionGroup,H,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:Rt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=pp(e),l=Om(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>fe.forEach(m,w=>{return l.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:qu((H=r).readTime),documentKey:hi(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(o,l)=>{const d=r.get(o.collectionGroup);return(d?fe.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),fe.forEach(m,w=>this.on(e,o,w).next(C=>{const M=this.un(l,w);return C.isEqual(M)?fe.resolve():this.an(e,l,w,C,M)}))))})}cn(e,t,r,o){return rh(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return rh(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=rh(e);let l=new yn(Wu);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{l=l.add(new na(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}un(e,t){let r=new yn(Wu);const o=this.Ze(t,e);if(null==o)return r;const l=ov(t);if(null!=l){const d=e.data.field(l.fieldPath);if(Bd(d))for(const m of d.arrayValue.values||[])r=r.add(new na(t.indexId,e.key,this.He(m),o))}else r=r.add(new na(t.indexId,e.key,Zu,o));return r}an(e,t,r,o,l){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,M,N){const H=m.getIterator(),Q=w.getIterator();let ce=Hu(H),Fe=Hu(Q);for(;ce||Fe;){let tt=!1,Ht=!1;if(ce&&Fe){const Gt=C(ce,Fe);Gt<0?Ht=!0:Gt>0&&(tt=!0)}else null!=ce?Ht=!0:tt=!0;tt?(M(Fe),Fe=Hu(Q)):Ht?(N(ce),ce=Hu(H)):(ce=Hu(H),Fe=Hu(Q))}}(o,l,Wu,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),fe.waitFor(d)}rn(e){let t=1;return Om(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Wu(d,m)).filter((d,m,w)=>!m||0!==Wu(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=Wu(d,e),w=Wu(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const l=[];for(let d=0;d<o.length;d+=2)l.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Zu,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Zu,[]]));return l}}function yI(n){return Nr(n,"collectionParents")}function rh(n){return Nr(n,"indexEntries")}function pp(n){return Nr(n,"indexConfiguration")}function Om(n){return Nr(n,"indexState")}const _I={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fs(e,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yb(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(M,N,H)=>(m++,H.delete()));l.push(w.next(()=>{mt(1===m)}));const C=[];for(const M of t.mutations){const N=Ub(e,M.key.path,t.batchId);l.push(o.delete(N)),C.push(M.key)}return fe.waitFor(l).next(()=>C)}function gp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}fs.DEFAULT_COLLECTION_PERCENTILE=10,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fs.DEFAULT=new fs(41943040,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fs.DISABLED=new fs(-1,0,0);class Lv{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){mt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Lv(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ku(e).Wt({index:"userMutationsIndex",range:r},(o,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=mp(e),d=Ku(e);return d.add({}).next(m=>{mt("number"==typeof m);const w=new hp(m,t,r,o),C=function(H,Q,ce){const Fe=ce.baseMutations.map(Ht=>Jd(H.Jt,Ht)),tt=ce.mutations.map(Ht=>Jd(H.Jt,Ht));return{userId:Q,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Fe,mutations:tt}}(this.M,this.userId,w),M=[];let N=new yn((H,Q)=>Rt(H.canonicalString(),Q.canonicalString()));for(const H of o){const Q=Ub(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),M.push(d.put(C)),M.push(l.put(Q,sI))}return N.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),fe.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return Ku(e).get(t).next(r=>r?(mt(r.userId===this.userId),th(this.M,r)):null)}fn(e,t){return this.ln[t]?fe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Ku(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(mt(m.batchId>=r),l=th(this.M,m)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ku(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ku(e).qt("userMutationsIndex",t).next(r=>r.map(o=>th(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Cm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return mp(e).Wt({range:o},(d,m,w)=>{const[C,M,N]=d,H=Ao(M);if(C===this.userId&&t.path.isEqual(H))return Ku(e).get(N).next(Q=>{if(!Q)throw Xe();mt(Q.userId===this.userId),l.push(th(this.M,Q))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Rt);const o=[];return t.forEach(l=>{const d=Cm(this.userId,l.path),m=IDBKeyRange.lowerBound(d),w=mp(e).Wt({range:m},(C,M,N)=>{const[H,Q,ce]=C,Fe=Ao(Q);H===this.userId&&l.path.isEqual(Fe)?r=r.add(ce):N.done()});o.push(w)}),fe.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=Cm(this.userId,r),d=IDBKeyRange.lowerBound(l);let m=new yn(Rt);return mp(e).Wt({range:d},(w,C,M)=>{const[N,H,Q]=w,ce=Ao(H);N===this.userId&&r.isPrefixOf(ce)?ce.length===o&&(m=m.add(Q)):M.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Ku(e).get(l).next(d=>{if(null===d)throw Xe();mt(d.userId===this.userId),r.push(th(this.M,d))}))}),fe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Yb(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),fe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return mp(e).Wt({range:r},(l,d,m)=>{if(l[0]===this.userId){const w=Ao(l[1]);o.push(w)}else m.done()}).next(()=>{mt(0===o.length)})})}containsKey(e,t){return vI(e,this.userId,t)}wn(e){return Qb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vI(n,e,t){const r=Cm(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return mp(n).Wt({range:l,jt:!0},(m,w,C)=>{const[M,N,H]=m;M===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Ku(n){return Nr(n,"mutations")}function mp(n){return Nr(n,"documentMutations")}function Qb(n){return Nr(n,"mutationQueues")}class ih{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ih(0)}static yn(){return new ih(-1)}}class IA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new ih(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>_t.fromTimestamp(new Cn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yp(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return yp(e).Wt((d,m)=>{const w=nh(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,l.push(this.removeTargetData(e,w)))}).next(()=>fe.waitFor(l)).next(()=>o)}forEachTarget(e,t){return yp(e).Wt((r,o)=>{const l=nh(o);t(l)})}pn(e){return EI(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}In(e,t){return EI(e).put("targetGlobalKey",t)}Tn(e,t){return yp(e).put(dI(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ws(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return yp(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=nh(m);Qf(t,C.target)&&(l=C,w.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=So(e);return t.forEach(d=>{const m=hi(d.path);o.push(l.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),fe.waitFor(o)}removeMatchingKeys(e,t,r){const o=So(e);return fe.forEach(t,l=>{const d=hi(l.path);return fe.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=So(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=So(e);let l=un();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=Ao(d[1]),M=new Be(C);l=l.add(M)}).next(()=>l)}containsKey(e,t){const r=hi(t.path),o=IDBKeyRange.bound([r],[ev(r)],!1,!0);let l=0;return So(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(l++,C.done())}).next(()=>l>0)}Et(e,t){return yp(e).get(t).next(r=>r?nh(r):null)}}function yp(n){return Nr(n,"targets")}function EI(n){return Nr(n,"targetGlobal")}function So(n){return Nr(n,"targetDocuments")}function yc(n){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,_e.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==xv)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),Vv.apply(this,arguments)}function Uv([n,e],[t,r]){const o=Rt(n,t);return 0===o?Rt(e,r):o}class _c{constructor(e){this.An=e,this.buffer=new yn(Uv),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Uv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Xd(o)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield yc(o)}yield t.Sn(e)}))}}class Bv{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(zs.A);const r=new _c(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(_I)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_I):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,l,d,m,w,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),J_()<=Iu.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-M}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${l} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-M}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class jv{constructor(e,t){this.db=e,this.garbageCollector=new Bv(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return km(e,r)}removeReference(e,t,r){return km(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return km(e,t)}On(e,t){return function(r,o){let l=!1;return Qb(r).zt(d=>vI(r,d,o).next(m=>(m&&(l=!0),fe.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d,_t.min()),So(e).delete([0,hi(d.path)])))});o.push(w)}}).next(()=>fe.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return km(e,t)}Mn(e,t){const r=So(e);let o,l=zs.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(l!==zs.A&&t(new Be(Ao(o)),l),l=C,o=w):l=zs.A}).next(()=>{l!==zs.A&&t(new Be(Ao(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function km(n,e){return So(n).put((r=n.currentSequenceNumber,{targetId:0,path:hi(e.path),sequenceNumber:r}));var r}class Pm{constructor(){this.changes=new $u(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $v{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return sh(e).put(r)}removeEntry(e,t,r){return sh(e).delete(function(o,l){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],eh(l),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return sh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Lm(t))},(o,l)=>{r=this.$n(t,l)}).next(()=>r)}Bn(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return sh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Lm(t))},(o,l)=>{r={document:this.$n(t,l),size:gp(l)}}).next(()=>r)}getEntries(e,t){let r=Ks();return this.Ln(e,t,(o,l)=>{const d=this.$n(o,l);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Ks(),o=new ar(Be.comparator);return this.Ln(e,t,(l,d)=>{const m=this.$n(l,d);r=r.insert(l,m),o=o.insert(l,gp(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return fe.resolve();let o=new yn(Hv);t.forEach(w=>o=o.add(w));const l=IDBKeyRange.bound(Lm(o.first()),Lm(o.last())),d=o.getIterator();let m=d.getNext();return sh(e).Wt({index:"documentKeyIndex",range:l},(w,C,M)=>{const N=Be.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Hv(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?M.Ut(Lm(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),eh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sh(e).qt(IDBKeyRange.bound(o,l,!0)).next(d=>{let m=Ks();for(const w of d){const C=this.$n(Be.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let l=Ks();const d=Xb(t,r),m=Xb(t,Fu.max());return sh(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,M)=>{const N=this.$n(Be.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(N.key,N),l.size===o&&M.done()}).next(()=>l)}newChangeBuffer(e){return new Fm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Jb(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}Fn(e,t){return Jb(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function qb(n,e){let t;if(e.document)t=Qw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),o=zu(e.noDocument.readTime);t=Tn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=Be.fromSegments(e.unknownDocument.path),o=zu(e.unknownDocument.version);t=Tn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Cn(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Tn.newInvalidDocument(e)}}class Fm extends Pm{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new $u(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new yn((l,d)=>Rt(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const m=this.Gn.get(l);if(t.push(this.Kn.removeEntry(e,l,m.readTime)),d.isValidDocument()){const w=cI(this.Kn.M,d);o=o.add(l.path.popLast()),r+=gp(w)-m.size,t.push(this.Kn.addEntry(e,l,w))}else if(r-=m.size,this.trackRemovals){const w=cI(this.Kn.M,d.convertToNoDocument(_t.min()));t.push(this.Kn.addEntry(e,l,w))}}),o.forEach(l=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Kn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function Jb(n){return Nr(n,"remoteDocumentGlobal")}function sh(n){return Nr(n,"remoteDocumentsV14")}function Lm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xb(n,e){const t=e.documentKey.path.toArray();return[n,eh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hv(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=Rt(t[l],r[l]),o)return o;return o=Rt(t.length,r.length),o||(o=Rt(t[t.length-2],r[r.length-2]),o||Rt(t[t.length-1],r[r.length-1]))}class eC{constructor(e){this.M=e}kt(e,t,r,o){const l=new Am("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iI,{unique:!0}),m.createObjectStore("documentMutations"),II(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=fe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),II(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(l))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iI,{unique:!0});const M=w.store("mutations"),N=C.map(H=>M.put(H));return fe.waitFor(N)})}(e,l))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(l))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(l)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(l))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,l))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(l))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Tv});w.createIndex("collectionPathOverlayIndex",aI,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",uI,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:hA});w.createIndex("documentKeyIndex",fA),w.createIndex("collectionGroupIndex",pA)}(e)).next(()=>this.Jn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:vA}).createIndex("sequenceNumberIndex",Tm,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:EA}).createIndex("documentKeyIndex",oI,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=gp(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>fe.forEach(o,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>fe.forEach(m,w=>{mt(w.userId===l.userId);const C=th(this.M,w);return Yb(e,l.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.Wt((d,m)=>{const w=new zt(d),C=[0,hi(w)];l.push(t.get(C).next(M=>M?fe.resolve():t.put({targetId:0,path:hi(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>fe.waitFor(l))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:_A});const r=t.store("collectionParents"),o=new fp,l=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:hi(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new zt(d);return l(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const M=Ao(m);return l(M.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const l=nh(o),d=dI(this.M,l);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((l,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new Be(zt.fromString(C.document.name).popFirst(5)):C.noDocument?Be.fromSegments(C.noDocument.path):C.unknownDocument?Be.fromSegments(C.unknownDocument.path):Xe()).path.toArray();var C;const M={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(M))}).next(()=>fe.waitFor(o))}}function II(n){n.createObjectStore("targetDocuments",{keyPath:mA}).createIndex("documentTargetsIndex",yA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gA,{unique:!0}),n.createObjectStore("targetGlobal")}const Gv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qv{constructor(e,t,r,o,l,d,m,w,C,M,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=l,this.window=d,this.document=m,this.Xn=C,this.Zn=M,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=H=>Promise.resolve(),!qv.vt())throw new xe(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jv(this,o),this.hs=t+"main",this.M=new xm(w),this.ls=new ds(this.hs,this.ts,new eC(this.M)),this.fs=new IA(this.referenceDelegate,this.M),this.ds=new $v(this.M),this._s=new gc,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===M&&Kn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,Gv);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new zs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_p(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Xd(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return oh(e).get("owner").next(t=>fe.resolve(this.bs(t)))}Vs(e){return _p(e).delete(this.clientId)}vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Nr(r,"clientMetadata");return o.qt().next(l=>{const d=e.Ds(l,18e5),m=l.filter(w=>-1===d.indexOf(w));return fe.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?fe.resolve(!0):oh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,Gv);return!1}}return!(!this.networkEnabled||!this.inForeground)||_p(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Gb(t,zs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>_p(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Lv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new mI(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Fv.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=14===(d=this.ts)?jb:13===d?Sv:12===d?Av:11===d?Bb:void Xe();var d;let m;return this.ls.runTransaction(e,o,l,w=>(m=new Gb(w,this.es?this.es.next():zs.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw Kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(ae.FAILED_PRECONDITION,xv);return r(m)}).next(C=>this.Ps(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return oh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ae.FAILED_PRECONDITION,Gv)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oh(e).put("owner",t)}static vt(){return ds.vt()}Rs(e){const t=oh(e);return t.get("owner").next(r=>this.bs(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Kn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ft.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Kn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function oh(n){return Nr(n,"owner")}function _p(n){return Nr(n,"clientMetadata")}function Vm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class tC{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):gm(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Be(t)).next(r=>{let o=yv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let l=yv();return this.indexManager.getCollectionParents(e,o).next(d=>fe.forEach(d,m=>{const w=(C=t,M=m.child(o),new Lu(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.zs(e,w,r).next(C=>{C.forEach((M,N)=>{l=l.insert(M,N)})})}).next(()=>l))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(l=>(o=l,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const d of l)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=Tn.newInvalidDocument(w),o=o.insert(w,C)),Zs(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((l,d)=>{cv(t,d)||(o=o.remove(l))}),o))}}class zv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=un(),o=un();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new zv(e,t.fromCache,r,o)}}class Wv{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(_t.min())?this.ti(e,t):this.Zs.Ks(e,o).next(l=>{const d=this.ei(t,l);return(ka(t)||ep(t))&&this.ni(t.limitType,d,o,r)?this.ti(e,t):(J_()<=Iu.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tp(t)),this.Zs.Qs(e,t,Cw(r,-1)).next(m=>(d.forEach(w=>{m=m.insert(w.key,w)}),m)))});var l}ei(e,t){let r=new yn(Lw(e));return t.forEach((o,l)=>{cv(e,l)&&(r=r.add(l))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ti(e,t){return J_()<=Iu.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",tp(t)),this.Zs.Qs(e,t,Fu.min())}}class Zv{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new ar(Rt),this.ri=new $u(l=>Ws(l),Qf),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new tC(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function nC(n,e,t,r){return new Zv(n,e,t,r)}function Kv(n,e){return vp.apply(this,arguments)}function vp(){return vp=(0,_e.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(l=>(o=l,t.ai(e),t.Bs.getAllMutationBatches(r))).next(l=>{const d=[],m=[];let w=un();for(const C of o){d.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}for(const C of l){m.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}return t.ci.Ks(r,w).next(C=>({hi:C,removedBatchIds:d,addedBatchIds:m}))})})}),vp.apply(this,arguments)}function rC(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const M=w.batch,N=M.keys();let H=fe.resolve();return N.forEach(Q=>{H=H.next(()=>C.getEntry(m,Q)).next(ce=>{const Fe=w.docVersions.get(Q);mt(null!==Fe),ce.version.compareTo(Fe)<0&&(M.applyToRemoteDocument(ce,w),ce.isValidDocument()&&(ce.setReadTime(w.commitVersion),C.addEntry(ce)))})}),H.next(()=>d.Bs.removeMutationBatch(m,M))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function DI(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function DA(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((C,M)=>{const N=o.get(M);if(!N)return;m.push(t.fs.removeMatchingKeys(l,C.removedDocuments,M).next(()=>t.fs.addMatchingKeys(l,C.addedDocuments,M)));let H=N.withSequenceNumber(l.currentSequenceNumber);var Q,ce,Fe;e.targetMismatches.has(M)?H=H.withResumeToken(sr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):C.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(C.resumeToken,r)),o=o.insert(M,H),ce=H,Fe=C,(0===(Q=N).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(l,H))});let w=Ks();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,C))}),m.push(iC(l,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(_t.min())){const C=t.fs.getLastRemoteSnapshotVersion(l).next(M=>t.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(C)}return fe.waitFor(m).next(()=>d.apply(l)).next(()=>t.ci.Gs(l,w)).next(()=>w)}).then(l=>(t.ii=o,l))}function iC(n,e,t){let r=un();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Ks();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(d,m.readTime),l=l.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),l=l.insert(d,m)):Re("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),l})}function sC(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function ah(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(l=>l?(o=l,fe.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Gu(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Ep(n,e,t){return bI.apply(this,arguments)}function bI(){return bI=(0,_e.Z)(function*(n,e,t){const r=qe(n),o=r.ii.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Xd(d))throw d;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),bI.apply(this,arguments)}function Yv(n,e,t){const r=qe(n);let o=_t.min(),l=un();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const M=qe(m),N=M.ri.get(C);return void 0!==N?fe.resolve(M.ii.get(N)):M.fs.getTargetData(w,C)}(r,d,Co(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{l=w})}).next(()=>r.si.Qs(d,e,t?o:_t.min(),t?l:un())).next(m=>(CI(r,Fw(e),m),{documents:m,li:l})))}function oC(n,e){const t=qe(n),r=qe(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(d=>d?d.target:null))}function aC(n,e){const t=qe(n),r=t.oi.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,Cw(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(CI(t,e,o),o))}function CI(n,e,t){let r=_t.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(e,r)}function TI(){return TI=(0,_e.Z)(function*(n,e,t,r){const o=qe(n);let l=un(),d=Ks();for(const C of t){const M=e.fi(C.metadata.name);C.document&&(l=l.add(M));const N=e.di(C);N.setReadTime(e._i(C.metadata.readTime)),d=d.insert(M,N)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),w=yield ah(o,(C=r,Co(Gd(zt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>iC(C,m,d).next(M=>(m.apply(C),M)).next(M=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,l,w.targetId)).next(()=>o.ci.Gs(C,M)).next(()=>M)))}),TI.apply(this,arguments)}function CA(n,e){return AI.apply(this,arguments)}function AI(){return AI=(0,_e.Z)(function*(n,e,t=un()){const r=yield ah(n,Co(Nv(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const d=Ir(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(l,e);const m=r.withResumeToken(sr.EMPTY_BYTE_STRING,d);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(l,m).next(()=>o.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.fs.addMatchingKeys(l,t,r.targetId)).next(()=>o._s.saveNamedQuery(l,e))})}),AI.apply(this,arguments)}class i{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return fe.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Ir(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:Nv(r.bundledQuery),readTime:Ir(r.readTime)}),fe.resolve();var r}}class s{constructor(){this.overlays=new ar(Be.comparator),this.gi=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.Xt(e,t,l)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const o=Yd(),l=t.length+1,d=new Be(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&w.largestBatchId>r&&o.set(w.getKey(),w)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new ar((C,M)=>C-M);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let M=l.get(C.largestBatchId);null===M&&(M=Yd(),l=l.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const m=Yd(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,M)=>m.set(C,M)),!(m.size()>=o)););return fe.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new hs(t,r));let l=this.gi.get(t);void 0===l&&(l=un(),this.gi.set(t,l)),this.gi.set(t,l.add(r.key))}}class a{constructor(){this.yi=new yn(u.pi),this.Ii=new yn(u.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new u(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new u(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Be(new zt([])),r=new u(t,e),o=new u(t,e+1),l=[];return this.Ii.forEachInRange([r,o],d=>{this.Ai(d),l.push(d.key)}),l}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Be(new zt([])),r=new u(t,e),o=new u(t,e+1);let l=un();return this.Ii.forEachInRange([r,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new u(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class u{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Be.comparator(e.key,t.key)||Rt(e.vi,t.vi)}static Ti(e,t){return Rt(e.vi,t.vi)||Be.comparator(e.key,t.key)}}class c{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new yn(u.pi)}checkEmpty(e){return fe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const l=this.Si;this.Si++;const d=new hp(l,t,r,o);this.Bs.push(d);for(const m of o)this.Di=this.Di.add(new u(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return fe.resolve(d)}lookupMutationBatch(e,t){return fe.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),l=o<0?0:o;return fe.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return fe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new u(t,0),o=new u(t,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,o],d=>{const m=this.Ci(d.vi);l.push(m)}),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Rt);return t.forEach(o=>{const l=new u(o,0),d=new u(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,d],m=>{r=r.add(m.vi)})}),fe.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Be.isDocumentKey(l)||(l=l.child(""));const d=new u(new Be(l),0);let m=new yn(Rt);return this.Di.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.vi)),!0)},d),fe.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){mt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return fe.forEach(t.mutations,o=>{const l=new u(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new u(t,0),o=this.Di.firstAfterOrEqual(r);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return fe.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class f{constructor(e){this.Mi=e,this.docs=new ar(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Ks();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Tn.newInvalidDocument(o))}),fe.resolve(r)}getAllFromCollection(e,t,r){let o=Ks();const l=new Be(t.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||vb(Tw(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Xe()}Oi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _(this)}getSize(e){return fe.resolve(this.size)}}class _ extends Pm{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class E{constructor(e){this.persistence=e,this.Fi=new $u(t=>Ws(t),Qf),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.$i=0,this.Bi=new a,this.targetCount=0,this.Li=ih.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),fe.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new ih(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tn(t),fe.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Fi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),fe.waitFor(l).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.Bi.containsKey(t))}}class I{constructor(e,t){this.Ui={},this.overlays={},this.es=new zs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new E(this),this.indexManager=new gI,this.ds=new f(r=>this.referenceDelegate.qi(r)),this.M=new xm(t),this._s=new i(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new s,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new c(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new A(this.es.next());return this.referenceDelegate.Ki(),r(o).next(l=>this.referenceDelegate.Gi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Qi(e,t){return fe.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class A extends $b{constructor(e){super(),this.currentSequenceNumber=e}}class S{constructor(e){this.persistence=e,this.ji=new a,this.Wi=null}static zi(e){return new S(e)}get Hi(){if(this.Wi)return this.Wi;throw Xe()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Hi,r=>{const o=Be.fromPath(r);return this.Ji(e,o).next(l=>{l||t.removeEntry(o,_t.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return fe.or([()=>fe.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function P(n,e){return`firestore_clients_${n}_${e}`}function V(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function W(n,e){return`firestore_targets_${n}_${e}`}class me{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let l,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(l=new xe(o.error.code,o.error.message))),d?new me(e,t,o.state,l):(Kn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ne{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new xe(r.error.code,r.error.message))),l?new Ne(e,r.state,o):(Kn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ue{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=op();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=_w(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return o?new Ue(e,l):(Kn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Qe{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Qe(t.clientId,t.onlineState):(Kn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ie{constructor(){this.activeTargetIds=op()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ot{constructor(e,t,r,o,l){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new ar(Rt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=P(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Ie),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const l=e.getItem(P(e.persistenceKey,o));if(l){const d=Ue.Yi(o,l);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(W(this.persistenceKey,e));if(r){const o=Ne.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(W(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(l){let d=zs.A;if(null!=l)try{const m=JSON.parse(l);mt("number"==typeof m),d=m}catch(m){Kn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==zs.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.kr(l)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new me(this.currentUser,e,t,r),l=V(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Xi())}Ir(e){const t=V(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=W(this.persistenceKey,e),l=new Ne(e,t,r);this.setItem(o,l.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Ue.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return me.Yi(new Wr(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return Ne.Yi(o,t)}mr(e){return Qe.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),l=this.yr(r),d=[],m=[];return l.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{l.has(w)||m.push(w)}),this.syncEngine.Fr(d,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=op();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Bt{constructor(){this.$r=new Ie,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Ie,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ln{Lr(e){}shutdown(){}}class $i{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Qv{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Jv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,l){const d=this.uo(e,t);Re("RestConnection","Sending: ",d,r);const m={};return this.ao(m,o,l),this.co(e,d,m,r).then(w=>(Re("RestConnection","Received: ",w),w),w=>{throw Ld("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}ho(e,t,r,o,l){return this.oo(e,t,r,o,l)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}uo(e,t){return`${this.io}/v1/${t}:${vc[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((l,d)=>{const m=new lb;m.listenOnce(ub.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Y_.NO_ERROR:const C=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(C)),l(C);break;case Y_.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),d(new xe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Y_.HTTP_ERROR:const M=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const H=function(Q){const ce=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ce)>=0?ce:ae.UNKNOWN}(N.status);d(new xe(H,N.message))}else d(new xe(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ae.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=lA(),d=uw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new cw({})),this.ao(m.initMessageHeaders,t,r),(0,Ft.uI)()||(0,Ft.b$)()||(0,Ft.d)()||(0,Ft.w1)()||(0,Ft.Mn)()||(0,Ft.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Re("Connection","Creating WebChannel: "+w,m);const C=l.createWebChannel(w,m);let M=!1,N=!1;const H=new Qv({Wr:ce=>{N?Re("Connection","Not sending because WebChannel is closed:",ce):(M||(Re("Connection","Opening WebChannel transport."),C.open(),M=!0),Re("Connection","WebChannel sending:",ce),C.send(ce))},zr:()=>C.close()}),Q=(ce,Fe,tt)=>{ce.listen(Fe,Ht=>{try{tt(Ht)}catch(Gt){setTimeout(()=>{throw Gt},0)}})};return Q(C,jf.EventType.OPEN,()=>{N||Re("Connection","WebChannel transport opened.")}),Q(C,jf.EventType.CLOSE,()=>{N||(N=!0,Re("Connection","WebChannel transport closed"),H.no())}),Q(C,jf.EventType.ERROR,ce=>{N||(N=!0,Ld("Connection","WebChannel transport errored:",ce),H.no(new xe(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(C,jf.EventType.MESSAGE,ce=>{var Fe;if(!N){const tt=ce.data[0];mt(!!tt);const Ht=tt,Gt=Ht.error||(null===(Fe=Ht[0])||void 0===Fe?void 0:Fe.error);if(Gt){Re("Connection","WebChannel received error:",Gt);const Wt=Gt.status;let Ot=function(dn){const Gi=Yn[dn];if(void 0!==Gi)return Gw(Gi)}(Wt),qt=Gt.message;void 0===Ot&&(Ot=ae.INTERNAL,qt="Unknown error status: "+Wt+" with message "+Gt.message),N=!0,H.no(new xe(Ot,qt)),C.close()}else Re("Connection","WebChannel received:",tt),H.so(tt)}}),Q(d,lw.STAT_EVENT,ce=>{ce.stat===Q_.PROXY?Re("Connection","Detected buffering proxy"):ce.stat===Q_.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.eo()},0),H}}function Um(){return"undefined"!=typeof window?window:null}function uh(){return"undefined"!=typeof document?document:null}function Ec(n){return new lp(n,!0)}class wp{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class Bm{constructor(e,t,r,o,l,d,m,w){this.Yn=e,this.Ro=r,this.Po=o,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new wp(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,_e.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,_e.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new xe(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,_e.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xv extends Bm{constructor(e,t,r,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=l}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Dm(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Xe(),o=e.targetChange.targetIds||[],l=function(w,C){return w.N?(mt(void 0===C||"string"==typeof C),sr.fromBase64String(C||"")):(mt(void 0===C||C instanceof Uint8Array),sr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ae.UNKNOWN:Gw(w.code);return new xe(C,w.message||"")}(d);t=new vv(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=To(n,r.document.name),l=Ir(r.document.updateTime),d=new Rr({mapValue:{fields:r.document.fields}}),m=Tn.newFoundDocument(o,l,d);t=new up(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=To(n,r.document),l=r.readTime?Ir(r.readTime):_t.min(),d=Tn.newNoDocument(o,l);t=new up([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=To(n,r.document);t=new up([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,l=new Hw(r.count||0);t=new Ww(r.targetId,l)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return _t.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?_t.min():l.readTime?Ir(l.readTime):_t.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=dc(this.M),t.addTarget=function(o,l){let d;const m=l.target;return d=av(m)?{documents:bm(o,m)}:{query:kb(o,m)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=wm(o,l.resumeToken):l.snapshotVersion.compareTo(_t.min())>0&&(d.readTime=cp(o,l.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function Pb(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=dc(this.M),t.removeTarget=e,this.Fo(t)}}class e0 extends Bm{constructor(e,t,r,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Dv(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,o){let l=Ir(r.updateTime?r.updateTime:o);return l.isEqual(_t.min())&&(l=Ir(o)),new Ab(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.Yo(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=dc(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jd(this.M,r))};this.Fo(t)}}class qx extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.oo(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ae.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.ho(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ae.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class zx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Kn(t),this.iu=!1):Re("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Wx{constructor(e,t,r,o,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(m=>{r.enqueueAndForget((0,_e.Z)(function*(){var w;lh(d)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,_e.Z)(function*(C){const M=qe(C);M.fu.add(4),yield jm(M),M.wu.set("Unknown"),M.fu.delete(4),yield t0(M)}),function(C){return w.apply(this,arguments)})(d))}))}),this.wu=new zx(r,o)}}function t0(n){return uC.apply(this,arguments)}function uC(){return uC=(0,_e.Z)(function*(n){if(lh(n))for(const e of n.du)yield e(!0)}),uC.apply(this,arguments)}function jm(n){return lC.apply(this,arguments)}function lC(){return lC=(0,_e.Z)(function*(n){for(const e of n.du)yield e(!1)}),lC.apply(this,arguments)}function SI(n,e){const t=qe(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),hC(t)?dC(t):Hm(t).xo()&&cC(t,e))}function n0(n,e){const t=qe(n),r=Hm(t);t.lu.delete(e),r.xo()&&TA(t,e),0===t.lu.size&&(r.xo()?r.Mo():lh(t)&&t.wu.set("Unknown"))}function cC(n,e){n.mu.Z(e.targetId),Hm(n).jo(e)}function TA(n,e){n.mu.Z(e),Hm(n).Wo(e)}function dC(n){n.mu=new Si({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Hm(n).start(),n.wu.ru()}function hC(n){return lh(n)&&!Hm(n).Co()&&n.lu.size>0}function lh(n){return 0===qe(n).fu.size}function AA(n){n.mu=void 0}function Zx(n){return fC.apply(this,arguments)}function fC(){return fC=(0,_e.Z)(function*(n){n.lu.forEach((e,t)=>{cC(n,e)})}),fC.apply(this,arguments)}function Kx(n,e){return pC.apply(this,arguments)}function pC(){return pC=(0,_e.Z)(function*(n,e){AA(n),hC(n)?(n.wu.au(e),dC(n)):n.wu.set("Unknown")}),pC.apply(this,arguments)}function Yx(n,e,t){return gC.apply(this,arguments)}function gC(){return gC=(0,_e.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof vv&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,l){const d=l.cause;for(const m of l.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xI(n,r)}else if(e instanceof up?n.mu.ut(e):e instanceof Ww?n.mu._t(e):n.mu.ht(e),!t.isEqual(_t.min()))try{const r=yield DI(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const d=o.mu.yt(l);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.lu.get(w);C&&o.lu.set(w,C.withResumeToken(m.resumeToken,l))}}),d.targetMismatches.forEach(m=>{const w=o.lu.get(m);if(!w)return;o.lu.set(m,w.withResumeToken(sr.EMPTY_BYTE_STRING,w.snapshotVersion)),TA(o,m);const C=new Gu(w.target,m,1,w.sequenceNumber);cC(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield xI(n,r)}var r}),gC.apply(this,arguments)}function xI(n,e,t){return mC.apply(this,arguments)}function mC(){return mC=(0,_e.Z)(function*(n,e,t){if(!Xd(e))throw e;n.fu.add(1),yield jm(n),n.wu.set("Offline"),t||(t=()=>DI(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield t0(n)}))}),mC.apply(this,arguments)}function SA(n,e){return e().catch(t=>xI(n,t,e))}function $m(n){return yC.apply(this,arguments)}function yC(){return yC=(0,_e.Z)(function*(n){const e=qe(n),t=ch(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;Qx(e);)try{const o=yield sC(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,Jx(e,o)}catch(o){yield xI(e,o)}xA(e)&&MA(e)}),yC.apply(this,arguments)}function Qx(n){return lh(n)&&n.hu.length<10}function Jx(n,e){n.hu.push(e);const t=ch(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function xA(n){return lh(n)&&!ch(n).Co()&&n.hu.length>0}function MA(n){ch(n).start()}function Xx(n){return _C.apply(this,arguments)}function _C(){return _C=(0,_e.Z)(function*(n){ch(n).Zo()}),_C.apply(this,arguments)}function eM(n){return vC.apply(this,arguments)}function vC(){return vC=(0,_e.Z)(function*(n){const e=ch(n);for(const t of n.hu)e.Jo(t.mutations)}),vC.apply(this,arguments)}function tM(n,e,t){return EC.apply(this,arguments)}function EC(){return EC=(0,_e.Z)(function*(n,e,t){const r=n.hu.shift(),o=Rv.from(r,e,t);yield SA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield $m(n)}),EC.apply(this,arguments)}function nM(n,e){return wC.apply(this,arguments)}function wC(){return wC=(0,_e.Z)(function*(n,e){var t;e&&ch(n).Ho&&(yield(t=(0,_e.Z)(function*(r,o){if(mv(l=o.code)&&l!==ae.ABORTED){const d=r.hu.shift();ch(r).ko(),yield SA(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield $m(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),xA(n)&&MA(n)}),wC.apply(this,arguments)}function RA(n,e){return IC.apply(this,arguments)}function IC(){return IC=(0,_e.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=lh(t);t.fu.add(3),yield jm(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield t0(t)}),IC.apply(this,arguments)}function DC(n,e){return bC.apply(this,arguments)}function bC(){return bC=(0,_e.Z)(function*(n,e){const t=qe(n);e?(t.fu.delete(2),yield t0(t)):e||(t.fu.add(2),yield jm(t),t.wu.set("Unknown"))}),bC.apply(this,arguments)}function Hm(n){return n.gu||(n.gu=function(e,t,r){const o=qe(e);return o.eu(),new Xv(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Zx.bind(null,n),Yr:Kx.bind(null,n),Qo:Yx.bind(null,n)}),n.du.push(function(){var e=(0,_e.Z)(function*(t){t?(n.gu.ko(),hC(n)?dC(n):n.wu.set("Unknown")):(yield n.gu.stop(),AA(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function ch(n){return n.yu||(n.yu=function(e,t,r){const o=qe(e);return o.eu(),new e0(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Xx.bind(null,n),Yr:nM.bind(null,n),Xo:eM.bind(null,n),Yo:tM.bind(null,n)}),n.du.push(function(){var e=(0,_e.Z)(function*(t){t?(n.yu.ko(),yield $m(n)):(yield n.yu.stop(),n.hu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class CC{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,m=new CC(e,t,d,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(n,e){if(Kn("AsyncQueue",`${e}: ${n}`),Xd(n))return new xe(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class qm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=yv(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new qm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new qm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class NA{constructor(){this.pu=new ar(Be.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Xe():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class zm{constructor(e,t,r,o,l,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new zm(e,t,qm.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class rM{constructor(){this.Tu=void 0,this.listeners=[]}}class iM{constructor(){this.queries=new $u(e=>lv(e),mm),this.onlineState="Unknown",this.Eu=new Set}}function TC(n,e){return AC.apply(this,arguments)}function AC(){return AC=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new rM),o)try{l.Tu=yield t.onListen(r)}catch(d){const m=Gm(d,`Initialization of query '${tp(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Au(t.onlineState),l.Tu&&e.Ru(l.Tu)&&MC(t)}),AC.apply(this,arguments)}function SC(n,e){return xC.apply(this,arguments)}function xC(){return xC=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),xC.apply(this,arguments)}function sM(n,e){const t=qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Ru(o)&&(r=!0);d.Tu=o}}r&&MC(t)}function oM(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function MC(n){n.Eu.forEach(e=>{e.next()})}class RC{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new zm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=zm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class aM{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class OA{constructor(e){this.M=e}fi(e){return To(this.M,e)}di(e){return e.metadata.exists?Qw(this.M,e.document,!1):Tn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Ir(e)}}class uM{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kA(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new OA(this.M);for(const o of e)if(o.metadata.queries){const l=r.fi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||un()).add(l);t.set(d,m)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function bA(n,e,t,r){return TI.apply(this,arguments)}(e.localStore,new OA(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield CA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function kA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class PA{constructor(e){this.key=e}}class FA{constructor(e){this.key=e}}class LA{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=un(),this.mutatedKeys=un(),this.Uu=Lw(e),this.qu=new qm(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new NA,o=t?t.qu:this.qu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w=ka(this.query)&&o.size===this.query.limit?o.last():null,C=ep(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,N)=>{const H=o.get(M),Q=cv(this.query,N)?N:null,ce=!!H&&this.mutatedKeys.has(H.key),Fe=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let tt=!1;H&&Q?H.data.isEqual(Q.data)?ce!==Fe&&(r.track({type:3,doc:Q}),tt=!0):this.ju(H,Q)||(r.track({type:2,doc:Q}),tt=!0,(w&&this.Uu(Q,w)>0||C&&this.Uu(Q,C)<0)&&(m=!0)):!H&&Q?(r.track({type:0,doc:Q}),tt=!0):H&&!Q&&(r.track({type:1,doc:H}),tt=!0,(w||C)&&(m=!0)),tt&&(Q?(d=d.add(Q),l=Fe?l.add(M):l.delete(M)):(d=d.delete(M),l=l.delete(M)))}),ka(this.query)||ep(this.query))for(;d.size>this.query.limit;){const M=ka(this.query)?d.last():d.first();d=d.delete(M.key),l=l.delete(M.key),r.track({type:1,doc:M})}return{qu:d,Qu:r,ni:m,mutatedKeys:l}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const l=e.Qu.Iu();l.sort((C,M)=>function(N,H){const Q=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return Q(N)-Q(H)}(C.type,M.type)||this.Uu(C.doc,M.doc)),this.Wu(r);const d=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,w=m!==this.Bu;return this.Bu=m,0!==l.length||w?{snapshot:new zm(this.query,e.qu,o,l,e.mutatedKeys,0===m,w,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new NA,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=un(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new FA(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new PA(r))}),t}Yu(e){this.$u=e.li,this.Lu=un();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return zm.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class lM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cM{constructor(e){this.key=e,this.Zu=!1}}class dM{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new $u(m=>lv(m),mm),this.na=new Map,this.sa=new Set,this.ia=new ar(Be.comparator),this.ra=new Map,this.oa=new a,this.ua={},this.aa=new Map,this.ca=ih.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function hM(n,e){return NC.apply(this,arguments)}function NC(){return NC=(0,_e.Z)(function*(n,e){const t=tT(n);let r,o;const l=t.ea.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.Xu();else{const d=yield ah(t.localStore,Co(e));t.isPrimaryClient&&SI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield OC(t,e,r,"current"===m)}return o}),NC.apply(this,arguments)}function OC(n,e,t,r){return kC.apply(this,arguments)}function kC(){return kC=(0,_e.Z)(function*(n,e,t,r){n.la=(M,N,H)=>{return(Q=(0,_e.Z)(function*(ce,Fe,tt,Ht){let Gt=Fe.view.Gu(tt);Gt.ni&&(Gt=yield Yv(ce.localStore,Fe.query,!1).then(({documents:qt})=>Fe.view.Gu(qt,Gt)));const Wt=Ht&&Ht.targetChanges.get(Fe.targetId),Ot=Fe.view.applyChanges(Gt,ce.isPrimaryClient,Wt);return GC(ce,Fe.targetId,Ot.Hu),Ot.snapshot}),function(ce,Fe,tt,Ht){return Q.apply(this,arguments)})(n,M,N,H);var Q};const o=yield Yv(n.localStore,e,!0),l=new LA(e,o.li),d=l.Gu(o.documents),m=Qd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=l.applyChanges(d,n.isPrimaryClient,m);GC(n,t,w.Hu);const C=new lM(e,t,l);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),w.snapshot}),kC.apply(this,arguments)}function fM(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,_e.Z)(function*(n,e){const t=qe(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(l=>!mm(l,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ep(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),n0(t.remoteStore,r.targetId),Wm(t,r.targetId)}).catch(yc))):(Wm(t,r.targetId),yield Ep(t.localStore,r.targetId,!0))}),PC.apply(this,arguments)}function FC(){return FC=(0,_e.Z)(function*(n,e,t){const r=nT(n);try{const o=yield function(l,d){const m=qe(l),w=Cn.now(),C=d.reduce((N,H)=>N.add(H.key),un());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ci.Ks(N,C).next(H=>{M=H;const Q=[];for(const ce of d){const Fe=Sb(ce,M.get(ce.key));null!=Fe&&Q.push(new uc(ce.key,Fe,bw(Fe.value.mapValue),or.exists(!0)))}return m.Bs.addMutationBatch(N,w,Q,d)})).then(N=>(N.applyToLocalDocumentSet(M),{batchId:N.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,d,m){let w=l.ua[l.currentUser.toKey()];w||(w=new ar(Rt)),w=w.insert(d,m),l.ua[l.currentUser.toKey()]=w}(r,o.batchId,t),yield wc(r,o.changes),yield $m(r.remoteStore)}catch(o){const l=Gm(o,"Failed to persist write");t.reject(l)}}),FC.apply(this,arguments)}function VA(n,e){return LC.apply(this,arguments)}function LC(){return LC=(0,_e.Z)(function*(n,e){const t=qe(n);try{const r=yield DA(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.ra.get(l);d&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Zu=!0:o.modifiedDocuments.size>0?mt(d.Zu):o.removedDocuments.size>0&&(mt(d.Zu),d.Zu=!1))}),yield wc(t,r,e)}catch(r){yield yc(r)}}),LC.apply(this,arguments)}function UA(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((l,d)=>{const m=d.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(l,d){const m=qe(l);m.onlineState=d;let w=!1;m.queries.forEach((C,M)=>{for(const N of M.listeners)N.Au(d)&&(w=!0)}),w&&MC(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gM(n,e,t){return VC.apply(this,arguments)}function VC(){return VC=(0,_e.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),l=o&&o.key;if(l){let d=new ar(Be.comparator);d=d.insert(l,Tn.newNoDocument(l,_t.min()));const m=un().add(l),w=new ap(_t.min(),new Map,new yn(Rt),d,m);yield VA(r,w),r.ia=r.ia.remove(l),r.ra.delete(e),qC(r)}else yield Ep(r.localStore,e,!1).then(()=>Wm(r,e,t)).catch(yc)}),VC.apply(this,arguments)}function mM(n,e){return UC.apply(this,arguments)}function UC(){return UC=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield rC(t.localStore,e);HC(t,r,null),$C(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wc(t,o)}catch(o){yield yc(o)}}),UC.apply(this,arguments)}function yM(n,e,t){return BC.apply(this,arguments)}function BC(){return BC=(0,_e.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(l,d){const m=qe(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(M=>(mt(null!==M),C=M.keys(),m.Bs.removeMutationBatch(w,M))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.ci.Ks(w,C))})}(r.localStore,e);HC(r,e,t),$C(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wc(r,o)}catch(o){yield yc(o)}}),BC.apply(this,arguments)}function jC(){return jC=(0,_e.Z)(function*(n,e){const t=qe(n);lh(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=qe(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=Gm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),jC.apply(this,arguments)}function $C(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function HC(n,e,t){const r=qe(n);let o=r.ua[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function Wm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||BA(n,r)})}function BA(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(n0(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),qC(n))}function GC(n,e,t){for(const r of t)r instanceof PA?(n.oa.addReference(r.key,e),vM(n,r)):r instanceof FA?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||BA(n,r.key)):Xe()}function vM(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.sa.add(r),qC(n))}function qC(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Be(zt.fromString(e)),r=n.ca.next();n.ra.set(r,new cM(t)),n.ia=n.ia.insert(t,r),SI(n.remoteStore,new Gu(Co(Gd(t.path)),r,2,zs.A))}}function wc(n,e,t){return zC.apply(this,arguments)}function zC(){return zC=(0,_e.Z)(function*(n,e,t){const r=qe(n),o=[],l=[],d=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,w)=>{d.push(r.la(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const M=zv.Ys(w.targetId,C);l.push(M)}}))}),yield Promise.all(d),r.ta.Qo(o),yield(m=(0,_e.Z)(function*(w,C){const M=qe(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>fe.forEach(C,H=>fe.forEach(H.Hs,Q=>M.persistence.referenceDelegate.addReference(N,H.targetId,Q)).next(()=>fe.forEach(H.Js,Q=>M.persistence.referenceDelegate.removeReference(N,H.targetId,Q)))))}catch(N){if(!Xd(N))throw N;Re("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const H=N.targetId;if(!N.fromCache){const Q=M.ii.get(H),Fe=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);M.ii=M.ii.insert(H,Fe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,l))}),zC.apply(this,arguments)}function EM(n,e){return WC.apply(this,arguments)}function WC(){return WC=(0,_e.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield Kv(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(d=>{d.forEach(m=>{m.reject(new xe(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wc(t,r.hi)}var o}),WC.apply(this,arguments)}function wM(n,e){const t=qe(n),r=t.ra.get(e);if(r&&r.Zu)return un().add(r.key);{let o=un();const l=t.na.get(e);if(!l)return o;for(const d of l){const m=t.ea.get(d);o=o.unionWith(m.view.Ku)}return o}}function IM(n,e){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,_e.Z)(function*(n,e){const t=qe(n),r=yield Yv(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&GC(t,e.targetId,o.Hu),o}),ZC.apply(this,arguments)}function DM(n,e){return KC.apply(this,arguments)}function KC(){return KC=(0,_e.Z)(function*(n,e){const t=qe(n);return aC(t.localStore,e).then(r=>wc(t,r))}),KC.apply(this,arguments)}function bM(n,e,t,r){return YC.apply(this,arguments)}function YC(){return YC=(0,_e.Z)(function*(n,e,t,r){const o=qe(n),l=yield function(d,m){const w=qe(d),C=qe(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.fn(M,m).next(N=>N?w.ci.Ks(M,N):fe.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield $m(o.remoteStore):"acknowledged"===t||"rejected"===t?(HC(o,e,r||null),$C(o,e),m=e,qe(qe(o.localStore).Bs)._n(m)):Xe(),yield wc(o,l)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),YC.apply(this,arguments)}function QC(){return QC=(0,_e.Z)(function*(n,e){const t=qe(n);if(tT(t),nT(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield jA(t,r.toArray());t.ha=!0,yield DC(t.remoteStore,!0);for(const l of o)SI(t.remoteStore,l)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Wm(t,d),Ep(t.localStore,d,!0))),n0(t.remoteStore,d)}),yield o,yield jA(t,r),function(l){const d=qe(l);d.ra.forEach((m,w)=>{n0(d.remoteStore,w)}),d.oa.bi(),d.ra=new Map,d.ia=new ar(Be.comparator)}(t),t.ha=!1,yield DC(t.remoteStore,!1)}}),QC.apply(this,arguments)}function jA(n,e,t){return JC.apply(this,arguments)}function JC(){return JC=(0,_e.Z)(function*(n,e,t){const r=qe(n),o=[],l=[];for(const d of e){let m;const w=r.na.get(d);if(w&&0!==w.length){m=yield ah(r.localStore,Co(w[0]));for(const C of w){const M=r.ea.get(C),N=yield IM(r,M);N.snapshot&&l.push(N.snapshot)}}else{const C=yield oC(r.localStore,d);m=yield ah(r.localStore,C),yield OC(r,$A(C),d,!1)}o.push(m)}return r.ta.Qo(l),o}),JC.apply(this,arguments)}function $A(n){return kw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function TM(n){const e=qe(n);return qe(qe(e.localStore).persistence).Fs()}function AM(n,e,t,r){return XC.apply(this,arguments)}function XC(){return XC=(0,_e.Z)(function*(n,e,t,r){const o=qe(n);if(o.ha)return void Re("SyncEngine","Ignoring unexpected query state notification.");const l=o.na.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const d=yield aC(o.localStore,Fw(l[0])),m=ap.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield wc(o,d,m);break}case"rejected":yield Ep(o.localStore,e,!0),Wm(o,e,r);break;default:Xe()}}),XC.apply(this,arguments)}function SM(n,e,t){return eT.apply(this,arguments)}function eT(){return eT=(0,_e.Z)(function*(n,e,t){const r=tT(n);if(r.ha){for(const o of e){if(r.na.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const l=yield oC(r.localStore,o),d=yield ah(r.localStore,l);yield OC(r,$A(l),d.targetId,!1),SI(r.remoteStore,d)}for(const o of t)r.na.has(o)&&(yield Ep(r.localStore,o,!1).then(()=>{n0(r.remoteStore,o),Wm(r,o)}).catch(yc))}}),eT.apply(this,arguments)}function tT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gM.bind(null,e),e.ta.Qo=sM.bind(null,e.eventManager),e.ta.fa=oM.bind(null,e.eventManager),e}function nT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yM.bind(null,e),e}class HA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=Ec(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return nC(this.persistence,new Wv,e.initialUser,this.M)}wa(e){return new I(S.zi,this.M)}_a(e){return new Bt}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class GA extends HA{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield nT(r.ya.syncEngine),yield $m(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return nC(this.persistence,new Wv,e.initialUser,this.M)}ma(e){return new wI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Vm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fs.withCacheSize(this.cacheSizeBytes):fs.DEFAULT;return new qv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Um(),uh(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Bt}}class MM extends GA{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof ot&&(r.sharedClientState.syncEngine={Mr:bM.bind(null,o),Or:AM.bind(null,o),Fr:SM.bind(null,o),Fs:TM.bind(null,o),kr:DM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,_e.Z)(function*(d){yield function CM(n,e){return QC.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}_a(e){const t=Um();if(!ot.vt(t))throw new xe(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Vm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ot(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rT{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>UA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=EM.bind(null,r.syncEngine),yield DC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new iM}createDatastore(e){const t=Ec(e.databaseInfo.databaseId),r=new Jv(e.databaseInfo);return new qx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>UA(this.syncEngine,m,0),d=$i.vt()?new $i:new ln,new Wx(t,r,o,l,d);var t,r,o,l,d}createSyncEngine(e,t){return function(r,o,l,d,m,w,C){const M=new dM(r,o,l,d,m,w);return C&&(M.ha=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=qe(t);Re("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield jm(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function qA(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class RM{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Er,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const l=yield e.ba(o);return new aM(JSON.parse(l),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,_e.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class NM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(l,d){const m=qe(l),w=dc(m.M)+"/documents",C={documents:d.map(Q=>cc(m.M,Q))},M=yield m.ho("BatchGetDocuments",w,C),N=new Map;M.forEach(Q=>{const ce=function Jw(n,e){return"found"in e?function(t,r){mt(!!r.found);const o=To(t,r.found.name),l=Ir(r.found.updateTime),d=new Rr({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(o,l,d)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const o=To(t,r.missing),l=Ir(r.readTime);return Tn.newNoDocument(o,l)}(n,e):Xe()}(m.M,Q);N.set(ce.key.toString(),ce)});const H=[];return d.forEach(Q=>{const ce=N.get(Q.toString());mt(!!ce),H.push(ce)}),H}),function(l,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=Be.fromPath(o);e.mutations.push(new gv(l,e.precondition(l)))}),yield(r=(0,_e.Z)(function*(o,l){const d=qe(o),m=dc(d.M)+"/documents",w={writes:l.map(C=>Jd(d.M,C))};yield d.oo("Commit",m,w)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?or.updateTime(t):or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new xe(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return or.updateTime(t)}return or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class OM{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new wp(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,_e.Z)(function*(){const t=new NM(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.xa(l)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!rc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!mv(t)}return!1}}class kM{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Wr.UNAUTHENTICATED,this.clientId=Hf.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,_e.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Re("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Gm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function zA(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(l){r.isEqual(l)||(yield Kv(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iT.apply(this,arguments)}function WA(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oT(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>RA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>RA(e.remoteStore,l)),n.onlineComponents=e}),sT.apply(this,arguments)}function oT(n){return aT.apply(this,arguments)}function aT(){return aT=(0,_e.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield zA(n,new HA)),n.offlineComponents}),aT.apply(this,arguments)}function RI(n){return uT.apply(this,arguments)}function uT(){return uT=(0,_e.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield WA(n,new rT)),n.onlineComponents}),uT.apply(this,arguments)}function ZA(n){return oT(n).then(e=>e.persistence)}function lT(n){return oT(n).then(e=>e.localStore)}function KA(n){return RI(n).then(e=>e.remoteStore)}function cT(n){return RI(n).then(e=>e.syncEngine)}function Zm(n){return dT.apply(this,arguments)}function dT(){return dT=(0,_e.Z)(function*(n){const e=yield RI(n),t=e.eventManager;return t.onListen=hM.bind(null,e.syncEngine),t.onUnlisten=fM.bind(null,e.syncEngine),t}),dT.apply(this,arguments)}function YA(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,d,m,w){const C=new MI({next:N=>{l.enqueueAndForget(()=>SC(o,M));const H=N.docs.has(d);!H&&N.fromCache?w.reject(new xe(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new RC(Gd(d.path),C,{includeMetadataChanges:!0,Cu:!0});return TC(o,M)}(yield Zm(n),n.asyncQueue,e,t,r)})),r.promise}function QA(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,d,m,w){const C=new MI({next:N=>{l.enqueueAndForget(()=>SC(o,M)),N.fromCache&&"server"===m.source?w.reject(new xe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new RC(d,C,{includeMetadataChanges:!0,Cu:!0});return TC(o,M)}(yield Zm(n),n.asyncQueue,e,t,r)})),r.promise}const JA=new Map;function hT(n,e,t){if(!t)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XA(n,e,t,r){if(!0===e&&!0===r)throw new xe(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eS(n){if(!Be.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tS(n){if(Be.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=NI(n);throw new xe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nS(n,e){if(e<=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class rS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,XA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class r0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rS({}),this._settingsFrozen=!1,e instanceof ea?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hw;switch(t.type){case"gapi":const r=t.client;return mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new fb(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=JA.get(e);t&&(Re("ComponentProvider","Removing Datastore"),JA.delete(e),t.terminate())}(this),Promise.resolve()}}class Vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class Yu extends Hi{constructor(e,t,r){super(e,t,Gd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new Be(e))}withConverter(e){return new Yu(this.firestore,e,this._path)}}function iS(n,e,...t){if(n=(0,Ft.m9)(n),hT("collection","path",e),n instanceof r0){const r=zt.fromString(e,...t);return tS(r),new Yu(n,null,r)}{if(!(n instanceof Vn||n instanceof Yu))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return tS(r),new Yu(n.firestore,null,r)}}function OI(n,e,...t){if(n=(0,Ft.m9)(n),1===arguments.length&&(e=Hf.R()),hT("doc","path",e),n instanceof r0){const r=zt.fromString(e,...t);return eS(r),new Vn(n,null,new Be(r))}{if(!(n instanceof Vn||n instanceof Yu))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return eS(r),new Vn(n.firestore,n instanceof Yu?n.converter:null,new Be(r))}}function sS(n,e){return n=(0,Ft.m9)(n),e=(0,Ft.m9)(e),(n instanceof Vn||n instanceof Yu)&&(e instanceof Vn||e instanceof Yu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function oS(n,e){return n=(0,Ft.m9)(n),e=(0,Ft.m9)(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&mm(n._query,e._query)&&n.converter===e.converter}class qM{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new wp(this,"async_queue_retry"),this.qa=()=>{const t=uh();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=uh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=uh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Er;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Xd(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Kn("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=CC.createAndSchedule(this,e,t,r,l=>this.ja(l));return this.Fa.push(o),o}Ka(){this.$a&&Xe()}verifyOperationInProgress(){}Wa(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function fT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class zM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends r0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new qM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||aS(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||aS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function aS(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new yw(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new kM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function uS(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield zA(n,t),yield WA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===ae.FAILED_PRECONDITION||l.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function lS(n){if(n._initialized||n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qu(sr.fromBase64String(e))}catch(t){throw new xe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qu(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ip{constructor(e){this._methodName=e}}class kI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const nR=/^__.*__$/;class rR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new uc(e,this.data,this.fieldMask,t,this.fieldTransforms):new np(e,this.data,t,this.fieldTransforms)}}class cS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class PI{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new PI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return VI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(dS(this.Xa)&&nR.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class iR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Ec(e)}ac(e,t,r,o=!1){return new PI({Xa:e,methodName:t,uc:r,path:Mr.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Dp(n){const e=n._freezeSettings(),t=Ec(n._databaseId);return new iR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FI(n,e,t,r,o,l={}){const d=n.ac(l.merge||l.mergeFields?2:0,e,t,o);yT("Data must be an object, but it was:",d,r);const m=pS(r,d);let w,C;if(l.merge)w=new bo(d.fieldMask),C=d.fieldTransforms;else if(l.mergeFields){const M=[];for(const N of l.mergeFields){const H=_T(e,N,t);if(!d.contains(H))throw new xe(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);mS(M,H)||M.push(H)}w=new bo(M),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new rR(new Rr(m),w,C)}class s0 extends Ip{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s0}}function hS(n,e,t){return new PI({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class pT extends Ip{_toFieldTransform(e){return new Wd(e.path,new oc)}isEqual(e){return e instanceof pT}}class sR extends Ip{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=hS(this,e,!0),r=this.cc.map(l=>bp(l,t)),o=new Uu(r);return new Wd(e.path,o)}isEqual(e){return this===e}}class oR extends Ip{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=hS(this,e,!0),r=this.cc.map(l=>bp(l,t)),o=new Bu(r);return new Wd(e.path,o)}isEqual(e){return this===e}}class aR extends Ip{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new ac(e.M,Bw(e.M,this.hc));return new Wd(e.path,t)}isEqual(e){return this===e}}function gT(n,e,t,r){const o=n.ac(1,e,t);yT("Data must be an object, but it was:",o,r);const l=[],d=Rr.empty();nc(r,(w,C)=>{const M=LI(e,w,t);C=(0,Ft.m9)(C);const N=o.sc(M);if(C instanceof s0)l.push(M);else{const H=bp(C,N);null!=H&&(l.push(M),d.set(M,H))}});const m=new bo(l);return new cS(d,m,o.fieldTransforms)}function mT(n,e,t,r,o,l){const d=n.ac(1,e,t),m=[_T(e,r,t)],w=[o];if(l.length%2!=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<l.length;H+=2)m.push(_T(e,l[H])),w.push(l[H+1]);const C=[],M=Rr.empty();for(let H=m.length-1;H>=0;--H)if(!mS(C,m[H])){const Q=m[H];let ce=w[H];ce=(0,Ft.m9)(ce);const Fe=d.sc(Q);if(ce instanceof s0)C.push(Q);else{const tt=bp(ce,Fe);null!=tt&&(C.push(Q),M.set(Q,tt))}}const N=new bo(C);return new cS(M,N,d.fieldTransforms)}function fS(n,e,t,r=!1){return bp(t,n.ac(r?4:3,e))}function bp(n,e){if(gS(n=(0,Ft.m9)(n)))return yT("Unsupported field value:",e,n),pS(n,e);if(n instanceof Ip)return function(t,r){if(!dS(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const d of t){let m=bp(d,r.ic(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ft.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Cn.fromDate(t);return{timestampValue:cp(r.M,o)}}if(t instanceof Cn){const o=new Cn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:cp(r.M,o)}}if(t instanceof kI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qu)return{bytesValue:wm(r.M,t._byteString)};if(t instanceof Vn){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ev(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${NI(t)}`)}(n,e)}function pS(n,e){const t={};return mw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nc(n,(r,o)=>{const l=bp(o,e.tc(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function gS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Cn||n instanceof kI||n instanceof Qu||n instanceof Vn||n instanceof Ip)}function yT(n,e,t){if(!gS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=NI(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function _T(n,e,t){if((e=(0,Ft.m9)(e))instanceof Ic)return e._internalPath;if("string"==typeof e)return LI(n,e);throw VI("Field path arguments must be of type string or ",n,!1,void 0,t)}const uR=new RegExp("[~\\*/\\[\\]]");function LI(n,e,t){if(e.search(uR)>=0)throw VI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ic(...e.split("."))._internalPath}catch(r){throw VI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function VI(n,e,t,r,o){const l=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(l||d)&&(w+=" (found",l&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(ae.INVALID_ARGUMENT,m+n+w)}function mS(n,e){return n.some(t=>t.isEqual(e))}class o0{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lR extends o0{data(){return super.data()}}function UI(n,e){return"string"==typeof e?LI(n,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}class Cp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dc extends o0{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a0 extends Dc{data(e={}){return super.data(e)}}class dh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Cp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new a0(this._firestore,this._userDataWriter,r.key,r,new Cp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new a0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Cp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new a0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Cp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),C=l.indexOf(d.doc.key)),{type:cR(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function yS(n,e){return n instanceof Dc&&e instanceof Dc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof dh&&e instanceof dh&&n._firestore===e._firestore&&oS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function _S(n){if(ep(n)&&0===n.explicitOrderBy.length)throw new xe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}function hh(n,...e){for(const t of e)n=t._apply(n);return n}class dR extends u0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Dp(e.firestore),r=function(o,l,d,m,w,C,M){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){bS(M,C);const Q=[];for(const ce of M)Q.push(DS(m,o,ce));N={arrayValue:{values:Q}}}else N=DS(m,o,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||bS(M,C),N=fS(d,"where",M,"in"===C||"not-in"===C);const H=Zr.create(w,C,N);return function(Q,ce){if(ce.S()){const tt=Pw(Q);if(null!==tt&&!tt.isEqual(ce.field))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tt.toString()}' and '${ce.field.toString()}'`);const Ht=Vu(Q);null!==Ht&&CS(0,ce.field,Ht)}const Fe=function(tt,Ht){for(const Gt of tt.filters)if(Ht.indexOf(Gt.op)>=0)return Gt.op;return null}(Q,function(tt){switch(tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ce.op));if(null!==Fe)throw new xe(ae.INVALID_ARGUMENT,Fe===ce.op?`Invalid query. You cannot use more than one '${ce.op.toString()}' filter.`:`Invalid query. You cannot use '${ce.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Hi(e.firestore,e.converter,function(o,l){const d=o.filters.concat([l]);return new Lu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class fR extends u0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Hd(o,l);return function(m,w){if(null===Vu(m)){const C=Pw(m);null!==C&&CS(0,C,w.field)}}(r,d),d}(e._query,this.lc,this._c);return new Hi(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Lu(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class vS extends u0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Hi(e.firestore,e.converter,uv(e._query,this.wc,this.mc))}}class ES extends u0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=IS(e,this.type,this.gc,this.yc);return new Hi(e.firestore,e.converter,(o=t,new Lu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class wS extends u0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=IS(e,this.type,this.gc,this.yc);return new Hi(e.firestore,e.converter,(o=t,new Lu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function IS(n,e,t,r){if(t[0]=(0,Ft.m9)(t[0]),t[0]instanceof o0)return function(o,l,d,m,w){if(!m)throw new xe(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const M of qd(o))if(M.field.isKeyField())C.push(sc(l,m.key));else{const N=m.data.field(M.field);if(tv(N))throw new xe(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=M.field.canonicalString();throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(N)}return new Oa(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Dp(n.firestore);return function(l,d,m,w,C,M){const N=l.explicitOrderBy;if(C.length>N.length)throw new xe(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Q=0;Q<C.length;Q++){const ce=C[Q];if(N[Q].field.isKeyField()){if("string"!=typeof ce)throw new xe(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ce}`);if(!gm(l)&&-1!==ce.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ce}' contains a slash.`);const Fe=l.path.child(zt.fromString(ce));if(!Be.isDocumentKey(Fe))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const tt=new Be(Fe);H.push(sc(d,tt))}else{const Fe=fS(m,w,ce);H.push(Fe)}}return new Oa(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function DS(n,e,t){if("string"==typeof(t=(0,Ft.m9)(t))){if(""===t)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gm(e)&&-1!==t.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!Be.isDocumentKey(r))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sc(n,new Be(r))}if(t instanceof Vn)return sc(n,t._key);throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${NI(t)}.`)}function bS(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function CS(n,e,t){if(!t.isEqual(e))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vT{convertValue(e,t="none"){switch(ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return nc(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new kI(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=am(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qf(e));default:return null}}convertTimestamp(e){const t=Na(e);return new Cn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);mt(nI(r));const o=new ea(r.get(1),r.get(3)),l=new Be(r.popFirst(5));return o.isEqual(t)||Kn(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function BI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class wR extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}class TS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dp(e)}set(e,t,r){this._verifyNotCommitted();const o=fh(e,this._firestore),l=BI(o.converter,t,r),d=FI(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,or.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=fh(e,this._firestore);let d;return d="string"==typeof(t=(0,Ft.m9)(t))||t instanceof Ic?mT(this._dataReader,"WriteBatch.update",l._key,t,r,o):gT(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fh(e,this._firestore);return this._mutations=this._mutations.concat(new sp(t._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fh(n,e){if((n=(0,Ft.m9)(n)).firestore!==e)throw new xe(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Tp extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function AS(n,e,t){n=Qt(n,Vn);const r=Qt(n.firestore,Gn),o=BI(n.converter,e,t);return Km(r,[FI(Dp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,or.none())])}function SS(n,e,t,...r){n=Qt(n,Vn);const o=Qt(n.firestore,Gn),l=Dp(o);let d;return d="string"==typeof(e=(0,Ft.m9)(e))||e instanceof Ic?mT(l,"updateDoc",n._key,e,t,r):gT(l,"updateDoc",n._key,e),Km(o,[d.toMutation(n._key,or.exists(!0))])}function xS(n,...e){var t,r,o;n=(0,Ft.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||fT(e[d])||(l=e[d],d++);const m={includeMetadataChanges:l.includeMetadataChanges};if(fT(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,M;if(n instanceof Vn)C=Qt(n.firestore,Gn),M=Gd(n._key.path),w={next:N=>{e[d]&&e[d](ET(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=Qt(n,Hi);C=Qt(N.firestore,Gn),M=N._query;const H=new Tp(C);w={next:Q=>{e[d]&&e[d](new dh(C,H,N,Q))},error:e[d+1],complete:e[d+2]},_S(n._query)}return function(N,H,Q,ce){const Fe=new MI(ce),tt=new RC(H,Fe,Q);return N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return TC(yield Zm(N),tt)})),()=>{Fe.Ia(),N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return SC(yield Zm(N),tt)}))}}(Or(C),M,m,w)}function Km(n,e){return function(t,r){const o=new Er;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function pM(n,e,t){return FC.apply(this,arguments)}(yield cT(t),r,o)})),o.promise}(Or(n),e)}function ET(n,e,t){const r=t.docs.get(e._key),o=new Tp(n);return new Dc(n,o,e._key,r,new Cp(t.hasPendingWrites,t.fromCache),e.converter)}class RR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dp(e)}get(e){const t=fh(e,this._firestore),r=new wR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const l=o[0];if(l.isFoundDocument())return new o0(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new o0(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=fh(e,this._firestore),l=BI(o.converter,t,r),d=FI(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const l=fh(e,this._firestore);let d;return d="string"==typeof(t=(0,Ft.m9)(t))||t instanceof Ic?mT(this._dataReader,"Transaction.update",l._key,t,r,o):gT(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=fh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=fh(e,this._firestore),r=new Tp(this._firestore);return super.get(e).then(o=>new Dc(this._firestore,r,t._key,o._document,new Cp(!1,!1),t.converter))}}function wT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RS(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function NS(){if(!function mb(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xo=_d.SDK_VERSION,(0,_d._registerComponent)(new vd.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new Gn(o,new fw(t.getProvider("auth-internal")),new cA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,_d.registerVersion)(dw,"3.4.8",n),(0,_d.registerVersion)(dw,"3.4.8","esm2017")}();class l0{constructor(e){this._delegate=e}static fromBase64String(e){return NS(),new l0(Qu.fromBase64String(e))}static fromUint8Array(e){return RS(),new l0(Qu.fromUint8Array(e))}toBase64(){return NS(),this._delegate.toBase64()}toUint8Array(){return RS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IT(n){return function BR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class jR{enableIndexedDbPersistence(e,t){return function ZM(n,e){lS(n=Qt(n,Gn));const t=Or(n),r=n._freezeSettings(),o=new rT;return uS(t,o,new GA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KM(n){lS(n=Qt(n,Gn));const e=Or(n),t=n._freezeSettings(),r=new rT;return uS(e,r,new MM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function YM(n){if(n._initialized&&!n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!ds.vt())return Promise.resolve();const o=r+"main";yield ds.delete(o)}),function(r){return t.apply(this,arguments)})(Vm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class OS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ld("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function HM(n,e,t,r={}){var o;const l=(n=Qt(n,r0))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Ld("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Wr.MOCK_USER;else{d=(0,Ft.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Wr(w)}n._authCredentials=new db(new X_(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function JM(n){return function PM(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield ZA(n),t=yield KA(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o.fu.delete(0),t0(o)}(t)}))}(Or(n=Qt(n,Gn)))}(this._delegate)}disableNetwork(){return function XM(n){return function FM(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield ZA(n),t=yield KA(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const l=qe(o);l.fu.add(0),yield jm(l),l.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Or(n=Qt(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function QM(n){return function(e){const t=new Er;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function _M(n,e){return jC.apply(this,arguments)}(yield cT(e),t)})),t.promise}(Or(n=Qt(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function MR(n,e){return function UM(n,e){const t=new MI(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Zm(n),o=t,qe(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Zm(n),o=t,void qe(r).Eu.delete(o);var r,o}))}}(Or(n=Qt(n,Gn)),fT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ym(this,iS(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new ra(this,OI(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function GM(n,e){if(n=Qt(n,r0),hT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,(t=e,new Lu(zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function NR(n,e){return function BM(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(o=n,RI(o).then(l=>l.datastore));var o;new OM(n.asyncQueue,r,e,t).run()})),t.promise}(Or(n=Qt(n,Gn)),t=>e(new RR(n,t)))}(this._delegate,t=>e(new kS(this,t)))}batch(){return Or(this._delegate),new PS(new TS(this._delegate,e=>Km(this._delegate,e)))}loadBundle(e){return function eR(n,e){const t=Or(n=Qt(n,Gn)),r=new zM;return function jM(n,e,t,r){const o=function(l,d){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,w=function(w,C){if(w instanceof Uint8Array)return qA(w,C);if(w instanceof ArrayBuffer)return qA(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new RM(w,d);var w}(t,Ec(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function xM(n,e,t){const r=qe(n);var o;(o=(0,_e.Z)(function*(l,d,m){try{const w=yield d.getMetadata();if(yield function(H,Q){const ce=qe(H),Fe=Ir(Q.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",tt=>ce._s.getBundleMetadata(tt,Q.id)).then(tt=>!!tt&&tt.createTime.compareTo(Fe)>=0)}(l.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(kA(w));const C=new uM(w,l.localStore,d.M);let M=yield d.da();for(;M;){const H=yield C.ku(M);H&&m._updateProgress(H),M=yield d.da()}const N=yield C.complete();return yield wc(l,N.Fu,void 0),yield function(H,Q){const ce=qe(H);return ce.persistence.runTransaction("Save bundle","readwrite",Fe=>ce._s.saveBundleMetadata(Fe,Q))}(l.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Ou)}catch(w){return Ld("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(l,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield cT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function tR(n,e){return function $M(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",l=>o._s.getNamedQuery(l,r))}(yield lT(n),e)}))}(Or(n=Qt(n,Gn)),e).then(t=>t?new Hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class jI extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new l0(new Qu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ra.forKey(t,this.firestore,null)}}class kS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}get(e){const t=Sp(e);return this._delegate.get(t).then(r=>new c0(this._firestore,new Dc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Sp(e);return r?(wT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Sp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}}class PS{constructor(e){this._delegate=e}set(e,t,r){const o=Sp(e);return r?(wT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Sp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ap{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new a0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new d0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ap.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new Ap(e,new jI(e),t),o.set(t,l)),l}}Ap.INSTANCES=new WeakMap;class ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ra(t,new Vn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new ra(t,new Vn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ym(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ym(this.firestore,iS(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ft.m9)(e))instanceof Vn&&sS(this._delegate,e)}set(e,t){t=wT("DocumentReference.set",t);try{return t?AS(this._delegate,e,t):AS(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?SS(this._delegate,e):SS(this._delegate,e,t,...r)}catch(o){throw ps(o,"updateDoc()","DocumentReference.update()")}}delete(){return function SR(n){return Km(Qt(n.firestore,Gn),[new sp(n._key,or.none())])}(this._delegate)}onSnapshot(...e){const t=FS(e),r=LS(e,o=>new c0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return xS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function DR(n){n=Qt(n,Vn);const e=Qt(n.firestore,Gn),t=Or(e),r=new Tp(e);return function LM(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,d){try{const m=yield function(w,C){const M=qe(w);return M.persistence.runTransaction("read document","readonly",N=>M.ci.Ls(N,C))}(o,l);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Gm(m,`Failed to get document '${l} from cache`);d.reject(w)}}),function(o,l,d){return r.apply(this,arguments)})(yield lT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Dc(e,r,n._key,o,new Cp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function bR(n){n=Qt(n,Vn);const e=Qt(n.firestore,Gn);return YA(Or(e),n._key,{source:"server"}).then(t=>ET(e,n,t))}(this._delegate):function IR(n){n=Qt(n,Vn);const e=Qt(n.firestore,Gn);return YA(Or(e),n._key).then(t=>ET(e,n,t))}(this._delegate),t.then(r=>new c0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ra(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function FS(n){for(const e of n)if("object"==typeof e&&!IT(e))return e;return{}}function LS(n,e){var t,r;let o;return o=IT(n[0])?n[0]:IT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class c0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yS(this._delegate,e._delegate)}}class d0 extends c0{data(e){const t=this._delegate.data(e);return function $f(n,e){n||Xe()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}where(e,t,r){try{return new gs(this.firestore,hh(this._delegate,function hR(n,e,t){const r=e,o=UI("where",n);return new dR(o,r,t)}(e,t,r)))}catch(o){throw ps(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,hh(this._delegate,function pR(n,e="asc"){const t=e,r=UI("orderBy",n);return new fR(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,hh(this._delegate,function gR(n){return nS("limit",n),new vS("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,hh(this._delegate,function mR(n){return nS("limitToLast",n),new vS("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,hh(this._delegate,function yR(...n){return new ES("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,hh(this._delegate,function _R(...n){return new ES("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,hh(this._delegate,function vR(...n){return new wS("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,hh(this._delegate,function ER(...n){return new wS("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return oS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function TR(n){n=Qt(n,Hi);const e=Qt(n.firestore,Gn),t=Or(e),r=new Tp(e);return function VM(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,d){try{const m=yield Yv(o,l,!0),w=new LA(l,m.li),C=w.Gu(m.documents),M=w.applyChanges(C,!1);d.resolve(M.snapshot)}catch(m){const w=Gm(m,`Failed to execute query '${l} against cache`);d.reject(w)}}),function(o,l,d){return r.apply(this,arguments)})(yield lT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new dh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function AR(n){n=Qt(n,Hi);const e=Qt(n.firestore,Gn),t=Or(e),r=new Tp(e);return QA(t,n._query,{source:"server"}).then(o=>new dh(e,r,n,o))}(this._delegate):function CR(n){n=Qt(n,Hi);const e=Qt(n.firestore,Gn),t=Or(e),r=new Tp(e);return _S(n._query),QA(t,n._query).then(o=>new dh(e,r,n,o))}(this._delegate),t.then(r=>new DT(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=FS(e),r=LS(e,o=>new DT(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return xS(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}class HR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new d0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new d0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new HR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new d0(this._firestore,r))})}isEqual(e){return yS(this._delegate,e._delegate)}}class Ym extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ra(this.firestore,e):null}doc(e){try{return new ra(this.firestore,void 0===e?OI(this._delegate):OI(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function xR(n,e){const t=Qt(n.firestore,Gn),r=OI(n),o=BI(n.converter,e);return Km(t,[FI(Dp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ra(this.firestore,t))}isEqual(e){return sS(this._delegate,e._delegate)}withConverter(e){return new Ym(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}function Sp(n){return Qt(n,Vn)}class bT{constructor(...e){this._delegate=new Ic(...e)}static documentId(){return new bT(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,Ft.m9)(e))instanceof Ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function kR(){return new pT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xp(e)}static delete(){const e=function OR(){return new s0("deleteField")}();return e._methodName="FieldValue.delete",new xp(e)}static arrayUnion(...e){const t=function PR(...n){return new sR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xp(t)}static arrayRemove(...e){const t=function FR(...n){return new oR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xp(t)}static increment(e){const t=function LR(n){return new aR("increment",n)}(e);return t._methodName="FieldValue.increment",new xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const GR={Firestore:OS,GeoPoint:kI,Timestamp:Cn,Blob:l0,Transaction:kS,WriteBatch:PS,DocumentReference:ra,DocumentSnapshot:c0,Query:gs,QueryDocumentSnapshot:d0,QuerySnapshot:DT,CollectionReference:Ym,FieldPath:bT,FieldValue:xp,setLogLevel:function $R(n){!function cb(n){Nu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function zR(n){(function qR(n,e){n.INTERNAL.registerComponent(new vd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},GR)))})(n,(e,t)=>new OS(e,t,new jR)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(PD.Z);var WR=k(6451),$I=k(5363),ZR=k(6063);class KR extends rr.x{constructor(e=1/0,t=1/0,r=ZR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:d}=this;t||(r.push(e),!o&&r.push(l.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let d=0;d<l.length&&!e.closed;d+=r?1:2)e.next(l[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var YR=k(3099);function VS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,YR.B)({connector:()=>new KR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function US(n,e){return(0,ga.m)(e)?Nn(()=>n,e):Nn(()=>n)}var CT=k(9468);k(5867);const jS=new Map,tN={activated:!1,tokenObservers:[]},nN={initialized:!1,enabled:!1};function fi(n){return jS.get(n)||tN}function Pa(n,e){jS.set(n,e)}function GI(){return nN}class aN{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Ft.BH,yield function uN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ft.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new Ft.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function HS(n){if(!fi(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function xT(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const l={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,l)}catch(N){throw ms.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw ms.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw ms.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),M=Date.now();return{token:m.attestationToken,expireTimeMillis:M+C,issuedAtTimeMillis:M}}),MT.apply(this,arguments)}function fN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const h0="firebase-app-check-store";let WI=null;function qS(){return WI||(WI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ms.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(h0,{keyPath:"compositeKey"})}}catch(t){e(ms.create("storage-open",{originalErrorMessage:t.message}))}}),WI)}function RT(){return RT=(0,_e.Z)(function*(n,e){const r=(yield qS()).transaction(h0,"readwrite"),l=r.objectStore(h0).put({compositeKey:n,value:e});return new Promise((d,m)=>{l.onsuccess=w=>{d()},r.onerror=w=>{var C;m(ms.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),RT.apply(this,arguments)}const f0=new Iu.Yd("@firebase/app-check");function KS(n,e){return(0,Ft.hl)()?function yN(n,e){return function zS(n,e){return RT.apply(this,arguments)}(function ZS(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{f0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YS(){return GI().enabled}function QS(){return PT.apply(this,arguments)}function PT(){return PT=(0,_e.Z)(function*(){const n=GI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),PT.apply(this,arguments)}const DN={error:"UNKNOWN_ERROR"};function bN(n){return Ft.US.encodeString(JSON.stringify(n),!1)}function ZI(n){return FT.apply(this,arguments)}function FT(){return FT=(0,_e.Z)(function*(n,e=!1){const t=n.app;HS(t);const r=fi(t);let l,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&KI(w)&&(o=w)}if(!e&&o&&KI(o))return{token:o.token};let m,d=!1;if(YS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xT(fN(t,yield QS()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield KS(t,w),Pa(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?f0.warn(w.message):f0.error(w),l=w}return o?(m={token:o.token},Pa(t,Object.assign(Object.assign({},r),{token:o})),yield KS(t,o)):m=TN(l),d&&XS(t,m),m}),FT.apply(this,arguments)}function VT(n,e){const t=fi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Pa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function JS(n){const{app:e}=n,t=fi(e);let r=t.tokenRefresher;r||(r=function CN(n){const{app:e}=n;return new aN((0,_e.Z)(function*(){let r;if(r=fi(e).token?yield ZI(n,!0):yield ZI(n),r.error)throw r.error}),()=>!0,()=>{const t=fi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Pa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function XS(n,e){const t=fi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function KI(n){return n.expireTimeMillis-Date.now()>0}function TN(n){return{token:bN(DN),error:n}}class AN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=fi(this.app);for(const t of e)VT(this.app,t.next);return Promise.resolve()}}const ax="app-check-internal";!function jN(){(0,_d._registerComponent)(new vd.wA("app-check",n=>function SN(n,e){return new AN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ax).initialize()})),(0,_d._registerComponent)(new vd.wA(ax,n=>function xN(n){return{getToken:e=>ZI(n,e),addTokenListener:e=>function LT(n,e,t,r){const{app:o}=n,l=fi(o),d={next:t,error:r,type:e};if(Pa(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&KI(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),JS(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>JS(n))}(n,"INTERNAL",e),removeTokenListener:e=>VT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_d.registerVersion)("@firebase/app-check","0.5.6")}();class $T{constructor(){return(0,Hr.vb)("app-check")}}"undefined"!=typeof window&&window;var zN=k(127);const lx=new g.OlP("angularfire2.auth.use-emulator"),cx=new g.OlP("angularfire2.auth.settings"),dx=new g.OlP("angularfire2.auth.tenant-id"),hx=new g.OlP("angularfire2.auth.langugage-code"),fx=new g.OlP("angularfire2.auth.use-device-language"),px=new g.OlP("angularfire.auth.persistence"),gx=(n,e,t,r,o,l,d,m)=>(0,Hs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,l&&w.useDeviceLanguage(),d)for(const[C,M]of Object.entries(d))w.settings[C]=M;return m&&w.setPersistence(m),w},[t,r,o,l,d,m]);let mx=(()=>{class n{constructor(t,r,o,l,d,m,w,C,M,N,H,Q){const ce=new rr.x,Fe=ht(void 0).pipe((0,$I.Q)(d.outsideAngular),Nn(()=>l.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,bt.U)(()=>(0,Hs.on)(t,l,r)),(0,bt.U)(tt=>gx(tt,l,m,C,M,N,w,H)),VS({bufferSize:1,refCount:!1}));if(tr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{Fe.pipe(Ls()).subscribe();const Ht=Fe.pipe(Nn(Ot=>Ot.getRedirectResult().then(qt=>qt,()=>null)),Hr.iC,VS({bufferSize:1,refCount:!1})),Gt=Fe.pipe(Nn(Ot=>new jr.y(qt=>({unsubscribe:l.runOutsideAngular(()=>Ot.onAuthStateChanged(dn=>qt.next(dn),dn=>qt.error(dn),()=>qt.complete()))})))),Wt=Fe.pipe(Nn(Ot=>new jr.y(qt=>({unsubscribe:l.runOutsideAngular(()=>Ot.onIdTokenChanged(dn=>qt.next(dn),dn=>qt.error(dn),()=>qt.complete()))}))));this.authState=Ht.pipe(US(Gt),(0,CT.R)(d.outsideAngular),(0,$I.Q)(d.insideAngular)),this.user=Ht.pipe(US(Wt),(0,CT.R)(d.outsideAngular),(0,$I.Q)(d.insideAngular)),this.idToken=this.user.pipe(Nn(Ot=>Ot?(0,Mn.D)(Ot.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe(Nn(Ot=>Ot?(0,Mn.D)(Ot.getIdTokenResult()):ht(null))),this.credential=(0,WR.T)(Ht,ce,this.authState.pipe(rs(Ot=>!Ot))).pipe((0,bt.U)(Ot=>(null==Ot?void 0:Ot.user)?Ot:null),(0,CT.R)(d.outsideAngular),(0,$I.Q)(d.insideAngular))}return(0,Hs.pX)(this,Fe,l,{spy:{apply:(tt,Ht,Gt)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&Gt.then(Wt=>ce.next(Wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Hs.Dh),g.LFG(Hs.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Hr.HU),g.LFG(lx,8),g.LFG(cx,8),g.LFG(dx,8),g.LFG(hx,8),g.LFG(fx,8),g.LFG(px,8),g.LFG($T,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function yx(n,e){return function ZN(n,e=kD.z){return new jr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function GT(n,e){return yx(n,e).pipe((0,bt.U)(t=>({payload:t,type:"query"})))}function QI(n,e){return GT(n,e).pipe(wi(void 0),p_(),(0,bt.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(M=>M.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),l}))}function _x(n,e,t){return QI(n,t).pipe(pr((r,o)=>function YN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function QN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return qT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),function gE(n,e=ri.y){return n=null!=n?n:sA,(0,Cr.e)((t,r)=>{let o,l=!0;t.subscribe((0,Fn.x)(r,d=>{const m=e(d);(l||!n(o,m))&&(l=!1,o=m,r.next(d))}))})}(),(0,bt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function qT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function vx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Ex{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(wi(void 0),p_(),rs(([r,o])=>o.length>0||!r),(0,bt.U)(([r,o])=>o),Hr.iC)}auditTrail(e){return this.stateChanges(e).pipe(pr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vx(e);return _x(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(e={}){return GT(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Hr.iC)}get(e){return(0,Mn.D)(this.query.get(e)).pipe(Hr.iC)}add(e){return this.ref.add(e)}doc(e){return new wx(this.ref.doc(e),this.afs)}}class wx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=bx(r,t);return new Ex(o,l,this.afs)}snapshotChanges(){return function KN(n,e){return yx(n,e).pipe(wi(void 0),p_(),(0,bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Mn.D)(this.ref.get(e)).pipe(Hr.iC)}}class JN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QI(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),rs(t=>t.length>0),Hr.iC):QI(this.query,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}auditTrail(e){return this.stateChanges(e).pipe(pr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vx(e);return _x(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(e={}){return GT(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Hr.iC)}get(e){return(0,Mn.D)(this.query.get(e)).pipe(Hr.iC)}}const Ix=new g.OlP("angularfire2.enableFirestorePersistence"),Dx=new g.OlP("angularfire2.firestore.persistenceSettings"),XN=new g.OlP("angularfire2.firestore.settings"),eO=new g.OlP("angularfire2.firestore.use-emulator");function bx(n,e=(t=>t)){return{query:e(n),ref:n}}let zT=(()=>{class n{constructor(t,r,o,l,d,m,w,C,M,N,H,Q,ce,Fe,tt,Ht,Gt){this.schedulers=w;const Wt=(0,Hs.on)(t,m,r),Ot=M;N&&gx(Wt,m,H,ce,Fe,tt,Q,Ht),[this.firestore,this.persistenceEnabled$]=(0,Hs.cc)(`${Wt.name}.firestore`,"AngularFirestore",Wt.name,()=>{const qt=m.runOutsideAngular(()=>Wt.firestore());if(l&&qt.settings(l),Ot&&qt.useEmulator(...Ot),o&&!tr(d)){const dn=()=>{try{return(0,Mn.D)(qt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Gi){return"undefined"!=typeof console&&console.warn(Gi),ht(!1)}};return[qt,m.runOutsideAngular(dn)]}return[qt,ht(!1)]},[l,Ot,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=bx(o,r),m=this.schedulers.ngZone.run(()=>l);return new Ex(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),l=this.firestore.collectionGroup(t);return new JN(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new wx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Hs.Dh),g.LFG(Hs.xv,8),g.LFG(Ix,8),g.LFG(XN,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Hr.HU),g.LFG(Dx,8),g.LFG(eO,8),g.LFG(mx,8),g.LFG(lx,8),g.LFG(cx,8),g.LFG(dx,8),g.LFG(hx,8),g.LFG(fx,8),g.LFG(px,8),g.LFG($T,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Cx=(()=>{class n{constructor(){zN.Z.registerVersion("angularfire",Hr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Ix,useValue:!0},{provide:Dx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[zT]}),n})();const Tx=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(o=>((o,l,d)=>void 0===o.find(m=>l[m]!==d[m]))(t,o,e))};let p0=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks").add(t)}getAll(t){return this._client.collection("tasks").valueChanges({idField:"id"}).pipe((0,bt.U)(r=>Tx(r,t)))}remove(t){this._client.doc("tasks/"+t).delete()}set(t){this._client.doc("tasks/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(zT))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ax=new g.OlP("ADDS_TASK_DTO"),Sx=new g.OlP("GETS_ALL_TASK_DTO"),xx=new g.OlP("REMOVES_TASK_DTO"),Mx=new g.OlP("SETS_TASK_DTO");let Rx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[p0,{provide:Ax,useExisting:p0},{provide:Sx,useExisting:p0},{provide:xx,useExisting:p0},{provide:Mx,useExisting:p0}],imports:[[Cx]]}),n})(),Nx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[ei,f_]]}),n})(),tO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[ei]]}),n})(),Ox=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("images").valueChanges({idField:"id"}).pipe((0,bt.U)(r=>Tx(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(zT))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),kx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Ox,{provide:A0,useExisting:Ox}],imports:[[Cx]]}),n})(),nO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[ei,Ca.forChild([{path:"",component:nD}]),pE,Rx,Nx,tO,kx]]}),n})();function rO(n,e){if(1&n&&(g.TgZ(0,"div",5),g.O4$(),g.TgZ(1,"svg",6),g._UZ(2,"path",7),g.qZA(),g._uU(3),g.qZA()),2&n){const t=g.oxw();g.xp6(3),g.hij(" ",t.counter," Task complited!\n")}}function iO(n,e){if(1&n&&(g.TgZ(0,"div",8),g.O4$(),g.TgZ(1,"svg",9),g._UZ(2,"path",10),g.qZA(),g._uU(3),g.qZA()),2&n){const t=g.oxw();g.xp6(3),g.hij(" ",t.counter," Task deleted!\n")}}function sO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"ul")(1,"li",13)(2,"div",14)(3,"input",15),g.NdJ("click",function(){const l=g.CHM(t).$implicit;return g.oxw(2).onDoneTaskClicked(l)})("click",function(){const l=g.CHM(t).$implicit;return g.oxw(2).check(l)})("click",function(){return g.CHM(t),g.oxw(2).showDoneAlert()}),g.qZA(),g.TgZ(4,"label",16),g._uU(5),g.qZA()(),g.TgZ(6,"div",17)(7,"div",18)(8,"button",19),g._uU(9," ... "),g.qZA(),g.TgZ(10,"ul",20)(11,"li")(12,"button",21),g._uU(13," Delete "),g.qZA()(),g.TgZ(14,"li")(15,"button",22),g._uU(16," Edit "),g.qZA()()()()()()()}if(2&n){const t=e.$implicit;g.xp6(3),g.Q6J("checked",t.done),g.xp6(2),g.hij(" ",t.taskDescription," ")}}function oO(n,e){if(1&n&&(g.TgZ(0,"div",11),g.YNc(1,sO,17,2,"ul",12),g.ALo(2,"async"),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,1,t.tasks$))}}function aO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"h5",27),g._uU(5,"DELETE TASK"),g.qZA(),g._UZ(6,"button",28),g.qZA(),g.TgZ(7,"div",29),g._uU(8," Are you sure you want to delete this task? "),g.qZA(),g.TgZ(9,"div",30)(10,"button",31),g._uU(11,"Cancel"),g.qZA(),g.TgZ(12,"button",32),g.NdJ("click",function(){const l=g.CHM(t).$implicit,d=g.oxw();return d.onDeleteTaskClicked(l,d.taskToRemove)})("click",function(){const l=g.CHM(t).$implicit;return g.oxw().check(l)})("click",function(){return g.CHM(t),g.oxw().showDeleteAlert()}),g._uU(13," Delete task "),g.qZA()()()()()}}let uO=(()=>{class n{constructor(t,r,o){this._getsAllTaskDto=t,this._removesTaskDto=r,this._setsTaskDto=o,this.taskToRemove="",this.taskDone=!1,this.taskDelete=!1,this.taskEdit=!1,this.taskToEdit="",this.counter=0,this.tasks$=this._getsAllTaskDto.getAll().pipe((0,bt.U)(l=>l.sort((d,m)=>d.created-m.created)))}onDeleteTaskClicked(t,r){this._removesTaskDto.remove(this.taskToRemove+t.id),this.taskToRemove=r}onDoneTaskClicked(t){this._setsTaskDto.set(Object.assign(Object.assign({},t),t.done?{done:!1}:{done:!0}))}showDoneAlert(){this.taskDone=!0,this.taskDelete=!1}showDeleteAlert(){this.taskDone=!1,this.taskDelete=!0}check(t){!0===t.done?(this.counter-=1,console.log()):this.counter+=1}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Sx),g.Y36(xx),g.Y36(Mx))},n.\u0275cmp=g.Xpm({type:n,selectors:[["lib-task-list"]],decls:8,vars:8,consts:[["class","alert alert-success alert-dismissible alert-window ","role","alert",4,"ngIf"],["class","alert alert-danger  alert-window","role","alert",4,"ngIf"],[1,"container","container-fluid"],["class","form-group",4,"ngIf"],["class","modal fade","id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-success","alert-dismissible","alert-window"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","currentColor","viewBox","0 0 16 16","role","img","aria-label","Success:",1,"bi","bi-exclamation-triangle-fill","flex-shrink-0","me-2"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"],["role","alert",1,"alert","alert-danger","alert-window"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","currentColor","viewBox","0 0 16 16","role","img","aria-label","Danger:",1,"bi","bi-exclamation-triangle-fill","flex-shrink-0","me-2"],["d","M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"],[1,"form-group"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","col-8"],["type","checkbox","name","flexRadioDefault","id","checked",1,"form-check-input","rounded-circle","pointer","text-decoration-line-through",3,"checked","click"],[1,"form-check-label","striketrough","ps-2"],[1,"col","col-4"],[1,"dropdown","d-flex","justify-content-end"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-light","bg-transparent","border-0"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu","dropdown-menu-look"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"dropdown-item","btn","btn-outline-danger"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal-e",1,"dropdown-item","btn","btn-outline-danger"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(g.YNc(0,rO,4,1,"div",0),g.YNc(1,iO,4,1,"div",1),g.TgZ(2,"div",2),g.YNc(3,oO,3,3,"div",3),g.ALo(4,"async"),g.qZA(),g.TgZ(5,"div",2),g.YNc(6,aO,14,0,"div",4),g.ALo(7,"async"),g.qZA()),2&t&&(g.Q6J("ngIf",r.taskDone),g.xp6(1),g.Q6J("ngIf",r.taskDelete),g.xp6(2),g.Q6J("ngIf",g.lcZ(4,4,r.tasks$)),g.xp6(3),g.Q6J("ngForOf",g.lcZ(7,6,r.tasks$)))},directives:[Jr,Zn],pipes:[ja],encapsulation:2,changeDetection:0}),n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lO=(()=>{class n{constructor(t){this._addsTaskDto=t,this.addTask=new Qy({taskDescription:new mg})}onAddTaskSubmited(t){var r;t.invalid||(this._addsTaskDto.add({taskDescription:null===(r=t.get("taskDescription"))||void 0===r?void 0:r.value,done:!1,created:Date.now()}),this.addTask.reset())}onChangeClicked(){let t=document.getElementById("buttonOfChange");null!=t&&(t.style.display="block")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ax))},n.\u0275cmp=g.Xpm({type:n,selectors:[["lib-add-task"]],decls:13,vars:1,consts:[["data-bs-toggle","collapse","data-bs-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample",1,"btn","btn-primary","btn-add-task"],["id","collapseExample",1,"collapse"],[1,"card","card-body","bg-transparent","border-0"],[3,"formGroup","ngSubmit"],["type","text","formControlName","taskDescription","placeholder","Write your message here:","id","floatingTextarea2",1,"form-control"],[1,"row"],[1,"col"],["id","changeToForm","href","#collapseExample","type","submit","data-bs-toggle","collapse","data-bs-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample",1,"btn","text-white","border-0","pe-2","me-2","mt-2",3,"click"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample",1,"btn","pe-2","me-2","mt-2","btn-closed"]],template:function(t,r){1&t&&(g.TgZ(0,"p")(1,"button",0),g._uU(2," Add task "),g.qZA()(),g.TgZ(3,"div",1)(4,"div",2)(5,"form",3),g.NdJ("ngSubmit",function(){return r.onAddTaskSubmited(r.addTask)}),g._UZ(6,"textarea",4),g.TgZ(7,"div",5)(8,"div",6)(9,"button",7),g.NdJ("click",function(){return r.onChangeClicked()}),g._uU(10," Add Task "),g.qZA(),g.TgZ(11,"button",8),g._uU(12," Cancel "),g.qZA()()()()()()),2&t&&(g.xp6(5),g.Q6J("formGroup",r.addTask))},directives:[vo,cD,_g,Bi,U0,rE],encapsulation:2,changeDetection:0}),n})(),cO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-task-list-page"]],decls:2,vars:0,template:function(t,r){1&t&&g._UZ(0,"lib-task-list")(1,"lib-add-task")},directives:[uO,lO],encapsulation:2,changeDetection:0}),n})(),dO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[ei,Ca.forChild([{path:"",component:cO}]),pE,Rx,Nx,kx]]}),n})();const hO=[{path:"home",loadChildren:()=>nO},{path:"task-list",loadChildren:()=>dO}];let fO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Ca.forRoot(hO)],Ca]}),n})(),pO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["lib-nav"]],decls:11,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","p-2","mb-2","text-white"],["routerLink","/home",1,"navbar-brand"],[1,"fs-3"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarToggleExternalContent","aria-controls","navbarToggleExternalContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarToggleExternalContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","routerLink","/add-task",1,"nav-link","active","link-light"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0)(1,"a",1)(2,"h1",2),g._uU(3,"AWESOME TODO APP"),g.qZA()(),g.TgZ(4,"button",3),g._UZ(5,"span",4),g.qZA(),g.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),g._uU(10,"Add task"),g.qZA()()()()())},directives:[Kh],encapsulation:2,changeDetection:0}),n})(),gO=(()=>{class n{constructor(){this.title="todoapp",this.today=Date.now()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:4,consts:[[1,"container-fluid"],[1,"container","container-fluid"],[1,"text-uppercase","d-flex","align-items-center"],[1,"fs-1","fw-bold","me-5"],[1,"fs-6","fw-light","align-middle"],[1,"border","border-2","rounded",2,"margin-top","20px","margin-bottom","20px"],[1,"container"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g._UZ(1,"lib-nav"),g.qZA(),g.TgZ(2,"div",1)(3,"div",2)(4,"div",3),g._uU(5,"TODAY "),g.qZA(),g.TgZ(6,"div",4),g._uU(7),g.ALo(8,"date"),g.qZA()(),g._UZ(9,"hr",5),g.qZA(),g.TgZ(10,"div",6),g._UZ(11,"router-outlet"),g.qZA()),2&t&&(g.xp6(7),g.Oqu(g.xi3(8,1,r.today,"EEE, d, MMM")))},directives:[pO,kl],pipes:[gh],styles:[""]}),n})();const Px_firestoreConfig={apiKey:"AIzaSyBqrB22cMsG6qmsLa2UGpaikctFlozUv24",authDomain:"todoapp-lowgular.firebaseapp.com",projectId:"todoapp-lowgular",storageBucket:"todoapp-lowgular.appspot.com",messagingSenderId:"920653572399",appId:"1:920653572399:web:f961cca0fbc210f814d9da"};let mO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[],imports:[[ei,Ca]]}),n})(),yO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[gO]}),n.\u0275inj=g.cJS({providers:[],imports:[[fa,fO,mO,Hs.hO.initializeApp(Px_firestoreConfig)]]}),n})();(0,g.G48)(),ul().bootstrapModule(yO).catch(n=>console.error(n))},5867:(rt,Ce,k)=>{k.d(Ce,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.6.11","app")},127:(rt,Ce,k)=>{k.d(Ce,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.6.11","app-compat")},820:(rt,Ce,k)=>{k.r(Ce);var g=k(5861),Z=k(3942),O=k(2090),oe=k(9681),J=k(655),pe=k(1877),ie=k(4859);const Oe=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new pe.Yd("@firebase/auth");function ze(y,...h){Je.logLevel<=pe.in.ERROR&&Je.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw je(y,...h)}function ye(y,...h){return je(y,...h)}function ve(y,h,p){const v=Object.assign(Object.assign({},Pe()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function $e(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&De(y,"argument-error"),ve(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function ee(y,h,...p){if(!y)throw je(h,...p)}function q(y){const h="INTERNAL ASSERTION FAILED: "+y;throw ze(h),new Error(h)}function te(y,h){y||q(h)}const ge=new Map;function ne(y){te(y instanceof Function,"Expected a class definition");let h=ge.get(y);return h?(te(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ge.set(y,h),h)}function vt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Zt(){return"http:"===An()||"https:"===An()}function An(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class nn{constructor(h,p){this.shortDelay=h,this.longDelay=p,te(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function it(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rn(y,h){te(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class pi{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qi=new nn(3e4,6e4);function Kt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Lt(y,h,p,v){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(y,h,p,v,T={}){return Kr(y,T,(0,g.Z)(function*(){let R={},G={};v&&("GET"===h?G=v:R={body:JSON.stringify(v)});const re=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),pi.fetch()(br(y,y.config.apiHost,p,re),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Kr(y,h,p){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Jt),h);try{const T=new zi(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw Wi(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const re=R.ok?G.errorMessage:G.error.message,[Ve,Ye]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Wi(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ve)throw Wi(y,"email-already-in-use",G);const ft=v[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw ve(y,ft,Ye);De(y,ft)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function Dr(y,h,p,v){return xi.apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(y,h,p,v,T={}){const R=yield Lt(y,h,p,v,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function br(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?rn(y.config,T):`${y.config.apiScheme}://${T}`}class zi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ye(this.auth,"network-request-failed")),qi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wi(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=ye(y,h,v);return T.customData._tokenResponse=p,T}function kr(){return(kr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function qn(y,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Yr(y,h){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function hn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function ia(){return(ia=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),T=et(v);ee(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,G=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:hn(Vt(T.auth_time)),issuedAtTime:hn(Vt(T.iat)),expirationTime:hn(Vt(T.exp)),signInProvider:G||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function et(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(ze("Failed to decode base64 JWT payload"),null)}catch(T){return ze("Caught error parsing JWT payload as JSON",T),null}}function Jn(y,h){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&Pt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Pt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Qs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class ur{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=hn(this.lastLoginAt),this.creationTime=hn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xn(y){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield Jn(y,Yr(p,{idToken:v}));ee(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const G=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?be(R.providerUserInfo):[],re=We(y.providerData,G),ft=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==re?void 0:re.length)),nt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:re,metadata:new ur(R.createdAt,R.lastLoginAt),isAnonymous:ft};Object.assign(y,nt)})).apply(this,arguments)}function Nt(){return(Nt=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield Xn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function We(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function be(y){return y.map(h=>{var{providerId:p}=h,v=(0,J._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ut(){return(ut=(0,g.Z)(function*(y,h){const p=yield Kr(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,G=br(y,T,"/v1/token",`key=${R}`),re=yield y._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",pi.fetch()(G,{method:"POST",headers:re,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class kt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ee(h.idToken,"internal-error"),ee(void 0!==h.idToken,"internal-error"),ee(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function gt(y){const h=et(y);return ee(h,"internal-error"),ee(void 0!==h.exp,"internal-error"),ee(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return ee(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:G}=yield function Ze(y,h){return ut.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,R,Number(G))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:R}=p,G=new kt;return v&&(ee("string"==typeof v,"internal-error",{appName:h}),G.refreshToken=v),T&&(ee("string"==typeof T,"internal-error",{appName:h}),G.accessToken=T),R&&(ee("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new kt,this.toJSON())}_performRefresh(){return q("not implemented")}}function xt(y,h){ee("string"==typeof y||void 0===y,"internal-error",{appName:h})}class U{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,R=(0,J._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ur(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield Jn(p,p.stsTokenManager.getToken(p.auth,h));return ee(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function _s(y){return ia.apply(this,arguments)}(this,h)}reload(){return function lr(y){return Nt.apply(this,arguments)}(this)}_assign(h){this!==h&&(ee(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new U(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield Xn(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield Jn(h,function st(y,h){return kr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,R,G,re,Ve,Ye,ft;const nt=null!==(v=p.displayName)&&void 0!==v?v:void 0,In=null!==(T=p.email)&&void 0!==T?T:void 0,Ui=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Bl=null!==(G=p.photoURL)&&void 0!==G?G:void 0,pu=null!==(re=p.tenantId)&&void 0!==re?re:void 0,gu=null!==(Ve=p._redirectEventId)&&void 0!==Ve?Ve:void 0,zh=null!==(Ye=p.createdAt)&&void 0!==Ye?Ye:void 0,Ty=null!==(ft=p.lastLoginAt)&&void 0!==ft?ft:void 0,{uid:Ko,emailVerified:ad,isAnonymous:ud,providerData:Wh,stsTokenManager:ld}=p;ee(Ko&&ld,h,"internal-error");const Ti=kt.fromJSON(this.name,ld);ee("string"==typeof Ko,h,"internal-error"),xt(nt,h.name),xt(In,h.name),ee("boolean"==typeof ad,h,"internal-error"),ee("boolean"==typeof ud,h,"internal-error"),xt(Ui,h.name),xt(Bl,h.name),xt(pu,h.name),xt(gu,h.name),xt(zh,h.name),xt(Ty,h.name);const Zh=new U({uid:Ko,auth:h,email:In,emailVerified:ad,displayName:nt,isAnonymous:ud,photoURL:Bl,phoneNumber:Ui,tenantId:pu,stsTokenManager:Ti,createdAt:zh,lastLoginAt:Ty});return Wh&&Array.isArray(Wh)&&(Zh.providerData=Wh.map(ng=>Object.assign({},ng))),gu&&(Zh._redirectEventId=gu),Zh}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const T=new kt;T.updateFromServerResponse(p);const R=new U({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield Xn(R),R})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function le(y,h,p){return`firebase:${y}:${h}:${p}`}class K{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=le(this.userKey,T.apiKey,R),this.fullPersistenceKey=le("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?U._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new K(ne($),h,v);const T=(yield Promise.all(p.map(function(){var Ye=(0,g.Z)(function*(ft){if(yield ft._isAvailable())return ft});return function(ft){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let R=T[0]||ne($);const G=le(v,h.config.apiKey,h.name);let re=null;for(const Ye of p)try{const ft=yield Ye._get(G);if(ft){const nt=U._fromJSON(h,ft);Ye!==R&&(re=nt),R=Ye;break}}catch(ft){}const Ve=T.filter(Ye=>Ye._shouldAllowMigration);return R._shouldAllowMigration&&Ve.length?(R=Ve[0],re&&(yield R._set(G,re.toJSON())),yield Promise.all(p.map(function(){var Ye=(0,g.Z)(function*(ft){if(ft!==R)try{yield ft._remove(G)}catch(nt){}});return function(ft){return Ye.apply(this,arguments)}}())),new K(R,h,v)):new K(R,h,v)})()}}function Le(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ut(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(dt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Dt(h))return"Blackberry";if(sn(h))return"Webos";if(jt(h))return"Safari";if((h.includes("chrome/")||cr(h))&&!h.includes("edge/"))return"Chrome";if(_n(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function dt(y=(0,O.z$)()){return/firefox\//i.test(y)}function jt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function cr(y=(0,O.z$)()){return/crios\//i.test(y)}function Ut(y=(0,O.z$)()){return/iemobile/i.test(y)}function _n(y=(0,O.z$)()){return/android/i.test(y)}function Dt(y=(0,O.z$)()){return/blackberry/i.test(y)}function sn(y=(0,O.z$)()){return/webos/i.test(y)}function Wn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Zi(y=(0,O.z$)()){return Wn(y)||_n(y)||sn(y)||Dt(y)||/windows phone/i.test(y)||Ut(y)}function oa(y,h=[]){let p;switch(y){case"Browser":p=Le((0,O.z$)());break;case"Worker":p=`${Le((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${v}`}class Qr{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new At(this),this.idTokenSubscription=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=ne(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield K.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==T?void 0:T._redirectEventId,re=yield p.tryRedirectSignIn(h);(!R||R===G)&&(null==re?void 0:re.user)&&(T=re.user)}return T?T._redirectEventId?(ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield Xn(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ct(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&ee(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return h&&ee(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&ne(h)||p._popupRedirectResolver;ee(v,p,"argument-error"),p.redirectPersistenceManager=yield K.create(p,[ne(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=oa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function ke(y){return(0,O.m9)(y)}class At{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function er(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function On(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Xt{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return q("not implemented")}_getIdTokenResponse(h){return q("not implemented")}_linkToIdToken(h,p){return q("not implemented")}_getReauthenticationResolver(h){return q("not implemented")}}function Sn(y,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:resetPassword",Kt(y,h))})).apply(this,arguments)}function wt(y,h){return xo.apply(this,arguments)}function xo(){return(xo=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Xs(y,h){return aa.apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",Kt(y,h))})).apply(this,arguments)}function Zn(){return(Zn=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPassword",Kt(y,h))})).apply(this,arguments)}function Ki(y,h){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendOobCode",Kt(y,h))})).apply(this,arguments)}function Jr(y,h){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(y,h){return Ki(y,h)})).apply(this,arguments)}function La(y,h){return Va.apply(this,arguments)}function Va(){return(Va=(0,g.Z)(function*(y,h){return Ki(y,h)})).apply(this,arguments)}function gi(y,h){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(y,h){return Ki(y,h)})).apply(this,arguments)}function bc(y,h){return Is.apply(this,arguments)}function Is(){return(Is=(0,g.Z)(function*(y,h){return Ki(y,h)})).apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,h))})).apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,h))})).apply(this,arguments)}class Ba extends Xt{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new Ba(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new Ba(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function ws(y,h){return Zn.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ua(y,h){return Pr.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return wt(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function ph(y,h){return Cc.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function kn(y,h){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithIdp",Kt(y,h))})).apply(this,arguments)}class Qi extends Xt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Qi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,R=(0,J._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const G=new Qi(v,T);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return kn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,kn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,kn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Np(y,h){return ja.apply(this,arguments)}function ja(){return(ja=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendVerificationCode",Kt(y,h))})).apply(this,arguments)}function Ds(){return(Ds=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,h))})).apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(y,h){const p=yield Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,h));if(p.temporaryProof)throw Wi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const kp={USER_NOT_FOUND:"user-not-found"};function Sc(){return(Sc=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),kp)})).apply(this,arguments)}class Mo extends Xt{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Mo({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Mo({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Ju(y,h){return Ds.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Op(y,h){return Ac.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function gh(y,h){return Sc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}=h;return v||p||T||R?new Mo({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class eo{constructor(h){var p,v,T,R,G,re;const Ve=(0,O.zd)((0,O.pd)(h)),Ye=null!==(p=Ve.apiKey)&&void 0!==p?p:null,ft=null!==(v=Ve.oobCode)&&void 0!==v?v:null,nt=function Qm(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ve.mode)&&void 0!==T?T:null);ee(Ye&&ft&&nt,"argument-error"),this.apiKey=Ye,this.operation=nt,this.code=ft,this.continueUrl=null!==(R=Ve.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Ve.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(re=Ve.tenantId)&&void 0!==re?re:null}static parseLink(h){const p=function $a(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new eo(p)}catch(v){return null}}}let Xu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return Ba._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=eo.parseLink(v);return ee(T,"argument-error"),Ba._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class bs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Fr extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ro extends Fr{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ee("providerId"in p&&"signInMethod"in p,"argument-error"),Qi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ee(h.idToken||h.accessToken,"argument-error"),Qi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ro.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ro.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:G,providerId:re}=h;if(!v&&!T&&!p&&!R||!re)return null;try{return new Ro(re)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:R})}catch(Ve){return null}}}let to=(()=>{class y extends Fr{constructor(){super("facebook.com")}static credential(p){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ua=(()=>{class y extends Fr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),xc=(()=>{class y extends Fr{constructor(){super("github.com")}static credential(p){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ei extends Xt{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return kn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,kn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,kn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:R}=p;return v&&T&&R&&v===T?new ei(v,R):null}static _create(h,p){return new ei(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ti extends bs{constructor(h){ee(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ti.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ti.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=ei.fromJSON(h);return ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return ei._create(v,p)}catch(T){return null}}}let Ha=(()=>{class y extends Fr{constructor(){super("twitter.com")}static credential(p,v){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ga(y,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signUp",Kt(y,h))})).apply(this,arguments)}class tr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,g.Z)(function*(){const R=yield U._fromIdTokenResponse(h,v,T),G=yh(v);return new tr({user:R,providerId:G,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=yh(v);return new tr({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function yh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Mc(){return(Mc=(0,g.Z)(function*(y){var h;const p=ke(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new tr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Ga(p,{returnSecureToken:!0}),T=yield tr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class za extends O.ZR{constructor(h,p,v,T){var R;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,za.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new za(h,p,v,T)}}function Wa(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?za._fromErrorAndOperation(y,R,h,v):R})}function Ji(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function el(){return(el=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield Ts(!0,p,h);const{providerUserInfo:v}=yield qn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=Ji(v||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function cn(y,h){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(y,h,p=!1){const v=yield Jn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return tr._forOperation(y,"link",v)})).apply(this,arguments)}function Ts(y,h,p){return tn.apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(y,h,p){yield Xn(h);const T=!1===y?"provider-already-linked":"no-such-provider";ee(Ji(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Rc(y,h){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield Jn(y,Wa(v,T,h,y),p);ee(R.idToken,v,"internal-error");const G=et(R.idToken);ee(G,v,"internal-error");const{sub:re}=G;return ee(y.uid===re,v,"user-mismatch"),tr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function ro(y,h){return dr.apply(this,arguments)}function dr(){return(dr=(0,g.Z)(function*(y,h,p=!1){const v="signIn",T=yield Wa(y,v,h),R=yield tr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function xn(y,h){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(y,h){return ro(ke(y),h)})).apply(this,arguments)}function mi(y,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield Ts(!1,p,h.providerId),cn(p,h)})).apply(this,arguments)}function As(y,h){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y,h){return Rc((0,O.m9)(y),h)})).apply(this,arguments)}function Za(y,h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithCustomToken",Kt(y,h))})).apply(this,arguments)}function xs(){return(xs=(0,g.Z)(function*(y,h){const p=ke(y),v=yield Za(p,{token:h,returnSecureToken:!0}),T=yield tr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class lt{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ka._fromServerResponse(h,p):De(h,"internal-error")}}class Ka extends lt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ka(p)}}function da(y,h,p){var v;ee((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ee(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ee(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ee(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Qa(){return(Qa=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&da(v,T,p),yield La(v,T)})).apply(this,arguments)}function tl(){return(tl=(0,g.Z)(function*(y,h,p){yield Sn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(y,h){yield Xs((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Mt(y,h){return rl.apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield Sn(p,{oobCode:h}),T=v.requestType;switch(ee(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,p,"internal-error");default:ee(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=lt._fromServerResponse(ke(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Oo(){return(Oo=(0,g.Z)(function*(y,h){const{data:p}=yield Mt((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(function*(y,h,p){const v=ke(y),T=yield Ga(v,{returnSecureToken:!0,email:h,password:p}),R=yield tr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};ee(p.handleCodeInApp,v,"argument-error"),p&&da(v,T,p),yield gi(v,T)})).apply(this,arguments)}function Ms(){return(Ms=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=Xu.credentialWithLink(h,p||vt());return ee(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),xn(v,T)})).apply(this,arguments)}function nr(y,h){return ni.apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:createAuthUri",Kt(y,h))})).apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:Zt()?vt():"http://localhost"},{signinMethods:T}=yield nr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function al(){return(al=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&da(p.auth,T,h);const{email:R}=yield Jr(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&da(v.auth,R,p);const{email:G}=yield bc(v.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function ul(y,h){return ha.apply(this,arguments)}function ha(){return(ha=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ll(){return(ll=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield Jn(v,ul(v.auth,R));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const re=v.providerData.find(({providerId:Ve})=>"password"===Ve);re&&(re.displayName=v.displayName,re.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function dl(y,h,p){return io.apply(this,arguments)}function io(){return(io=(0,g.Z)(function*(y,h,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const G=yield Jn(y,wt(v,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class so{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Pc extends so{constructor(h,p,v,T){super(h,p,v),this.username=T}}class Fc extends so{constructor(h,p){super(h,"facebook.com",p)}}class oo extends Pc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Ns extends so{constructor(h,p){super(h,"google.com",p)}}class hl extends Pc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function fr(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function kc(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const G=null===(p=null===(h=et(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new so(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new Fc(R,T);case"github.com":return new oo(R,T);case"google.com":return new Ns(R,T);case"twitter.com":return new hl(R,T,y.screenName||null);case"custom":case"anonymous":return new so(R,null);default:return new so(R,v,T)}}(p)}class es{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new es("enroll",h)}static _fromMfaPendingCredential(h){return new es("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return es._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return es._fromIdtoken(h.multiFactorSession.idToken)}return null}}class pa{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=ke(h),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(re=>lt._fromServerResponse(v,re));ee(T.mfaPendingCredential,v,"internal-error");const G=es._fromMfaPendingCredential(T.mfaPendingCredential);return new pa(G,R,function(){var re=(0,g.Z)(function*(Ve){const Ye=yield Ve._process(v,G);delete T.mfaInfo,delete T.mfaPendingCredential;const ft=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(p.operationType){case"signIn":const nt=yield tr._fromIdTokenResponse(v,p.operationType,ft);return yield v._updateCurrentUser(nt.user),nt;case"reauthenticate":return ee(p.user,v,"internal-error"),tr._forOperation(p.user,p.operationType,ft);default:De(v,"internal-error")}});return function(Ve){return re.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Pn(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",Kt(y,h))}class ts{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>lt._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new ts(h)}getSession(){var h=this;return(0,g.Z)(function*(){return es._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const T=h,R=yield v.getSession(),G=yield Jn(v.user,T._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),R=yield Jn(p.user,function Fp(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:G})=>G!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const Po=new WeakMap,gl="__sak";class ao{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(gl,"1"),this.storage.removeItem(gl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rn=(()=>{class y extends ao{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Bc(){const y=(0,O.z$)();return jt(y)||Wn(y)}()&&function Bn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Zi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&p(v,R,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((re,Ve,Ye)=>{this.notifyListeners(re,Ye)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(T);if(p.newValue!==re)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const R=()=>{const re=this.storage.getItem(T);!v&&this.localCache[T]===re||this.notifyListeners(T,re)},G=this.storage.getItem(T);!function sa(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,R=this;return(0,g.Z)(function*(){yield T().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const R=yield v().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),rr=(()=>{class y extends ao{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let jr=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:R,eventType:G,data:re}=T.data,Ve=v.handlersMap[G];if(!(null==Ve?void 0:Ve.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Ye=Array.from(Ve).map(function(){var nt=(0,g.Z)(function*(In){return In(T.origin,re)});return function(In){return nt.apply(this,arguments)}}()),ft=yield function Br(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:ft})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Fo(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class jc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,g.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,re;return new Promise((Ve,Ye)=>{const ft=Fo("",20);R.port1.start();const nt=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);re={messageChannel:R,onMessage(In){const Ui=In;if(Ui.data.eventId===ft)switch(Ui.data.status){case"ack":clearTimeout(nt),G=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ve(Ui.data.response);break;default:clearTimeout(nt),clearTimeout(G),Ye(new Error("invalid_response"))}}},T.handlers.add(re),R.port1.addEventListener("message",re.onMessage),T.target.postMessage({eventType:h,eventId:ft,data:p},[R.port2])}).finally(()=>{re&&T.removeMessageHandler(re)})})()}}function an(){return window}function _i(){return void 0!==an().WorkerGlobalScope&&"function"==typeof an().importScripts}function ri(){return(ri=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const ml="firebaseLocalStorageDb",uo="firebaseLocalStorage",Fn="fbase_key";class ns{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Lo(y,h){return y.transaction([uo],h?"readwrite":"readonly").objectStore(uo)}function ks(){const y=indexedDB.open(ml,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(uo,{keyPath:Fn})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(uo)?h(v):(v.close(),yield function ii(){const y=indexedDB.deleteDatabase(ml);return new ns(y).toPromise()}(),h(yield ks()))}))})}function ga(y,h,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(y,h,p){const v=Lo(y,!0).put({[Fn]:h,value:p});return new ns(v).toPromise()})).apply(this,arguments)}function Ps(){return(Ps=(0,g.Z)(function*(y,h){const p=Lo(y,!1).get(h),v=yield new ns(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Oi(y,h){const p=Lo(y,!0).delete(h);return new ns(p).toPromise()}const vi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield ks()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return _i()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=jr._getInstance(function $c(){return _i()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function iu(){return ri.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new jc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function bt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield ks();return yield ga(p,gl,"1"),yield Oi(p,gl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(R=>ga(R,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(R=>function yl(y,h){return Ps.apply(this,arguments)}(R,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>Oi(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(G=>{const re=Lo(G,!1).getAll();return new ns(re).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:G,value:re}of v)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(re)&&(p.notifyListeners(G,re),T.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),T.push(G));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Uo(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",Kt(y,h))}function Ei(){return(Ei=(0,g.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nn(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const R=ye("internal-error");R.customData=T,p(R)},v.type="text/javascript",v.charset="UTF-8",function qc(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Bo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const pr=1e12;class rs{constructor(h){this.auth=h,this.counter=pr,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new ki(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||pr;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||pr))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||pr))||void 0===v||v.execute(),""})()}}class ki{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ee(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function En(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fs=Bo("rcb"),zc=new nn(3e4,6e4);class Vp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!an().grecaptcha}load(h,p=""){return ee(function Up(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(an().grecaptcha):new Promise((v,T)=>{const R=an().setTimeout(()=>{T(ye(h,"network-request-failed"))},zc.get());an()[Fs]=()=>{an().clearTimeout(R),delete an()[Fs];const re=an().grecaptcha;if(!re)return void T(ye(h,"internal-error"));const Ve=re.render;re.render=(Ye,ft)=>{const nt=Ve(Ye,ft);return this.counter++,nt},this.hostLanguage=p,v(re)},Nn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Fs,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!an().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bp{load(h){return(0,g.Z)(function*(){return new rs(h)})()}clearedOneInstance(){}}const Ls="recaptcha",$r={theme:"light",type:"image"};class jp{constructor(h,p=Object.assign({},$r),v){this.parameters=p,this.type=Ls,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ke(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ee(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bp:new Vp,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const G=re=>{!re||(h.tokenChangeListeners.delete(G),R(re))};h.tokenChangeListeners.add(G),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=an()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){ee(Zt()&&!_i(),h.auth,"internal-error"),yield function Vs(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Cr(y){return Ei.apply(this,arguments)}(h.auth);ee(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class is{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Mo._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function mn(){return(mn=(0,g.Z)(function*(y,h,p){const v=ke(y),T=yield gr(v,h,(0,O.m9)(p));return new is(T,R=>xn(v,R))})).apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield Ts(!1,v,"phone");const T=yield gr(v.auth,h,(0,O.m9)(p));return new is(T,R=>mi(v,R))})).apply(this,arguments)}function El(){return(El=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=yield gr(v.auth,h,(0,O.m9)(p));return new is(T,R=>As(v,R))})).apply(this,arguments)}function gr(y,h,p){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let R;if(ee("string"==typeof T,y,"argument-error"),ee(p.type===Ls,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return ee("enroll"===G.type,y,"internal-error"),(yield Pn(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ee("signin"===G.type,y,"internal-error");const re=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ee(re,y,"missing-multi-factor-info"),(yield Uo(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Np(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return G}}finally{p._reset()}})).apply(this,arguments)}function ss(){return(ss=(0,g.Z)(function*(y,h){yield cn((0,O.m9)(y),h)})).apply(this,arguments)}let Ii=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=ke(p)}verifyPhoneNumber(p,v){return gr(this.auth,p,(0,O.m9)(v))}static credential(p,v){return Mo._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?Mo._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Pi(y,h){return h?ne(h):(ee(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ya extends Xt{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return kn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return kn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return kn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Il(y){return ro(y.auth,new ya(y),y.bypassAuthState)}function Dl(y){const{auth:h,user:p}=y;return ee(p,h,"internal-error"),Rc(p,new ya(y),y.bypassAuthState)}function St(y){return bl.apply(this,arguments)}function bl(){return(bl=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return ee(p,h,"internal-error"),cn(p,new ya(y),y.bypassAuthState)})).apply(this,arguments)}class jn{constructor(h,p,v,T,R=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:G,error:re,type:Ve}=h;if(re)return void p.reject(re);const Ye={auth:p.auth,requestUri:v,sessionId:T,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ve)(Ye))}catch(ft){p.reject(ft)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Il;case"linkViaPopup":case"linkViaRedirect":return St;case"reauthViaPopup":case"reauthViaRedirect":return Dl;default:De(this.auth,"internal-error")}}resolve(h){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cl=new nn(2e3,1e4);function Wc(){return(Wc=(0,g.Z)(function*(y,h,p){const v=ke(y);$e(y,h,bs);const T=Pi(v,p);return new Li(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);$e(v.auth,h,bs);const T=Pi(v.auth,p);return new Li(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function au(){return(au=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);$e(v.auth,h,bs);const T=Pi(v.auth,p);return new Li(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Li=(()=>{class y extends jn{constructor(p,v,T,R,G){super(p,v,R,G),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return ee(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){te(1===p.filter.length,"Popup operations only handle one event");const v=Fo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Cl.get())};p()}}return y.currentPopupAction=null,y})();const Vi=new Map;class $n extends jn{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=Vi.get(p.auth._key());if(!v){try{const R=(yield function oi(y,h){return Tl.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}Vi.set(p.auth._key(),v)}return p.bypassAuthState||Vi.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Tl(){return(Tl=(0,g.Z)(function*(y,h){const p=b(h),v=D(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function co(y,h){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,g.Z)(function*(y,h){return D(y)._set(b(h),"true")})).apply(this,arguments)}function D(y){return ne(y._redirectPersistence)}function b(y){return le("pendingRedirect",y.config.apiKey,y.name)}function z(){return(z=(0,g.Z)(function*(y,h,p){const v=ke(y);$e(y,h,bs);const T=Pi(v,p);return yield co(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Se(){return(Se=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);$e(v.auth,h,bs);const T=Pi(v.auth,p);yield co(T,v.auth);const R=yield ho(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);$e(v.auth,h,bs);const T=Pi(v.auth,p);yield Ts(!1,v,h.providerId),yield co(T,v.auth);const R=yield ho(v);return T._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(y,h){return yield ke(y)._initializationPromise,wn(y,h,!1)})).apply(this,arguments)}function wn(y,h){return Go.apply(this,arguments)}function Go(){return(Go=(0,g.Z)(function*(y,h,p=!1){const v=ke(y),T=Pi(v,h),G=yield new $n(v,T,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,h)),G})).apply(this,arguments)}function ho(y){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(y){const h=Fo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Di{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Al(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kc(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Kc(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fo(h))}saveEventToCache(h){this.cachedEventUids.add(fo(h)),this.lastProcessedEventTime=Date.now()}}function fo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Kc({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Sl(y){return _a.apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,h={}){return Lt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Hp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xm=/^https?/;function os(){return(os=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Sl(y);for(const p of h)try{if(xl(p))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function xl(y){const h=vt(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!Xm.test(p))return!1;if(Hp.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const ty=new nn(3e4,6e4);function ny(){const y=an().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Yc=null;function ry(y){return Yc=Yc||function Gp(y){return new Promise((h,p)=>{var v,T,R;function G(){ny(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ny(),p(ye(y,"network-request-failed"))},timeout:ty.get()})}if(null===(T=null===(v=an().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=an().gapi)||void 0===R?void 0:R.load)){const re=Bo("iframefcb");return an()[re]=()=>{gapi.load?G():p(ye(y,"network-request-failed"))},Nn(`https://apis.google.com/js/api.js?onload=${re}`).catch(Ve=>p(Ve))}G()}}).catch(h=>{throw Yc=null,h})}(y),Yc}const Eh=new nn(5e3,15e3),go={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function va(y){const h=y.config;ee(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?rn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=Qc.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function qo(){return qo=(0,g.Z)(function*(y){const h=yield ry(y),p=an().gapi;return ee(p,y,"internal-error"),h.open({where:document.body,url:va(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:go,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(R,G){yield v.restyle({setHideOnLeave:!1});const re=ye(y,"network-request-failed"),Ve=an().setTimeout(()=>{G(re)},Eh.get());function Ye(){an().clearTimeout(Ve),R(v)}v.ping(Ye).then(Ye,()=>{G(re)})});return function(R,G){return T.apply(this,arguments)}}()))}),qo.apply(this,arguments)}const sy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ed{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function bh(y,h,p,v,T,R){ee(y.config.authDomain,y,"auth-domain-config-required"),ee(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(h instanceof bs){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Ye]of Object.entries(R||{}))G[Ve]=Ye}if(h instanceof Fr){const Ve=h.getScopes().filter(Ye=>""!==Ye);Ve.length>0&&(G.scopes=Ve.join(","))}y.tenantId&&(G.tid=y.tenantId);const re=G;for(const Ve of Object.keys(re))void 0===re[Ve]&&delete re[Ve];return`${function ay({config:y}){return y.emulator?rn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(re).slice(1)}`}const Bs="webStorageSupport";class Ch extends class qp{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return q("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ch(h)}_finalizeEnroll(h,p,v){return function Vc(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function ma(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",Kt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uy=(()=>{class y{constructor(){}static assertion(p){return Ch._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var ly="@firebase/auth",Th="0.19.12";class zp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function js(){return window}function du(){return(du=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:T}=js();te(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Ea(h.sessionId),G={};return Wn()?G.ibi=T.packageName:_n()?G.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(G.appDisplayName=T.displayName),G.sessionId=R,bh(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(y){const{BuildInfo:h}=js(),p={};Wn()?p.iosBundleId=h.packageName:_n()?p.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Sl(y,p)})).apply(this,arguments)}function nd(){return(nd=(0,g.Z)(function*(y,h,p){const{cordova:v}=js();let T=()=>{};try{yield new Promise((R,G)=>{let re=null;function Ve(){var nt;R();const In=null===(nt=v.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof In&&In(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ye(){re||(re=window.setTimeout(()=>{G(ye(y,"redirect-cancelled-by-user"))},2e3))}function ft(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}h.addPassiveListener(Ve),document.addEventListener("resume",Ye,!1),_n()&&document.addEventListener("visibilitychange",ft,!1),T=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ft,!1),re&&window.clearTimeout(re)}})}finally{T()}})).apply(this,arguments)}function Ea(y){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,g.Z)(function*(y){const h=hu(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function hu(y){if(te(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function dy(y){(0,oe._registerComponent)(new ie.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=v.options;return((re,Ve)=>{ee(R&&!R.includes(":"),"invalid-api-key",{appName:re.name}),ee(!(null==G?void 0:G.includes(":")),"argument-error",{appName:re.name});const Ye={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oa(y)},ft=new Qr(re,Ve,Ye);return function se(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(ne);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(ft,p),ft})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ie.wA("auth-internal",h=>{const p=ke(h.getProvider("auth").getImmediate());return new zp(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(ly,Th,function cy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(ly,Th,"esm2017")}("Browser");class Mh extends Di{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Nl(y){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,g.Z)(function*(y){const h=yield kl()._get(Nh(y));return h&&(yield kl()._remove(Nh(y))),h})).apply(this,arguments)}function Ol(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function kl(){return ne(Rn)}function Nh(y){return le("authEvent",y.config.apiKey,y.name)}function id(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Fh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function sd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Yp(y=(0,O.z$)()){return!("file:"!==sd()&&"ionic:"!==sd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function mr(){try{const y=self.localStorage,h=Fo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Zo(y=(0,O.z$)()){return function my(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function yy(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return mo()&&(0,O.hl)()}return!1}function mo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ll(){return(function gy(){return"http:"===sd()||"https:"===sd()}()||(0,O.ru)()||Yp())&&!function od(){return(0,O.b$)()||(0,O.UG)()}()&&mr()&&!mo()}function Lh(){return Yp()&&"undefined"!=typeof document}function wa(){return(wa=(0,g.Z)(function*(){return!!Lh()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ci={LOCAL:"local",NONE:"none",SESSION:"session"},Ia=ee,Uh="persistence";function Da(y){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Vl(),p=le(Uh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Vl(){var y;try{return(null===(y=function Vh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const _y=ee;class ui{constructor(){this.browserResolver=ne(class zo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rr,this._completeRedirectFn=wn}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){var G;te(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const re=bh(h,p,v,vt(),T);return function td(y,h,p,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let re="";const Ve=Object.assign(Object.assign({},sy),{width:v.toString(),height:T.toString(),top:R,left:G}),Ye=(0,O.z$)().toLowerCase();p&&(re=cr(Ye)?"_blank":p),dt(Ye)&&(h=h||"http://localhost",Ve.scrollbars="yes");const ft=Object.entries(Ve).reduce((In,[Ui,Bl])=>`${In}${Ui}=${Bl},`,"");if(function Fa(y=(0,O.z$)()){var h;return Wn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ye)&&"_self"!==re)return function Dh(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",re),new ed(null);const nt=window.open(h||"",re,ft);ee(nt,y,"popup-blocked");try{nt.focus()}catch(In){}return new ed(nt)}(h,re,Fo())})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function vh(y){an().location.href=y}(bh(h,p,v,vt(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(te(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function iy(y){return qo.apply(this,arguments)}(h),T=new Di(h);return v.register("authEvent",R=>(ee(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Bs,{type:Bs},T=>{var R;const G=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Bs];void 0!==G&&p(!!G),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ey(y){return os.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Zi()||jt()||Wn()}}),this.cordovaResolver=ne(class Ph{constructor(){this._redirectPersistence=rr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wn}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new Mh(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){!function rd(y){var h,p,v,T,R,G,re,Ve,Ye,ft;const nt=js();ee("function"==typeof(null===(h=null==nt?void 0:nt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(p=null==nt?void 0:nt.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(R=null===(T=null===(v=null==nt?void 0:nt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Ve=null===(re=null===(G=null==nt?void 0:nt.cordova)||void 0===G?void 0:G.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(ft=null===(Ye=null==nt?void 0:nt.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ft?void 0:ft.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function uu(){Vi.clear()}(),yield R._originValidation(h);const re=function Rh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Ol(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,v,T);yield function _0(y,h){return kl()._set(Nh(y),h)}(h,re);const Ve=yield function Ah(y,h,p){return du.apply(this,arguments)}(h,re,p),Ye=yield function Rl(y){const{cordova:h}=js();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Js(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Ve);return function Wp(y,h,p){return nd.apply(this,arguments)}(h,G,Ye)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Sh(y){return bi.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=js(),G=setTimeout((0,g.Z)(function*(){yield Nl(h),p.onEvent(Fh())}),500),re=function(){var ft=(0,g.Z)(function*(nt){clearTimeout(G);const In=yield Nl(h);let Ui=null;In&&(null==nt?void 0:nt.url)&&(Ui=function fy(y,h){var p,v;const T=function Pl(y){const h=id(y),p=h.link?decodeURIComponent(h.link):void 0,v=id(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return id(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const R=id(T),G=R.firebaseError?function Oh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,re=null===(v=null===(p=null==G?void 0:G.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Ve=re?ye(re):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(In,nt.url)),p.onEvent(Ui||Fh())});return function(In){return ft.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,re);const Ve=T,Ye=`${R.packageName.toLowerCase()}://`;js().handleOpenURL=function(){var ft=(0,g.Z)(function*(nt){if(nt.toLowerCase().startsWith(Ye)&&re({url:nt}),"function"==typeof Ve)try{Ve(nt)}catch(In){console.error(In)}});return function(nt){return ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=rr,this._completeRedirectFn=wn}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Lh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _y(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Ar(){return wa.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Xp(y){return y.unwrap()}function ba(y){return eg(y)}function eg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ii.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=ua;break;case"facebook.com":v=to;break;case"github.com":v=xc;break;case"twitter.com":v=Ha;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:re,nonce:Ve}=h;return R||G||T||re?re?p.startsWith("saml.")?ei._create(p,re):Qi._fromParams({providerId:p,signInMethod:p,pendingToken:re,idToken:T,accessToken:R}):new Ro(p).credential({idToken:T,accessToken:R,rawNonce:Ve}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function yr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Ey(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new wy(y,function ru(y,h){var p;const v=(0,O.m9)(y),T=h;return ee(h.customData.operationType,v,"argument-error"),ee(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),pa._fromError(v,T)}(y,h));else if(v){const T=eg(h),R=h;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:ba(p),additionalUserInfo:fr(p),user:yo.getOrCreate(T)}})}function jh(y,h){return $h.apply(this,arguments)}function $h(){return($h=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>yr(y,p.confirm(v))}})).apply(this,arguments)}class wy{constructor(h,p){this.resolver=p,this.auth=function vy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return yr(Xp(this.auth),this.resolver.resolveSignIn(h))}}class yo{constructor(h){this._delegate=h,this.multiFactor=function Uc(y){const h=(0,O.m9)(y);return Po.has(h)||Po.set(h,ts._fromUser(h)),Po.get(h)}(h)}static getOrCreate(h){return yo.USER_MAP.has(h)||yo.USER_MAP.set(h,new yo(h)),yo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return yr(p.auth,mi(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return jh(v.auth,function vl(y,h,p){return $o.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return yr(p.auth,function Fi(y,h,p){return au.apply(this,arguments)}(p._delegate,h,ui))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Da(ke(p.auth)),function Ke(y,h,p){return function yt(y,h,p){return Ct.apply(this,arguments)}(y,h,p)}(p._delegate,h,ui)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return yr(p.auth,As(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return jh(this.auth,function $p(y,h,p){return El.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return yr(this.auth,function lo(y,h,p){return ou.apply(this,arguments)}(this._delegate,h,ui))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Da(ke(p.auth)),function X(y,h,p){return function Ae(y,h,p){return Se.apply(this,arguments)}(y,h,p)}(p._delegate,h,ui)})()}sendEmailVerification(h){return function yi(y,h){return al.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function la(y,h){return el.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function cl(y,h){return dl((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Oc(y,h){return dl((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function wl(y,h){return ss.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function fa(y,h){return ll.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function tu(y,h,p){return nu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yo.USER_MAP=new WeakMap;const Ul=ee;let Hh=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Ul(T,"invalid-api-key",{appName:p.name}),Ul(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?ui:void 0;this._delegate=v.initialize({options:{persistence:Iy(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function on(y,h,p){const v=ke(y);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=er(h),{host:G,port:re}=function vs(y){const h=er(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:On(v.substr(R.length+1))}}{const[R,G]=v.split(":");return{host:R,port:On(G)}}}(h);v.config.emulator={url:`${R}//${G}${null===re?"":`:${re}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:re,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ri(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function nl(y,h){return we.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Mt(this._delegate,p)}confirmPasswordReset(p,v){return function Ja(y,h,p){return tl.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return yr(T._delegate,function ko(y,h,p){return Ur.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function eu(y,h){return Rs.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function ol(y,h){const p=eo.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Ul(Ll(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Et(y,h){return Ln.apply(this,arguments)}(p._delegate,ui);return v?yr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Kp(y,h){ke(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:R,error:G,complete:re}=Gh(p,v,T);return this._delegate.onAuthStateChanged(R,G,re)}onIdTokenChanged(p,v,T){const{next:R,error:G,complete:re}=Gh(p,v,T);return this._delegate.onIdTokenChanged(R,G,re)}sendSignInLinkToEmail(p,v){return function sl(y,h,p){return Nc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Ya(y,h,p){return Qa.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function Qp(y,h){Ia(Object.values(Ci).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Ia(h!==Ci.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Ia(h===Ci.NONE,y,"unsupported-persistence-type"):mo()?Ia(h===Ci.NONE||h===Ci.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Ia(h===Ci.NONE||mr(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Ci.SESSION:T=rr;break;case Ci.LOCAL:T=(yield ne(vi)._isAvailable())?vi:Rn;break;case Ci.NONE:T=$;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return yr(this._delegate,function qa(y){return Mc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return yr(this._delegate,xn(this._delegate,p))}signInWithCustomToken(p){return yr(this._delegate,function Ss(y,h){return xs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return yr(this._delegate,function il(y,h,p){return xn((0,O.m9)(y),Xu.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return yr(this._delegate,function Xa(y,h,p){return Ms.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return jh(this._delegate,function su(y,h,p){return mn.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Ul(Ll(),v._delegate,"operation-not-supported-in-this-environment"),yr(v._delegate,function Us(y,h,p){return Wc.apply(this,arguments)}(v._delegate,p,ui))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Ul(Ll(),v._delegate,"operation-not-supported-in-this-environment"),yield Da(v._delegate),function x(y,h,p){return function F(y,h,p){return z.apply(this,arguments)}(y,h,p)}(v._delegate,p,ui)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function fn(y,h){return Oo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ci,y})();function Gh(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:G=>T(G&&yo.getOrCreate(G)),error:h,complete:p}}function Iy(y,h){const p=function Jp(y,h){const p=Vl();if(!p)return[];const v=le(Uh,y,h);switch(p.getItem(v)){case Ci.NONE:return[$];case Ci.LOCAL:return[vi,rr];case Ci.SESSION:return[rr];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(vi)&&p.push(vi),"undefined"!=typeof window)for(const v of[Rn,rr])p.includes(v)||p.push(v);return p.includes($)||p.push($),p}class qh{constructor(){this.providerId="phone",this._delegate=new Ii(Xp(Z.Z.auth()))}static credential(h,p){return Ii.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}qh.PHONE_SIGN_IN_METHOD=Ii.PHONE_SIGN_IN_METHOD,qh.PROVIDER_ID=Ii.PROVIDER_ID;const Dy=ee;class by{constructor(h,p,v=Z.Z.app()){var T;Dy(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new jp(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tg(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Hh(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Xu,FacebookAuthProvider:to,GithubAuthProvider:xc,GoogleAuthProvider:ua,OAuthProvider:Ro,SAMLAuthProvider:ti,PhoneAuthProvider:qh,PhoneMultiFactorGenerator:uy,RecaptchaVerifier:by,TwitterAuthProvider:Ha,Auth:Hh,AuthCredential:Xt,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(Z.Z)},8306:(rt,Ce,k)=>{k.d(Ce,{y:()=>B});var g=k(2961),Z=k(727),O=k(8822),oe=k(4671);var ie=k(2416),de=k(576),ue=k(2806);let B=(()=>{class Te{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const he=new Te;return he.source=this,he.operator=Pe,he}subscribe(Pe,he,Ee){const Je=function Ge(Te){return Te&&Te instanceof g.Lv||function Y(Te){return Te&&(0,de.m)(Te.next)&&(0,de.m)(Te.error)&&(0,de.m)(Te.complete)}(Te)&&(0,Z.Nn)(Te)}(Pe)?Pe:new g.Hp(Pe,he,Ee);return(0,ue.x)(()=>{const{operator:ze,source:De}=this;Je.add(ze?ze.call(Je,De):De?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(he){Pe.error(he)}}forEach(Pe,he){return new(he=j(he))((Ee,Je)=>{const ze=new g.Hp({next:De=>{try{Pe(De)}catch(ye){Je(ye),ze.unsubscribe()}},error:Je,complete:Ee});this.subscribe(ze)})}_subscribe(Pe){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Pe)}[O.L](){return this}pipe(...Pe){return function pe(Te){return 0===Te.length?oe.y:1===Te.length?Te[0]:function(Pe){return Te.reduce((he,Ee)=>Ee(he),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=j(Pe))((he,Ee)=>{let Je;this.subscribe(ze=>Je=ze,ze=>Ee(ze),()=>he(Je))})}}return Te.create=Oe=>new Te(Oe),Te})();function j(Te){var Oe;return null!==(Oe=null!=Te?Te:ie.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(rt,Ce,k)=>{k.d(Ce,{x:()=>ie});var g=k(8306),Z=k(727);const oe=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),pe=k(2806);let ie=(()=>{class ue extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Y=new de(this,this);return Y.operator=j,Y}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Y}=this;for(;Y.length;)Y.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Y,isStopped:Ge,observers:Te}=this;return Y||Ge?Z.Lc:(this.currentObservers=null,Te.push(j),new Z.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Y,thrownError:Ge,isStopped:Te}=this;Y?j.error(Ge):Te&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ue.create=(B,j)=>new de(B,j),ue})();class de extends ie{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Y||Y.call(j,B)}error(B){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Y||Y.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Y;return null!==(Y=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Y?Y:Z.Lc}}},2961:(rt,Ce,k)=>{k.d(Ce,{Hp:()=>Pe,Lv:()=>Y});var g=k(576),Z=k(727),O=k(2416),oe=k(7849);function J(){}const pe=ue("C",void 0,void 0);function ue(De,ye,ve){return{kind:De,value:ye,error:ve}}var B=k(3410),j=k(2806);class Y extends Z.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,Z.Nn)(ye)&&ye.add(this)):this.destination=ze}static create(ye,ve,$e){return new Pe(ye,ve,$e)}next(ye){this.isStopped?Je(function de(De){return ue("N",De,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Je(function ie(De){return ue("E",void 0,De)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Je(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Te(De,ye){return Ge.call(De,ye)}class Oe{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:ve}=this;if(ve.next)try{ve.next(ye)}catch($e){he($e)}}error(ye){const{partialObserver:ve}=this;if(ve.error)try{ve.error(ye)}catch($e){he($e)}else he(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(ve){he(ve)}}}class Pe extends Y{constructor(ye,ve,$e){let je;if(super(),(0,g.m)(ye)||!ye)je={next:null!=ye?ye:void 0,error:null!=ve?ve:void 0,complete:null!=$e?$e:void 0};else{let ee;this&&O.v.useDeprecatedNextContext?(ee=Object.create(ye),ee.unsubscribe=()=>this.unsubscribe(),je={next:ye.next&&Te(ye.next,ee),error:ye.error&&Te(ye.error,ee),complete:ye.complete&&Te(ye.complete,ee)}):je=ye}this.destination=new Oe(je)}}function he(De){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,oe.h)(De)}function Je(De,ye){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(De,ye))}const ze={closed:!0,next:J,error:function Ee(De){throw De},complete:J}},727:(rt,Ce,k)=>{k.d(Ce,{Lc:()=>pe,w0:()=>J,Nn:()=>ie});var g=k(576);const O=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Y,Ge)=>`${Ge+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Y}=this;if((0,g.m)(Y))try{Y()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Te of Ge)try{de(Te)}catch(Oe){B=null!=B?B:[],Oe instanceof O?B=[...B,...Oe.errors]:B.push(Oe)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ue=new J;return ue.closed=!0,ue})();const pe=J.EMPTY;function ie(ue){return ue instanceof J||ue&&"closed"in ue&&(0,g.m)(ue.remove)&&(0,g.m)(ue.add)&&(0,g.m)(ue.unsubscribe)}function de(ue){(0,g.m)(ue)?ue():ue.unsubscribe()}},2416:(rt,Ce,k)=>{k.d(Ce,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(rt,Ce,k)=>{k.d(Ce,{E:()=>Z});const Z=new(k(8306).y)(J=>J.complete())},8996:(rt,Ce,k)=>{k.d(Ce,{D:()=>ye});var g=k(8421),Z=k(5363),O=k(9468),pe=k(8306),de=k(2202),ue=k(576),B=k(9672);function Y(ve,$e){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(je=>{(0,B.f)(je,$e,()=>{const ee=ve[Symbol.asyncIterator]();(0,B.f)(je,$e,()=>{ee.next().then(q=>{q.done?je.complete():je.next(q.value)})},0,!0)})})}var Ge=k(3670),Te=k(8239),Oe=k(1144),Pe=k(6495),he=k(2206),Ee=k(4532),Je=k(3260);function ye(ve,$e){return $e?function De(ve,$e){if(null!=ve){if((0,Ge.c)(ve))return function oe(ve,$e){return(0,g.Xf)(ve).pipe((0,O.R)($e),(0,Z.Q)($e))}(ve,$e);if((0,Oe.z)(ve))return function ie(ve,$e){return new pe.y(je=>{let ee=0;return $e.schedule(function(){ee===ve.length?je.complete():(je.next(ve[ee++]),je.closed||this.schedule())})})}(ve,$e);if((0,Te.t)(ve))return function J(ve,$e){return(0,g.Xf)(ve).pipe((0,O.R)($e),(0,Z.Q)($e))}(ve,$e);if((0,he.D)(ve))return Y(ve,$e);if((0,Pe.T)(ve))return function j(ve,$e){return new pe.y(je=>{let ee;return(0,B.f)(je,$e,()=>{ee=ve[de.h](),(0,B.f)(je,$e,()=>{let q,te;try{({value:q,done:te}=ee.next())}catch(ge){return void je.error(ge)}te?je.complete():je.next(q)},0,!0)}),()=>(0,ue.m)(null==ee?void 0:ee.return)&&ee.return()})}(ve,$e);if((0,Je.L)(ve))return function ze(ve,$e){return Y((0,Je.Q)(ve),$e)}(ve,$e)}throw(0,Ee.z)(ve)}(ve,$e):(0,g.Xf)(ve)}},8421:(rt,Ce,k)=>{k.d(Ce,{Xf:()=>Ge});var g=k(655),Z=k(1144),O=k(8239),oe=k(8306),J=k(3670),pe=k(2206),ie=k(4532),de=k(6495),ue=k(3260),B=k(576),j=k(7849),Y=k(8822);function Ge(De){if(De instanceof oe.y)return De;if(null!=De){if((0,J.c)(De))return function Te(De){return new oe.y(ye=>{const ve=De[Y.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Z.z)(De))return function Oe(De){return new oe.y(ye=>{for(let ve=0;ve<De.length&&!ye.closed;ve++)ye.next(De[ve]);ye.complete()})}(De);if((0,O.t)(De))return function Pe(De){return new oe.y(ye=>{De.then(ve=>{ye.closed||(ye.next(ve),ye.complete())},ve=>ye.error(ve)).then(null,j.h)})}(De);if((0,pe.D)(De))return Ee(De);if((0,de.T)(De))return function he(De){return new oe.y(ye=>{for(const ve of De)if(ye.next(ve),ye.closed)return;ye.complete()})}(De);if((0,ue.L)(De))return function Je(De){return Ee((0,ue.Q)(De))}(De)}throw(0,ie.z)(De)}function Ee(De){return new oe.y(ye=>{(function ze(De,ye){var ve,$e,je,ee;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ve=(0,g.KL)(De);!($e=yield ve.next()).done;)if(ye.next($e.value),ye.closed)return}catch(q){je={error:q}}finally{try{$e&&!$e.done&&(ee=ve.return)&&(yield ee.call(ve))}finally{if(je)throw je.error}}ye.complete()})})(De,ye).catch(ve=>ye.error(ve))})}},6451:(rt,Ce,k)=>{k.d(Ce,{T:()=>pe});var g=k(8189),Z=k(8421),O=k(515),oe=k(7669),J=k(8996);function pe(...ie){const de=(0,oe.yG)(ie),ue=(0,oe._6)(ie,1/0),B=ie;return B.length?1===B.length?(0,Z.Xf)(B[0]):(0,g.J)(ue)((0,J.D)(B,de)):O.E}},5403:(rt,Ce,k)=>{k.d(Ce,{x:()=>Z});var g=k(2961);function Z(oe,J,pe,ie,de){return new O(oe,J,pe,ie,de)}class O extends g.Lv{constructor(J,pe,ie,de,ue,B){super(J),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=pe?function(j){try{pe(j)}catch(Y){J.error(Y)}}:super._next,this._error=de?function(j){try{de(j)}catch(Y){J.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(rt,Ce,k)=>{k.d(Ce,{U:()=>O});var g=k(4482),Z=k(5403);function O(oe,J){return(0,g.e)((pe,ie)=>{let de=0;pe.subscribe((0,Z.x)(ie,ue=>{ie.next(oe.call(J,ue,de++))}))})}},8189:(rt,Ce,k)=>{k.d(Ce,{J:()=>O});var g=k(5577),Z=k(4671);function O(oe=1/0){return(0,g.z)(Z.y,oe)}},5577:(rt,Ce,k)=>{k.d(Ce,{z:()=>de});var g=k(4004),Z=k(8421),O=k(4482),oe=k(9672),J=k(5403),ie=k(576);function de(ue,B,j=1/0){return(0,ie.m)(B)?de((Y,Ge)=>(0,g.U)((Te,Oe)=>B(Y,Te,Ge,Oe))((0,Z.Xf)(ue(Y,Ge))),j):("number"==typeof B&&(j=B),(0,O.e)((Y,Ge)=>function pe(ue,B,j,Y,Ge,Te,Oe,Pe){const he=[];let Ee=0,Je=0,ze=!1;const De=()=>{ze&&!he.length&&!Ee&&B.complete()},ye=$e=>Ee<Y?ve($e):he.push($e),ve=$e=>{Te&&B.next($e),Ee++;let je=!1;(0,Z.Xf)(j($e,Je++)).subscribe((0,J.x)(B,ee=>{null==Ge||Ge(ee),Te?ye(ee):B.next(ee)},()=>{je=!0},void 0,()=>{if(je)try{for(Ee--;he.length&&Ee<Y;){const ee=he.shift();Oe?(0,oe.f)(B,Oe,()=>ve(ee)):ve(ee)}De()}catch(ee){B.error(ee)}}))};return ue.subscribe((0,J.x)(B,ye,()=>{ze=!0,De()})),()=>{null==Pe||Pe()}}(Y,Ge,ue,j)))}},5363:(rt,Ce,k)=>{k.d(Ce,{Q:()=>oe});var g=k(9672),Z=k(4482),O=k(5403);function oe(J,pe=0){return(0,Z.e)((ie,de)=>{ie.subscribe((0,O.x)(de,ue=>(0,g.f)(de,J,()=>de.next(ue),pe),()=>(0,g.f)(de,J,()=>de.complete(),pe),ue=>(0,g.f)(de,J,()=>de.error(ue),pe)))})}},3099:(rt,Ce,k)=>{k.d(Ce,{B:()=>pe});var g=k(8996),Z=k(5698),O=k(7579),oe=k(2961),J=k(4482);function pe(de={}){const{connector:ue=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Y=!0}=de;return Ge=>{let Te=null,Oe=null,Pe=null,he=0,Ee=!1,Je=!1;const ze=()=>{null==Oe||Oe.unsubscribe(),Oe=null},De=()=>{ze(),Te=Pe=null,Ee=Je=!1},ye=()=>{const ve=Te;De(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,$e)=>{he++,!Je&&!Ee&&ze();const je=Pe=null!=Pe?Pe:ue();$e.add(()=>{he--,0===he&&!Je&&!Ee&&(Oe=ie(ye,Y))}),je.subscribe($e),Te||(Te=new oe.Hp({next:ee=>je.next(ee),error:ee=>{Je=!0,ze(),Oe=ie(De,B,ee),je.error(ee)},complete:()=>{Ee=!0,ze(),Oe=ie(De,j),je.complete()}}),(0,g.D)(ve).subscribe(Te))})(Ge)}}function ie(de,ue,...B){return!0===ue?(de(),null):!1===ue?null:ue(...B).pipe((0,Z.q)(1)).subscribe(()=>de())}},9468:(rt,Ce,k)=>{k.d(Ce,{R:()=>Z});var g=k(4482);function Z(O,oe=0){return(0,g.e)((J,pe)=>{pe.add(O.schedule(()=>J.subscribe(pe),oe))})}},5698:(rt,Ce,k)=>{k.d(Ce,{q:()=>oe});var g=k(515),Z=k(4482),O=k(5403);function oe(J){return J<=0?()=>g.E:(0,Z.e)((pe,ie)=>{let de=0;pe.subscribe((0,O.x)(ie,ue=>{++de<=J&&(ie.next(ue),J<=de&&ie.complete())}))})}},8505:(rt,Ce,k)=>{k.d(Ce,{b:()=>J});var g=k(576),Z=k(4482),O=k(5403),oe=k(4671);function J(pe,ie,de){const ue=(0,g.m)(pe)||ie||de?{next:pe,error:ie,complete:de}:pe;return ue?(0,Z.e)((B,j)=>{var Y;null===(Y=ue.subscribe)||void 0===Y||Y.call(ue);let Ge=!0;B.subscribe((0,O.x)(j,Te=>{var Oe;null===(Oe=ue.next)||void 0===Oe||Oe.call(ue,Te),j.next(Te)},()=>{var Te;Ge=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var Oe;Ge=!1,null===(Oe=ue.error)||void 0===Oe||Oe.call(ue,Te),j.error(Te)},()=>{var Te,Oe;Ge&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(Oe=ue.finalize)||void 0===Oe||Oe.call(ue)}))}):oe.y}},4408:(rt,Ce,k)=>{k.d(Ce,{o:()=>J});var g=k(727);class Z extends g.w0{constructor(ie,de){super()}schedule(ie,de=0){return this}}const O={setInterval(pe,ie,...de){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,ie,...de):setInterval(pe,ie,...de)},clearInterval(pe){const{delegate:ie}=O;return((null==ie?void 0:ie.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=k(8737);class J extends Z{constructor(ie,de){super(ie,de),this.scheduler=ie,this.work=de,this.pending=!1}schedule(ie,de=0){if(this.closed)return this;this.state=ie;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(B,this.id,de),this}requestAsyncId(ie,de,ue=0){return O.setInterval(ie.flush.bind(ie,this),ue)}recycleAsyncId(ie,de,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return de;O.clearInterval(de)}execute(ie,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ie,de);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,de){let B,ue=!1;try{this.work(ie)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ie,scheduler:de}=this,{actions:ue}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=ie&&(this.id=this.recycleAsyncId(de,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(rt,Ce,k)=>{k.d(Ce,{v:()=>O});var g=k(6063);class Z{constructor(J,pe=Z.now){this.schedulerActionCtor=J,this.now=pe}schedule(J,pe=0,ie){return new this.schedulerActionCtor(this,J).schedule(ie,pe)}}Z.now=g.l.now;class O extends Z{constructor(J,pe=Z.now){super(J,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:pe}=this;if(this._active)return void pe.push(J);let ie;this._active=!0;do{if(ie=J.execute(J.state,J.delay))break}while(J=pe.shift());if(this._active=!1,ie){for(;J=pe.shift();)J.unsubscribe();throw ie}}}},4986:(rt,Ce,k)=>{k.d(Ce,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(rt,Ce,k)=>{k.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(rt,Ce,k)=>{k.d(Ce,{z:()=>g});const g={setTimeout(Z,O,...oe){const{delegate:J}=g;return(null==J?void 0:J.setTimeout)?J.setTimeout(Z,O,...oe):setTimeout(Z,O,...oe)},clearTimeout(Z){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(rt,Ce,k)=>{k.d(Ce,{h:()=>Z});const Z=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,Ce,k)=>{k.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(rt,Ce,k)=>{k.d(Ce,{_6:()=>pe,jO:()=>oe,yG:()=>J});var g=k(576);function O(ie){return ie[ie.length-1]}function oe(ie){return(0,g.m)(O(ie))?ie.pop():void 0}function J(ie){return function Z(ie){return ie&&(0,g.m)(ie.schedule)}(O(ie))?ie.pop():void 0}function pe(ie,de){return"number"==typeof O(ie)?ie.pop():de}},8737:(rt,Ce,k)=>{function g(Z,O){if(Z){const oe=Z.indexOf(O);0<=oe&&Z.splice(oe,1)}}k.d(Ce,{P:()=>g})},3888:(rt,Ce,k)=>{function g(Z){const oe=Z(J=>{Error.call(J),J.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Ce,{d:()=>g})},2806:(rt,Ce,k)=>{k.d(Ce,{O:()=>oe,x:()=>O});var g=k(2416);let Z=null;function O(J){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!Z;if(pe&&(Z={errorThrown:!1,error:null}),J(),pe){const{errorThrown:ie,error:de}=Z;if(Z=null,ie)throw de}}else J()}function oe(J){g.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=J)}},9672:(rt,Ce,k)=>{function g(Z,O,oe,J=0,pe=!1){const ie=O.schedule(function(){oe(),pe?Z.add(this.schedule(null,J)):this.unsubscribe()},J);if(Z.add(ie),!pe)return ie}k.d(Ce,{f:()=>g})},4671:(rt,Ce,k)=>{function g(Z){return Z}k.d(Ce,{y:()=>g})},1144:(rt,Ce,k)=>{k.d(Ce,{z:()=>g});const g=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(rt,Ce,k)=>{k.d(Ce,{D:()=>Z});var g=k(576);function Z(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(rt,Ce,k)=>{function g(Z){return"function"==typeof Z}k.d(Ce,{m:()=>g})},3670:(rt,Ce,k)=>{k.d(Ce,{c:()=>O});var g=k(8822),Z=k(576);function O(oe){return(0,Z.m)(oe[g.L])}},6495:(rt,Ce,k)=>{k.d(Ce,{T:()=>O});var g=k(2202),Z=k(576);function O(oe){return(0,Z.m)(null==oe?void 0:oe[g.h])}},8239:(rt,Ce,k)=>{k.d(Ce,{t:()=>Z});var g=k(576);function Z(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(rt,Ce,k)=>{k.d(Ce,{L:()=>oe,Q:()=>O});var g=k(655),Z=k(576);function O(J){return(0,g.FC)(this,arguments,function*(){const ie=J.getReader();try{for(;;){const{value:de,done:ue}=yield(0,g.qq)(ie.read());if(ue)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{ie.releaseLock()}})}function oe(J){return(0,Z.m)(null==J?void 0:J.getReader)}},4482:(rt,Ce,k)=>{k.d(Ce,{A:()=>Z,e:()=>O});var g=k(576);function Z(oe){return(0,g.m)(null==oe?void 0:oe.lift)}function O(oe){return J=>{if(Z(J))return J.lift(function(pe){try{return oe(pe,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(rt,Ce,k)=>{k.d(Ce,{h:()=>O});var g=k(2416),Z=k(3410);function O(oe){Z.z.setTimeout(()=>{const{onUnhandledError:J}=g.v;if(!J)throw oe;J(oe)})}},4532:(rt,Ce,k)=>{function g(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>g})},655:(rt,Ce,k)=>{function oe(q,te){var ge={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&te.indexOf(ne)<0&&(ge[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(ne=Object.getOwnPropertySymbols(q);Me<ne.length;Me++)te.indexOf(ne[Me])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Me])&&(ge[ne[Me]]=q[ne[Me]])}return ge}function de(q,te,ge,ne){return new(ge||(ge=Promise))(function(se,vt){function Zt(ct){try{it(ne.next(ct))}catch(nn){vt(nn)}}function An(ct){try{it(ne.throw(ct))}catch(nn){vt(nn)}}function it(ct){ct.done?se(ct.value):function Me(se){return se instanceof ge?se:new ge(function(vt){vt(se)})}(ct.value).then(Zt,An)}it((ne=ne.apply(q,te||[])).next())})}function he(q){return this instanceof he?(this.v=q,this):new he(q)}function Ee(q,te,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ne=ge.apply(q,te||[]),se=[];return Me={},vt("next"),vt("throw"),vt("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function vt(rn){ne[rn]&&(Me[rn]=function(pi){return new Promise(function(Jt,qi){se.push([rn,pi,Jt,qi])>1||Zt(rn,pi)})})}function Zt(rn,pi){try{!function An(rn){rn.value instanceof he?Promise.resolve(rn.value.v).then(it,ct):nn(se[0][2],rn)}(ne[rn](pi))}catch(Jt){nn(se[0][3],Jt)}}function it(rn){Zt("next",rn)}function ct(rn){Zt("throw",rn)}function nn(rn,pi){rn(pi),se.shift(),se.length&&Zt(se[0][0],se[0][1])}}function ze(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,te=q[Symbol.asyncIterator];return te?te.call(q):(q=function Y(q){var te="function"==typeof Symbol&&Symbol.iterator,ge=te&&q[te],ne=0;if(ge)return ge.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ge={},ne("next"),ne("throw"),ne("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ne(se){ge[se]=q[se]&&function(vt){return new Promise(function(Zt,An){!function Me(se,vt,Zt,An){Promise.resolve(An).then(function(it){se({value:it,done:Zt})},vt)}(Zt,An,(vt=q[se](vt)).done,vt.value)})}}}k.d(Ce,{FC:()=>Ee,KL:()=>ze,_T:()=>oe,mG:()=>de,qq:()=>he})},5e3:(rt,Ce,k)=>{k.d(Ce,{$8M:()=>Bo,$Z:()=>C_,AFp:()=>aI,ALo:()=>ac,AaK:()=>de,CHM:()=>rl,CRH:()=>op,CZH:()=>Tv,CqO:()=>S_,EJc:()=>Hb,EpF:()=>xd,F4k:()=>di,FYo:()=>Jf,FiY:()=>ai,G48:()=>_I,GfV:()=>Mw,Gpc:()=>j,JOm:()=>re,LFG:()=>Ke,LSH:()=>fu,Lbi:()=>jb,NdJ:()=>Yl,O4$:()=>Lc,OlP:()=>gn,Oqu:()=>Rf,PXZ:()=>zb,Q6J:()=>jg,QGY:()=>Gg,Qsj:()=>Sw,R0b:()=>hs,RDi:()=>Ji,Rgc:()=>Zd,SBq:()=>Yf,Sil:()=>lI,Suo:()=>zw,TTD:()=>to,TgZ:()=>$g,VLi:()=>Ov,X6Q:()=>Om,XFs:()=>st,Xpm:()=>xt,Y36:()=>Td,YKP:()=>ep,YNc:()=>CE,Yjl:()=>cr,Yz7:()=>Jt,ZZ4:()=>Zv,_Bn:()=>Pu,_UZ:()=>T_,_Vd:()=>dm,_c5:()=>sC,_uU:()=>Xg,aQg:()=>vp,c2e:()=>fe,cJS:()=>Kt,cg1:()=>sm,dDg:()=>nh,deG:()=>Vp,dqk:()=>Pt,eFA:()=>fI,ekj:()=>Nd,g9A:()=>Sv,h0i:()=>ka,hGG:()=>ah,hij:()=>Nf,iGM:()=>qw,ifc:()=>Vt,ip1:()=>oI,kL8:()=>Z_,lG2:()=>jt,lcZ:()=>fv,n5z:()=>qc,oAB:()=>K,oxw:()=>Md,q4F:()=>Rw,qLn:()=>yr,qOj:()=>g_,qZA:()=>xa,sBO:()=>Lv,sIi:()=>ql,s_b:()=>ip,soG:()=>ds,tBr:()=>Tr,tb:()=>xv,tp0:()=>fo,uIk:()=>Ag,vHH:()=>Oe,vpe:()=>Zs,wAp:()=>pt,xi3:()=>Wd,xp6:()=>Uy,z2F:()=>fp,zSh:()=>Ig,zs3:()=>Qo});var g=k(7579),Z=k(727),O=k(8306),oe=k(6451),J=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function ie(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return de(this())},i}function Y(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Oe extends Error{constructor(s,a){super(function Pe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function ye(i,s){const a=s?` in ${s}`:"";throw new Oe(-201,`No provider for ${Ee(i)} found${a}`)}function it(i,s){null==i&&function ct(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Kt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Lt(i){return Qn(i,xi)||Qn(i,zi)}function Qn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Dr(i){return i&&(i.hasOwnProperty(br)||i.hasOwnProperty(Wi))?i[br]:null}const xi=pe({\u0275prov:pe}),br=pe({\u0275inj:pe}),zi=pe({ngInjectableDef:pe}),Wi=pe({ngInjectorDef:pe});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let kr;function Un(i){const s=kr;return kr=i,s}function Yr(i,s,a){const u=Lt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&st.Optional?null:void 0!==s?s:void ye(de(i),"Injector")}function hn(i){return{toString:i}.toString()}var zn=(()=>((zn=zn||{})[zn.OnPush=0]="OnPush",zn[zn.Default=1]="Default",zn))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const et="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,Jn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=et||"undefined"!=typeof global&&global||gt||Jn,Xn={},at=[],lr=pe({\u0275cmp:pe}),Nt=pe({\u0275dir:pe}),We=pe({\u0275pipe:pe}),be=pe({\u0275mod:pe}),Ze=pe({\u0275fac:pe}),ut=pe({__NG_ELEMENT_ID__:pe});let kt=0;function xt(i){return hn(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===zn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return u.id+=kt++,u.inputs=dt(i.inputs,a),u.outputs=dt(i.outputs),f&&f.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,u})}function L(i){return Ut(i)||function _n(i){return i[Nt]||null}(i)}function $(i){return function Dt(i){return i[We]||null}(i)}const le={};function K(i){return hn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),s})}function dt(i,s){if(null==i)return Xn;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=u,s&&(s[c]=f)}return a}const jt=xt;function cr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[lr]||null}function sn(i,s){const a=i[be]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function gi(i){return Array.isArray(i)&&"object"==typeof i[1]}function Xr(i){return Array.isArray(i)&&!0===i[1]}function bc(i){return 0!=(8&i.flags)}function Is(i){return 2==(2&i.flags)}function Ua(i){return 1==(1&i.flags)}function Pr(i){return null!==i.template}function ph(i){return 0!=(512&i[2])}function Fr(i,s){return i.hasOwnProperty(Ze)?i[Ze]:null}class Ro{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function to(){return ua}function ua(i){return i.type.prototype.ngOnChanges&&(i.setInput=Pp),xc}function xc(){const i=Cs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Xn)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Pp(i,s,a,u){const c=Cs(i)||function ti(i,s){return i[ei]=s}(i,{previous:Xn,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new Ro(I&&I.currentValue,s,_===Xn),i[u]=s}to.ngInherit=!0;const ei="__ngSimpleChanges__";function Cs(i){return i[ei]||null}let Wa;function Ji(i){Wa=i}function cn(i){return!!i.listen}const No={createRenderer:(i,s)=>function la(){return void 0!==Wa?Wa:"undefined"!=typeof document?document:void 0}()};function tn(i){for(;Array.isArray(i);)i=i[0];return i}function ro(i,s){return tn(s[i])}function dr(i,s){return tn(s[i.index])}function ca(i,s){return i.data[s]}function mi(i,s){return i[s]}function hr(i,s){const a=s[i];return gi(a)?a:a[0]}function As(i){return 4==(4&i[2])}function Xi(i){return 128==(128&i[2])}function Vr(i,s){return null==s?null:i[s]}function Ss(i){i[18]=0}function xs(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const lt={lFrame:so(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ja(){return lt.bindingsEnabled}function we(){return lt.lFrame.lView}function Mt(){return lt.lFrame.tView}function rl(i){return lt.lFrame.contextLView=i,i[8]}function fn(){let i=Oo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Oo(){return lt.lFrame.currentTNode}function Ur(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function il(){return lt.lFrame.isParent}function Xa(){return lt.isInCheckNoChangesMode}function Ms(i){lt.isInCheckNoChangesMode=i}function nr(){const i=lt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Rs(){return lt.lFrame.bindingIndex++}function nu(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ha(s)}function ha(i){lt.lFrame.currentDirectiveIndex=i}function ll(){return lt.lFrame.currentQueryIndex}function cl(i){lt.lFrame.currentQueryIndex=i}function Oc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function dl(i,s,a){if(a&st.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&st.Host||(c=Oc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const u=lt.lFrame=kc();return u.currentTNode=s,u.lView=i,!0}function io(i){const s=kc(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function kc(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?so(i):s}function so(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Pc(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Fc=Pc;function oo(){const i=Pc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function fr(){return lt.lFrame.selectedIndex}function Os(i){lt.lFrame.selectedIndex=i}function vn(){const i=lt.lFrame;return ca(i.tView,i.selectedIndex)}function Lc(){lt.lFrame.currentNamespace="svg"}function es(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function pa(i,s,a){Vc(i,s,3,a)}function ru(i,s,a,u){(3&i[2])===a&&Vc(i,s,a,u)}function Pn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Vc(i,s,a,u){const f=null!=u?u:-1,_=s.length-1;let E=0;for(let I=void 0!==u?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=u&&E>=u)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Fp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Fp(i,s,a,u){const c=a[u]<0,f=a[u+1],E=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Po{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function ht(i,s,a){const u=cn(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];u?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];Br(_)?u&&i.setProperty(s,_,E):u?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function rr(i){return 3===i||4===i||6===i}function Br(i){return 64===i.charCodeAt(0)}function jr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||Fo(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function Fo(i,s,a,u,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==c&&(i[f+1]=c));if(u===i[f+1])return void(i[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==c&&i.splice(f++,0,c)}function jc(i){return-1!==i}function an(i){return 32767&i}function _i(i,s){let a=function vh(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let iu=!0;function ri(i){const s=iu;return iu=i,s}let Hc=0;function Fn(i,s){const a=Lo(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,ns(u.data,i),ns(s,null),ns(u.blueprint,null));const c=ii(i,s),f=i.injectorIndex;if(jc(c)){const _=an(c),E=_i(c,s),I=E[1].data;for(let A=0;A<8;A++)s[f+A]=E[_+A]|I[_+A]}return s[f+8]=c,f}function ns(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Lo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ii(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(u=2===_?f.declTNode:1===_?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function ks(i,s,a){!function uo(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(ut)&&(u=a[ut]),null==u&&(u=a[ut]=Hc++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Ni(i,s,a){if(a&st.Optional)return i;ye(s,"NodeInjector")}function yl(i,s,a,u){if(a&st.Optional&&void 0===u&&(u=null),0==(a&(st.Self|st.Host))){const c=i[9],f=Un(void 0);try{return c?c.get(s,u,a&st.Optional):Yr(s,u,a&st.Optional)}finally{Un(f)}}return Ni(u,s,a)}function Ps(i,s,a,u=st.Default,c){if(null!==i){const f=function Uo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ut)?i[ut]:void 0;return"number"==typeof s?s>=0?255&s:_l:s}(a);if("function"==typeof f){if(!dl(s,i,u))return u&st.Host?Ni(c,a,u):yl(s,a,u,c);try{const _=f(u);if(null!=_||u&st.Optional)return _;ye(a)}finally{Fc()}}else if("number"==typeof f){let _=null,E=Lo(i,s),I=-1,A=u&st.Host?s[16][6]:null;for((-1===E||u&st.SkipSelf)&&(I=-1===E?ii(i,s):s[E+8],-1!==I&&Cr(u,!1)?(_=s[1],E=an(I),s=_i(I,s)):E=-1);-1!==E;){const S=s[1];if(ma(f,E,S.data)){const P=Gc(E,s,a,_,u,A);if(P!==Oi)return P}I=s[E+8],-1!==I&&Cr(u,s[1].data[E+8]===A)&&ma(f,E,s)?(_=S,E=an(I),s=_i(I,s)):E=-1}}}return yl(s,a,u,c)}const Oi={};function _l(){return new Ei(fn(),we())}function Gc(i,s,a,u,c,f){const _=s[1],E=_.data[i+8],S=Vo(E,_,a,null==u?Is(E)&&iu:u!=_&&0!=(3&E.type),c&st.Host&&f===E);return null!==S?vi(s,_,S,E):Oi}function Vo(i,s,a,u,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let W=u?E:E+S;W<V;W++){const me=_[W];if(W<I&&a===me||W>=I&&me.type===a)return W}if(c){const W=_[I];if(W&&Pr(W)&&W.type===a)return I}return null}function vi(i,s,a,u){let c=i[a];const f=s.data;if(function Uc(i){return i instanceof Po}(c)){const _=c;_.resolving&&function Je(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(f[a]));const E=ri(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Un(_.injectImpl):null;dl(i,u,st.Default);try{c=i[a]=_.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function pl(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const _=ua(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Un(I),ri(E),_.resolving=!1,Fc()}}return c}function ma(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Cr(i,s){return!(i&st.Self||i&st.Host&&s)}class Ei{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return Ps(this._tNode,this._lView,s,u,a)}}function qc(i){return hn(()=>{const s=i.prototype.constructor,a=s[Ze]||Nn(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const f=c[Ze]||Nn(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Nn(i){return Ge(i)?()=>{const s=Nn(Y(i));return s&&s()}:Fr(i)}function Bo(i){return function ga(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const f=a[c];if(rr(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(fn(),i)}const jo="__parameters__";function En(i,s,a){return hn(()=>{const u=function ki(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,A,S){const P=I.hasOwnProperty(jo)?I[jo]:Object.defineProperty(I,jo,{value:[]})[jo];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class gn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Vp=new gn("AnalyzeForEntryComponents");function gr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),gr(u,s)):s!==i&&s.push(u)}return s}function si(i,s){i.forEach(a=>Array.isArray(a)?si(a,s):s(a))}function wl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ss(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function jn(i,s,a){let u=Us(i,s);return u>=0?i[1|u]=a:(u=~u,function Il(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function Cl(i,s){const a=Us(i,s);if(a>=0)return i[1|a]}function Us(i,s){return function lo(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const f=u+(c-u>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:u=f+1}return~(c<<a)}(i,s,1)}const co={},Ho="__NG_DI_FLAG__",uu="ngTempTokenPath",b=/\n/gm,F="__source",z=pe({provide:String,useValue:pe});let X;function Ae(i){const s=X;return X=i,s}function Se(i,s=st.Default){if(void 0===X)throw new Oe(203,"");return null===X?Yr(i,void 0,s):X.get(i,s&st.Optional?null:void 0,s)}function Ke(i,s=st.Default){return(function qn(){return kr}()||Se)(Y(i),s)}const Ct=Ke;function Et(i){const s=[];for(let a=0;a<i.length;a++){const u=Y(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Oe(900,"");let c,f=st.Default;for(let _=0;_<u.length;_++){const E=u[_],I=wn(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(Ke(c,f))}else s.push(Ke(u))}return s}function Ln(i,s){return i[Ho]=s,i.prototype[Ho]=s,i}function wn(i){return i[Ho]}const Tr=Ln(En("Inject",i=>({token:i})),-1),ai=Ln(En("Optional"),8),fo=Ln(En("SkipSelf"),4);class td{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Bs(i){return i instanceof td?i.changingThisBreaksApplicationSecurity:i}const js=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ah=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Yt=(()=>((Yt=Yt||{})[Yt.NONE=0]="NONE",Yt[Yt.HTML=1]="HTML",Yt[Yt.STYLE=2]="STYLE",Yt[Yt.SCRIPT=3]="SCRIPT",Yt[Yt.URL=4]="URL",Yt[Yt.RESOURCE_URL=5]="RESOURCE_URL",Yt))();function fu(i){const s=function Zo(){const i=we();return i&&i[12]}();return s?s.sanitize(Yt.URL,i)||"":function zo(i,s){const a=function cu(i){return i instanceof td&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Bs(i):function du(i){return(i=String(i)).match(js)||i.match(Ah)?i:"unsafe:"+i}(he(i))}const Lh="__ngContext__";function Ar(i,s){i[Lh]=s}function Vh(i){const s=function wa(i){return i[Lh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function ba(i){return i.ngOriginalError}function eg(i,...s){i.error(...s)}class yr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function Ey(i){return i&&i.ngErrorLogger||eg}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&ba(s);for(;a&&ba(a);)a=ba(a);return a||null}}const by=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function p(i){return i instanceof Function?i():i}var re=(()=>((re=re||{})[re.Important=1]="Important",re[re.DashCase=2]="DashCase",re))();function Ye(i,s){return undefined(i,s)}function In(i){const s=i[3];return Xr(s)?s[3]:s}function pu(i){return zh(i[13])}function gu(i){return zh(i[4])}function zh(i){for(;null!==i&&!Xr(i);)i=i[4];return i}function Ko(i,s,a,u,c){if(null!=u){let f,_=!1;Xr(u)?f=u:gi(u)&&(_=!0,u=u[0]);const E=tn(u);0===i&&null!==a?null==c?Ry(s,a,E):as(s,a,E,c||null,!0):1===i&&null!==a?as(s,a,E,c||null,!0):2===i?function Py(i,s,a){const u=Ca(i,s);u&&function XI(i,s,a,u){cn(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function tD(i,s,a,u,c){const f=a[7];f!==tn(a)&&Ko(s,i,u,f,c);for(let E=10;E<a.length;E++){const I=a[E];sg(I[1],I,i,s,u,f)}}(s,i,f,a,c)}}function ld(i,s,a){if(cn(i))return i.createElement(s,a);{const u=null!==a?function za(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function v0(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,xs(c,-1)),a.splice(u,1)}function Sy(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&v0(c,u),s>0&&(i[a-1][4]=u[4]);const f=ss(i,10+s);!function Ti(i,s){sg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function xy(i,s){if(!(256&s[2])){const a=s[11];cn(a)&&a.destroyNode&&sg(i,s,a,3,null,null),function Ay(i){let s=i[13];if(!s)return My(i[1],i);for(;s;){let a=null;if(gi(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)gi(s)&&My(s[1],s),s=s[3];null===s&&(s=i),gi(s)&&My(s[1],s),a=s&&s[4]}s=a}}(s)}}function My(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function w0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof Po)){const f=a[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function E0(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):tn(s[_]),I=u[c=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],I,A):A>=0?u[c=A]():u[c=-A].unsubscribe(),f+=2}else{const _=u[c=a[f+1]];a[f].call(_)}if(null!==u){for(let f=c+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&cn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Xr(s[3])){a!==s[3]&&v0(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function rg(i,s,a){return function JI(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return dr(u,a)}(i,s.parent,a)}function as(i,s,a,u,c){cn(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function Ry(i,s,a){cn(i)?i.appendChild(s,a):s.appendChild(a)}function I0(i,s,a,u,c){null!==u?as(i,s,a,u,c):Ry(i,s,a)}function Ca(i,s){return cn(i)?i.parentNode(s):s.parentNode}let Ny=function b0(i,s,a){return 40&i.type?dr(i,a):null};function ig(i,s,a,u){const c=rg(i,u,s),f=s[11],E=function D0(i,s,a){return Ny(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)I0(f,c,a[I],E,!1);else I0(f,c,a,E,!1)}function dd(i,s){if(null!==s){const a=s.type;if(3&a)return dr(s,i);if(4&a)return ky(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return dd(i,u);{const c=i[s.index];return Xr(c)?ky(-1,c):tn(c)}}if(32&a)return Ye(s,i)()||tn(i[s.index]);{const u=T0(i,s);return null!==u?Array.isArray(u)?u[0]:dd(In(i[16]),u):dd(i,s.next)}}return null}function T0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ky(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return dd(u,c)}return s[7]}function Fy(i,s,a,u,c,f,_){for(;null!=a;){const E=u[a.index],I=a.type;if(_&&0===s&&(E&&Ar(tn(E),u),a.flags|=4),64!=(64&a.flags))if(8&I)Fy(i,s,a.child,u,c,f,!1),Ko(s,i,c,E,f);else if(32&I){const A=Ye(a,u);let S;for(;S=A();)Ko(s,i,c,S,f);Ko(s,i,c,E,f)}else 16&I?S0(i,s,u,a,c,f):Ko(s,i,c,E,f);a=_?a.projectionNext:a.next}}function sg(i,s,a,u,c,f){Fy(a,u,i.firstChild,s,c,f,!1)}function S0(i,s,a,u,c,f){const _=a[16],I=_[6].projection[u.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Ko(s,i,c,I[A],f);else Fy(i,s,I,_[3],c,f,!0)}function x0(i,s,a){cn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function og(i,s,a){cn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function mu(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||i.charCodeAt(c+f)<=32)return c}a=c+1}}const M0="ng-template";function R0(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==mu(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function N0(i){return 4===i.type&&i.value!==M0}function rD(i,s,a){return s===(4!==i.type||a?i.value:M0)}function iD(i,s,a){let u=4;const c=i.attrs||[],f=function _u(i){for(let s=0;s<i.length;s++)if(rr(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&u){if(u=2|1&u,""!==I&&!rD(i,I,a)||""===I&&1===s.length){if(Bi(u))return!1;_=!0}}else{const A=8&u?I:s[++E];if(8&u&&null!==i.attrs){if(!R0(i.attrs,A,a)){if(Bi(u))return!1;_=!0}continue}const P=yu(8&u?"class":I,c,N0(i),a);if(-1===P){if(Bi(u))return!1;_=!0;continue}if(""!==A){let V;V=P>f?"":c[P+1].toLowerCase();const W=8&u?V:null;if(W&&-1!==mu(W,A,0)||2&u&&A!==V){if(Bi(u))return!1;_=!0}}}}else{if(!_&&!Bi(u)&&!Bi(I))return!1;if(_&&Bi(I))continue;_=!1,u=I|1&u}}return Bi(u)||_}function Bi(i){return 0==(1&i)}function yu(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function sD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function Ly(i,s,a=!1){for(let u=0;u<s.length;u++)if(iD(i,s[u],a))return!0;return!1}function Vy(i,s){return i?":not("+s.trim()+")":s}function O0(i){let s=i[0],a=1,u=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!Bi(_)&&(s+=Vy(f,c),c=""),u=_,f=f||!Bi(u);a++}return""!==c&&(s+=Vy(f,c)),s}const It={};function Uy(i){By(Mt(),we(),fr()+i,Xa())}function By(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&pa(s,f,a)}else{const f=i.preOrderHooks;null!==f&&ru(s,f,0,a)}Os(a)}function jl(i,s){return i<<17|s<<2}function $s(i){return i>>17&32767}function ag(i){return 2|i}function Aa(i){return(131068&i)>>2}function ug(i,s){return-131069&i|s<<2}function Yh(i){return 1|i}function Wy(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],f=a[u+1];if(-1!==f){const _=i.data[f];cl(c),_.contentQueries(2,s[f],f)}}}function rf(i,s,a,u,c,f,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,Ss(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function $l(i,s,a,u,c){let f=i.data[s];if(null===f)f=function j0(i,s,a,u,c){const f=Oo(),_=il(),I=i.data[s]=function G0(i,s,a,u,c,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,u,c),function al(){return lt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=c;const _=function ko(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Ur(f,!0),f}function wu(i,s,a,u){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function sf(i,s,a){io(s);try{const u=i.viewQuery;null!==u&&a_(1,u,a);const c=i.template;null!==c&&pg(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Wy(i,s),i.staticViewQueries&&a_(2,i.viewQuery,a);const f=i.components;null!==f&&function QT(i,s){for(let a=0;a<s.length;a++)r_(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,oo()}}function Hl(i,s,a,u){const c=s[2];if(256==(256&c))return;io(s);const f=Xa();try{Ss(s),function eu(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&pg(i,s,a,2,u);const _=3==(3&c);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&pa(s,A,null)}else{const A=i.preOrderHooks;null!==A&&ru(s,A,0,null),Pn(s,0)}if(function eE(i){for(let s=pu(i);null!==s;s=gu(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],f=c[3];0==(1024&c[2])&&xs(f,1),c[2]|=1024}}}(s),function DD(i){for(let s=pu(i);null!==s;s=gu(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];Xi(u)&&Hl(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&Wy(i,s),!f)if(_){const A=i.contentCheckHooks;null!==A&&pa(s,A)}else{const A=i.contentHooks;null!==A&&ru(s,A,1),Pn(s,1)}!function pD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)Os(~c);else{const f=c,_=a[++u],E=a[++u];nu(_,f),E(2,s[f])}}}finally{Os(-1)}}(i,s);const E=i.components;null!==E&&function gD(i,s){for(let a=0;a<s.length;a++)bD(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&a_(2,I,u),!f)if(_){const A=i.viewCheckHooks;null!==A&&pa(s,A)}else{const A=i.viewHooks;null!==A&&ru(s,A,2),Pn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,xs(s[3],-1))}finally{oo()}}function Zy(i,s,a,u){const c=s[10],f=!Xa(),_=As(s);try{f&&!_&&c.begin&&c.begin(),_&&sf(i,s,u),Hl(i,s,a,u)}finally{f&&!_&&c.end&&c.end()}}function pg(i,s,a,u,c){const f=fr(),_=2&u;try{Os(-1),_&&s.length>20&&By(i,s,20,Xa()),a(u,c)}finally{Os(f)}}function of(i,s,a){!Ja()||(function K0(i,s,a,u){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Fn(a,s),Ar(u,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],A=Pr(I);A&&J0(s,a,I);const S=vi(s,i,E,a);Ar(S,s),null!==_&&X0(0,E-c,S,I,0,_),A&&(hr(a.index,s)[8]=S)}}(i,s,a,dr(a,s)),128==(128&a.flags)&&function JT(i,s,a){const u=a.directiveStart,c=a.directiveEnd,_=a.index,E=function ul(){return lt.lFrame.currentDirectiveIndex}();try{Os(_);for(let I=u;I<c;I++){const A=i.data[I],S=s[I];ha(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&vD(A,S)}}finally{Os(-1),ha(E)}}(i,s,a))}function Gl(i,s,a=dr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function af(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Sa(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Sa(i,s,a,u,c,f,_,E,I,A){const S=20+u,P=S+c,V=function uf(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:It);return a}(S,P),W="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function gg(i,s,a,u){const c=u_(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&iE(i).push(u,c.length-1))}function lf(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function Jy(i,s,a,u){let c=!1;if(Ja()){const f=function XT(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];Ly(a,_.selectors,!1)&&(c||(c=[]),ks(Fn(a,s),i,_.type),Pr(_)?(ED(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===u?null:{"":-1};if(null!==f){c=!0,Q0(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const P=f[S];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,A=wu(i,s,f.length,null);for(let S=0;S<f.length;S++){const P=f[S];a.mergedAttrs=jr(a.mergedAttrs,P.hostAttrs),e_(i,a,s,A,P),Y0(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function q0(i,s){const u=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<u;A++){const S=c[A],P=S.inputs,V=null===f||N0(s)?null:ID(P,f);_.push(V),E=lf(P,A,E),I=lf(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function wD(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Oe(-301,!1);u.push(s[c],f)}}}(a,u,_)}return a.mergedAttrs=jr(a.mergedAttrs,a.attrs),c}function gd(i,s,a,u,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Xy(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(u,c,_)}}function vD(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function ED(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Y0(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Pr(s)&&(a[""]=i)}}function Q0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function e_(i,s,a,u,c){i.data[u]=c;const f=c.factory||(c.factory=Fr(c.type)),_=new Po(f,Pr(c),null);i.blueprint[u]=_,a[u]=_,gd(i,s,0,u,wu(i,a,c.hostVars,It),c)}function J0(i,s,a){const u=dr(s,i),c=af(a),f=i[10],_=cf(i,rf(i,c,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=_}function vo(i,s,a,u,c,f){const _=dr(i,s);!function t_(i,s,a,u,c,f,_){if(null==f)cn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(f):_(f,u||"",c);cn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,u,c)}function X0(i,s,a,u,c,f){const _=f[s];if(null!==_){const E=u.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],P=_[I++];null!==E?u.setInput(a,P,A,S):a[S]=P}}}function ID(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function n_(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function bD(i,s){const a=hr(s,i);if(Xi(a)){const u=a[1];80&a[2]?Hl(u,a,u.template,a[8]):a[5]>0&&yg(a)}}function yg(i){for(let u=pu(i);null!==u;u=gu(u))for(let c=10;c<u.length;c++){const f=u[c];if(1024&f[2]){const _=f[1];Hl(_,f,_.template,f[8])}else f[5]>0&&yg(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=hr(a[u],i);Xi(c)&&c[5]>0&&yg(c)}}function r_(i,s){const a=hr(s,i),u=a[1];(function CD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),sf(u,a,a[8])}function cf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function i_(i){for(;i;){i[2]|=64;const s=In(i);if(ph(i)&&!s)return i;i=s}return null}function df(i,s,a){const u=s[10];u.begin&&u.begin();try{Hl(i,s,i.template,a)}catch(c){throw sE(s,c),c}finally{u.end&&u.end()}}function tE(i){!function s_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=Vh(a),c=u[1];Zy(c,u,c.template,a)}}(i[8])}function a_(i,s,a){cl(0),s(i,a)}const TD=(()=>Promise.resolve(null))();function u_(i){return i[7]||(i[7]=[])}function iE(i){return i.cleanup||(i.cleanup=[])}function sE(i,s){const a=i[9],u=a?a.get(yr,null):null;u&&u.handleError(s)}function oE(i,s,a,u,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,u,E):I[E]=c}}function Yo(i,s,a){const u=ro(s,i);!function ud(i,s,a){cn(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function Eg(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=ue(c,E):2==f&&(u=ue(u,E+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const wg=new gn("INJECTOR",-1);class aE{get(s,a=co){if(a===co){const u=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw u.name="NullInjectorError",u}return a}}const Ig=new gn("Set Injector scope."),Eo={},AD={};let Dg;function uE(){return void 0===Dg&&(Dg=new aE),Dg}function c_(i,s=null,a=null,u){const c=lE(i,s,a,u);return c._resolveInjectorDefTypes(),c}function lE(i,s=null,a=null,u){return new SD(i,a,s||uE(),u)}class SD{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&si(a,E=>this.processProvider(E,s,a)),si([s],E=>this.processInjectorType(E,[],f)),this.records.set(wg,md(void 0,this));const _=this.records.get(Ig);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:de(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=co,u=st.Default){this.assertNotDestroyed();const c=Ae(this),f=Un(void 0);try{if(!(u&st.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function iA(i){return"function"==typeof i||"object"==typeof i&&i instanceof gn}(s)&&Lt(s);E=I&&this.injectableDefInScope(I)?md(hf(s),Eo):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&st.Self?uE():this.parent).get(s,a=u&st.Optional&&a===co?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[uu]=_[uu]||[]).unshift(de(s)),c)throw _;return function Go(i,s,a,u){const c=i[uu];throw s[F]&&c.unshift(s[F]),i.message=function ho(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=de(s);if(Array.isArray(s))c=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):de(E)))}c=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[uu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Un(f),Ae(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(de(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(s,a,u){if(!(s=Y(s)))return!1;let c=Dr(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==u.indexOf(_);if(void 0!==f&&(c=Dr(f)),null==c)return!1;if(null!=c.imports&&!E){let S;u.push(_);try{si(c.imports,P=>{this.processInjectorType(P,a,u)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:W}=S[P];si(W,me=>this.processProvider(me,V,W||at))}}this.injectorDefTypes.add(_);const I=Fr(_)||(()=>new _);this.records.set(_,md(I,Eo));const A=c.providers;if(null!=A&&!E){const S=s;si(A,P=>this.processProvider(P,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let c=yd(s=Y(s))?s:Y(s&&s.provide);const f=function xD(i,s,a){return h_(i)?md(void 0,i.useValue):md(d_(i),Eo)}(s);if(yd(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=md(void 0,Eo,!0),_.factory=()=>Et(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===Eo&&(a.value=AD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function rA(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function hf(i){const s=Lt(i),a=null!==s?s.factory:Fr(i);if(null!==a)return a;if(i instanceof gn)throw new Oe(204,!1);if(i instanceof Function)return function cE(i){const s=i.length;if(s>0)throw function Ii(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new Oe(204,!1);const a=function Kr(i){const s=i&&(i[xi]||i[zi]);if(s){const a=function ys(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Oe(204,!1)}function d_(i,s,a){let u;if(yd(i)){const c=Y(i);return Fr(c)||hf(c)}if(h_(i))u=()=>Y(i.useValue);else if(function dE(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Et(i.deps||[]));else if(function MD(i){return!(!i||!i.useExisting)}(i))u=()=>Ke(Y(i.useExisting));else{const c=Y(i&&(i.useClass||i.provide));if(!function nA(i){return!!i.deps}(i))return Fr(c)||hf(c);u=()=>new c(...Et(i.deps))}return u}function md(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function h_(i){return null!==i&&"object"==typeof i&&z in i}function yd(i){return"function"==typeof i}let Qo=(()=>{class i{static create(a,u){var c;if(Array.isArray(a))return c_({name:""},u,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return c_({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=co,i.NULL=new aE,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>Ke(wg)}),i.__NG_ELEMENT_ID__=-1,i})();function FD(i,s){es(Vh(i)[1],fn())}function g_(i){let s=function vE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(Pr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Oe(903,"");c=s.\u0275dir}if(c){if(a){u.push(c);const _=i;_.inputs=_r(i.inputs),_.declaredInputs=_r(i.declaredInputs),_.outputs=_r(i.outputs);const E=c.hostBindings;E&&bu(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&Cg(i,I),A&&Gr(i,A),ie(i.inputs,c.inputs),ie(i.declaredInputs,c.declaredInputs),ie(i.outputs,c.outputs),Pr(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===g_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function LD(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=jr(c.hostAttrs,a=jr(a,c.hostAttrs))}}(u)}function _r(i){return i===Xn?{}:i===at?[]:i}function Cg(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function Gr(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,f)=>{s(u,c,f),a(u,c,f)}:s}function bu(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let pf=null;function wd(){if(!pf){const i=Pt.Symbol;if(i&&i.iterator)pf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(pf=u)}}}return pf}function ql(i){return!!qr(i)&&(Array.isArray(i)||!(i instanceof Map)&&wd()in i)}function qr(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Gs(i,s,a){return i[s]=a}function zr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ag(i,s,a,u){const c=we();return zr(c,Rs(),s)&&(Mt(),vo(vn(),c,i,s,a,u)),Ag}function CE(i,s,a,u,c,f,_,E){const I=we(),A=Mt(),S=i+20,P=A.firstCreatePass?function BD(i,s,a,u,c,f,_,E,I){const A=s.consts,S=$l(s,i,4,_||null,Vr(A,E));Jy(s,a,S,Vr(A,I)),es(s,S);const P=S.tViews=Sa(2,S,u,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,u,c,f,_):A.data[S];Ur(P,!1);const V=I[11].createComment("");ig(A,I,V,P),Ar(V,I),cf(I,I[S]=n_(V,I,V,P)),Ua(P)&&of(A,I,P),null!=_&&Gl(I,P,E)}function Td(i,s=st.Default){const a=we();return null===a?Ke(i,s):Ps(fn(),a,Y(i),s)}function C_(){throw new Error("invalid")}function jg(i,s,a){const u=we();return zr(u,Rs(),s)&&function us(i,s,a,u,c,f,_,E){const I=dr(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[u])?(oE(i,a,S,u,c),Is(s)&&function z0(i,s){const a=hr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function Yy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=_?_(c,s.value||"",u):c,cn(f)?f.setProperty(I,u,c):Br(u)||(I.setProperty?I.setProperty(u,c):I[u]=c))}(Mt(),vn(),u,i,s,u[11],a,!1),jg}function Ad(i,s,a,u,c){const _=c?"class":"style";oE(i,a,s.inputs[_],_,u)}function $g(i,s,a,u){const c=we(),f=Mt(),_=20+i,E=c[11],I=c[_]=ld(E,s,function Jm(){return lt.lFrame.currentNamespace}()),A=f.firstCreatePass?function YD(i,s,a,u,c,f,_){const E=s.consts,A=$l(s,i,2,c,Vr(E,f));return Jy(s,a,A,Vr(E,_)),null!==A.attrs&&Eg(A,A.attrs,!1),null!==A.mergedAttrs&&Eg(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,c,0,s,a,u):f.data[_];Ur(A,!0);const S=A.mergedAttrs;null!==S&&ht(E,I,S);const P=A.classes;null!==P&&og(E,I,P);const V=A.styles;return null!==V&&x0(E,I,V),64!=(64&A.flags)&&ig(f,c,I,A),0===function da(){return lt.lFrame.elementDepthCount}()&&Ar(I,c),function Ya(){lt.lFrame.elementDepthCount++}(),Ua(A)&&(of(f,c,A),function mD(i,s,a){if(bc(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,c)),null!==u&&Gl(c,A),$g}function xa(){let i=fn();il()?function sl(){lt.lFrame.isParent=!1}():(i=i.parent,Ur(i,!1));const s=i;!function Qa(){lt.lFrame.elementDepthCount--}();const a=Mt();return a.firstCreatePass&&(es(a,i),bc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function _h(i){return 0!=(16&i.flags)}(s)&&Ad(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Lp(i){return 0!=(32&i.flags)}(s)&&Ad(a,s,we(),s.stylesWithoutHost,!1),xa}function T_(i,s,a,u){return $g(i,s,a,u),xa(),T_}function xd(){return we()}function Gg(i){return!!i&&"function"==typeof i.then}function di(i){return!!i&&"function"==typeof i.subscribe}const S_=di;function Yl(i,s,a,u){const c=we(),f=Mt(),_=fn();return function qg(i,s,a,u,c,f,_,E){const I=Ua(u),S=i.firstCreatePass&&iE(i),P=s[8],V=u_(s);let W=!0;if(3&u.type||E){const Ue=dr(u,s),Qe=E?E(Ue):Ue,Ie=V.length,ot=E?Bt=>E(tn(Bt[u.index])):u.index;if(cn(a)){let Bt=null;if(!E&&I&&(Bt=function FE(i,s,a,u){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===u){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,u.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=f,Bt.__ngLastListenerFn__=f,W=!1;else{f=zg(u,s,P,f,!1);const ln=a.listen(Qe,c,f);V.push(f,ln),S&&S.push(c,ot,Ie,Ie+1)}}else f=zg(u,s,P,f,!0),Qe.addEventListener(c,f,_),V.push(f),S&&S.push(c,ot,Ie,_)}else f=zg(u,s,P,f,!1);const me=u.outputs;let Ne;if(W&&null!==me&&(Ne=me[c])){const Ue=Ne.length;if(Ue)for(let Qe=0;Qe<Ue;Qe+=2){const $i=s[Ne[Qe]][Ne[Qe+1]].subscribe(f),vc=V.length;V.push(f,$i),S&&S.push(c,u.index,vc,-(vc+1))}}}(f,c,c[11],_,i,s,!!a,u),Yl}function x_(i,s,a,u){try{return!1!==a(u)}catch(c){return sE(i,c),!1}}function zg(i,s,a,u,c){return function f(_){if(_===Function)return u;const E=2&i.flags?hr(i.index,s):s;0==(32&s[2])&&i_(E);let I=x_(s,0,u,_),A=f.__ngNextListenerFn__;for(;A;)I=x_(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Md(i=1){return function Ns(i){return(lt.lFrame.contextLView=function hl(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function Cf(i,s,a,u,c){const f=i[a+1],_=null===s;let E=u?$s(f):Aa(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];Tf(i[E],s)&&(I=!0,i[E+1]=u?Yh(S):ag(S)),E=u?$s(S):Aa(S)}I&&(i[a+1]=u?ag(f):Yh(f))}function Tf(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Us(i,s)>=0}function Nd(i,s){return function Io(i,s,a,u){const c=we(),f=Mt(),_=function yi(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function BE(i,s,a,u){const c=i.data;if(null===c[a+1]){const f=c[fr()],_=function UE(i,s){return s>=i.expandoStartIndex}(i,a);(function j_(i,s){return 0!=(i.flags&(s?16:32))})(f,u)&&null===s&&!_&&(s=!1),s=function eb(i,s,a,u){const c=function fa(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=Od(a=Qg(null,i,s,a,u),s.attrs,u),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Qg(c,i,s,a,u),null===f){let I=function tb(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==Aa(u))return i[$s(u)]}(i,s,u);void 0!==I&&Array.isArray(I)&&(I=Qg(null,i,s,I[1],u),I=Od(I,s.attrs,u),function Mf(i,s,a,u){i[$s(a?s.classBindings:s.styleBindings)]=u}(i,s,u,I))}else f=function Mu(i,s,a){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=Od(u,i[f].hostAttrs,a);return Od(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,u),function bf(i,s,a,u,c,f){let _=f?s.classBindings:s.styleBindings,E=$s(_),I=Aa(_);i[u]=a;let S,A=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||Us(P,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=$s(i[E+1]);i[u+1]=jl(V,E),0!==V&&(i[V+1]=ug(i[V+1],u)),i[E+1]=function F0(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=jl(E,0),0!==E&&(i[E+1]=ug(i[E+1],u)),E=u;else i[u+1]=jl(I,0),0===E?E=u:i[I+1]=ug(i[I+1],u),I=u;A&&(i[u+1]=ag(i[u+1])),Cf(i,S,u,!0),Cf(i,S,u,!1),function VE(i,s,a,u,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Us(f,s)>=0&&(a[u+1]=Yh(a[u+1]))}(s,S,i,u,f),_=jl(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,u)}}(f,i,_,u),s!==It&&zr(c,_,s)&&function $E(i,s,a,u,c,f,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];Jg(function Hy(i){return 1==(1&i)}(A)?B_(I,s,a,c,Aa(A),_):void 0)||(Jg(f)||function $y(i){return 2==(2&i)}(A)&&(f=B_(I,null,a,c,E,_)),function nD(i,s,a,u,c){const f=cn(i);if(s)c?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:re.DashCase;if(null==c)f?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=re.Important),f?i.setStyle(a,u,c,_):a.style.setProperty(u,c,E?"important":"")}}}(u,_,ro(fr(),a),c,f))}(f,f.data[fr()],c,c[11],i,c[_+1]=function HE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(Bs(i)))),i}(s,a),u,_)}(i,s,null,!0),Nd}function Qg(i,s,a,u,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],u=Od(u,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function Od(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),jn(i,_,!!a||s[++f]))}return void 0===i?null:i}function B_(i,s,a,u,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,P=null===S;let V=a[c+1];V===It&&(V=P?at:void 0);let W=P?Cl(V,u):S===u?V:void 0;if(A&&!Jg(W)&&(W=Cl(I,u)),Jg(W)&&(E=W,_))return E;const me=i[c+1];c=_?$s(me):Aa(me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=Cl(I,u))}return E}function Jg(i){return void 0!==i}function Xg(i,s=""){const a=we(),u=Mt(),c=i+20,f=u.firstCreatePass?$l(u,c,1,s,null):u.data[c],_=a[c]=function ad(i,s){return cn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);ig(u,a,_,f),Ur(f,!1)}function Rf(i){return Nf("",i,""),Rf}function Nf(i,s,a){const u=we(),c=function Tu(i,s,a,u){return zr(i,Rs(),a)?s+he(a)+u:It}(u,i,s,a);return c!==It&&Yo(u,fr(),c),Nf}const Do=void 0;var rw=["en",[["a","p"],["AM","PM"],Do],[["AM","PM"],Do,Do],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Do,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Do,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Do,"{1} 'at' {0}",Do],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nw(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Ru={};function sm(i){const s=function sw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=K_(s);if(a)return a;const u=s.split("-")[0];if(a=K_(u),a)return a;if("en"===u)return rw;throw new Error(`Missing locale data for the locale "${i}".`)}function Z_(i){return sm(i)[pt.PluralCase]}function K_(i){return i in Ru||(Ru[i]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[i]),Ru[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const tc="en-US";let uw=tc;function iv(i,s,a,u,c){if(i=Y(i),Array.isArray(i))for(let f=0;f<i.length;f++)iv(i[f],s,a,u,c);else{const f=Mt(),_=we();let E=yd(i)?i:Y(i.provide),I=d_(i);const A=fn(),S=1048575&A.providerIndexes,P=A.directiveStart,V=A.providerIndexes>>20;if(yd(i)||!i.multi){const W=new Po(I,c,Td),me=Rr(E,s,c?S:S+V,P);-1===me?(ks(Fn(A,_),f,E),lm(f,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(W),_.push(W)):(a[me]=W,_[me]=W)}else{const W=Rr(E,s,S+V,P),me=Rr(E,s,S,S+V),Ne=W>=0&&a[W],Ue=me>=0&&a[me];if(c&&!Ue||!c&&!Ne){ks(Fn(A,_),f,E);const Qe=function ov(i,s,a,u,c){const f=new Po(i,a,Td);return f.multi=[],f.index=s,f.componentProviders=0,sv(f,c,u&&!a),f}(c?Tn:bw,a.length,c,u,I);!c&&Ue&&(a[me].providerFactory=Qe),lm(f,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else lm(f,i,W>-1?W:me,sv(a[c?me:W],I,!c&&u));!c&&u&&Ue&&a[me].componentProviders++}}}function lm(i,s,a,u){const c=yd(s),f=function hE(i){return!!i.useClass}(s);if(c||f){const I=(f?Y(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[u,I]):A[S+1].push(u,I)}else A.push(a,I)}}}function sv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Rr(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function bw(i,s,a,u){return jd(this.multi,[])}function Tn(i,s,a,u){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=vi(a,a[1],this.providerFactory.index,u);f=E.slice(0,_),jd(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],jd(c,f);return f}function jd(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Pu(i,s=[]){return a=>{a.providersResolver=(u,c)=>function _b(i,s,a){const u=Mt();if(u.firstCreatePass){const c=Pr(i);iv(a,u.data,u.blueprint,c,!0),iv(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class $d{}class vb{resolveComponentFactory(s){throw function Cw(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let dm=(()=>{class i{}return i.NULL=new vb,i})();function Aw(){return Ws(fn(),we())}function Ws(i,s){return new Yf(dr(i,s))}let Yf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Aw,i})();function Qf(i){return i instanceof Yf?i.nativeElement:i}class Jf{}let Sw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Zr(){const i=we(),a=hr(fn().index,i);return function xw(i){return i[11]}(gi(a)?a:i)}(),i})(),Eb=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class Mw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Rw=new Mw("13.3.4"),hm={};function fm(i,s,a,u,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(tn(f)),Xr(f))for(let E=10;E<f.length;E++){const I=f[E],A=I[1].firstChild;null!==A&&fm(I[1],I,A,u)}const _=a.type;if(8&_)fm(i,s,a.child,u);else if(32&_){const E=Ye(a,s);let I;for(;I=E();)u.push(I)}else if(16&_){const E=T0(s,a);if(Array.isArray(E))u.push(...E);else{const I=In(s[16]);fm(I[1],I,E,u,!0)}}a=c?a.projectionNext:a.next}return u}class Xf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return fm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Xr(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(Sy(s,u),ss(a,u))}this._attachedToViewContainer=!1}xy(this._lView[1],this._lView)}onDestroy(s){gg(this._lView[1],this._lView,null,s)}markForCheck(){i_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){df(this._lView[1],this._lView,this.context)}checkNoChanges(){!function o_(i,s,a){Ms(!0);try{df(i,s,a)}finally{Ms(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ng(i,s){sg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=s}}class wb extends Xf{constructor(s){super(s),this._view=s}detectChanges(){tE(this._view)}checkNoChanges(){!function nE(i){Ms(!0);try{tE(i)}finally{Ms(!1)}}(this._view)}get context(){return null}}class Nw extends dm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new pm(a,this.ngModule)}}function Oa(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class pm extends $d{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function k0(i){return i.map(O0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Oa(this.componentDef.inputs)}get outputs(){return Oa(this.componentDef.outputs)}create(s,a,u,c){const f=(c=c||this.ngModule)?function Ib(i,s){return{get:(a,u,c)=>{const f=i.get(a,hm,c);return f!==hm||u===hm?f:s.get(a,u,c)}}}(s,c.injector):s,_=f.get(Jf,No),E=f.get(Eb,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=u?function Ky(i,s,a){if(cn(i))return i.selectRootElement(s,a===Vt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):ld(_.createRenderer(null,this.componentDef),A,function Hd(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,V=function Ed(i,s){return{components:[],scheduler:i||by,clean:TD,playerHandler:s||null,flags:0}}(),W=Sa(0,null,null,1,0,null,null,null,null,null),me=rf(null,W,V,P,null,null,_,I,E,f);let Ne,Ue;io(me);try{const Qe=function ff(i,s,a,u,c,f){const _=a[1];a[20]=i;const I=$l(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(Eg(I,A,!0),null!==i&&(ht(c,i,A),null!==I.classes&&og(c,i,I.classes),null!==I.styles&&x0(c,i,I.styles)));const S=u.createRenderer(i,s),P=rf(a,af(s),null,s.onPush?64:16,a[20],I,u,S,f||null,null);return _.firstCreatePass&&(ks(Fn(I,a),_,s.type),ED(_,I),Q0(I,a.length,1)),cf(a,P),a[20]=P}(S,this.componentDef,me,_,I);if(S)if(u)ht(I,S,["ng-version",Rw.full]);else{const{attrs:Ie,classes:ot}=function P0(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++u]):8===c&&a.push(f);else{if(!Bi(c))break;c=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&ht(I,S,Ie),ot&&ot.length>0&&og(I,S,ot.join(" "))}if(Ue=ca(W,20),void 0!==a){const Ie=Ue.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const Bt=a[ot];Ie.push(null!=Bt?Array.from(Bt):null)}}Ne=function bg(i,s,a,u,c){const f=a[1],_=function _D(i,s,a){const u=fn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),e_(i,u,s,wu(i,s,1,null),a));const c=vi(s,i,u.directiveStart,u);Ar(c,s);const f=dr(u,s);return f&&Ar(f,s),c}(f,a,s);if(u.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=fn();s.contentQueries(1,_,I.directiveStart)}const E=fn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Os(E.index),gd(a[1],E,0,E.directiveStart,E.directiveEnd,s),vD(s,_)),_}(Qe,this.componentDef,me,V,[FD]),sf(W,me,null)}finally{oo()}return new kw(this.componentType,Ne,Ws(Ue,me),me,Ue)}}class kw extends class cm{}{constructor(s,a,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new wb(c),this.componentType=s}get injector(){return new Ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class ka{}class ep{}const Vu=new Map;class lv extends ka{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Nw(this);const u=sn(s);this._bootstrapComponents=p(u.bootstrap),this._r3Injector=lE(s,a,[{provide:ka,useValue:this},{provide:dm,useValue:this.componentFactoryResolver}],de(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Qo.THROW_IF_NOT_FOUND,u=st.Default){return s===Qo||s===ka||s===wg?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class tp extends ep{constructor(s){super(),this.moduleType=s,null!==sn(s)&&function qd(i){const s=new Set;!function a(u){const c=sn(u,!0),f=c.id;null!==f&&(function gm(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${de(s)} vs ${de(s.name)}`)}(f,Vu.get(f),u),Vu.set(f,u));const _=p(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new lv(this.moduleType,s)}}function zd(i,s){const a=i[s];return a===It?void 0:a}function Uu(i,s,a,u,c,f,_){const E=s+a;return function Cu(i,s,a,u){const c=zr(i,s,a);return zr(i,s+1,u)||c}(i,E,c,f)?Gs(i,E+2,_?u.call(_,c,f):u(c,f)):zd(i,E+2)}function ac(i,s){const a=Mt();let u;const c=i+20;a.firstCreatePass?(u=function jw(i,s){if(s)for(let a=s.length-1;a>=0;a--){const u=s[a];if(i===u.name)return u}}(s,a.pipeRegistry),a.data[c]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,u.onDestroy)):u=a.data[c];const f=u.factory||(u.factory=Fr(u.type)),_=Un(Td);try{const E=ri(!1),I=f();return ri(E),function ci(i,s,a,u){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=u}(a,we(),c,I),I}finally{Un(_)}}function fv(i,s,a){const u=i+20,c=we(),f=mi(c,u);return ju(c,u)?function oc(i,s,a,u,c,f){const _=s+a;return zr(i,_,c)?Gs(i,_+1,f?u.call(f,c):u(c)):zd(i,_+1)}(c,nr(),s,f.transform,a,f):f.transform(a)}function Wd(i,s,a,u){const c=i+20,f=we(),_=mi(f,c);return ju(f,c)?Uu(f,nr(),s,_.transform,a,u,_):_.transform(a,u)}function ju(i,s){return i[1].data[s].pure}function pv(i){return s=>{setTimeout(i,void 0,s)}}const Zs=class _m extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,f,_;let E=s,I=a||(()=>null),A=u;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(f=P.error)||void 0===f?void 0:f.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=pv(I),E&&(E=pv(E)),A&&(A=pv(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof Z.w0&&s.add(S),S}};function Sb(){return this._results[wd()]()}class vm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=wd(),u=vm.prototype;u[a]||(u[a]=Sb)}get changes(){return this._changes||(this._changes=new Zs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=gr(s);(this._changesDetected=!function El(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],f=s[u];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Zd=(()=>{class i{}return i.__NG_ELEMENT_ID__=$w,i})();const np=Zd,uc=class extends np{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=rf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),sf(a,u,s),new Xf(u)}};function $w(){return rp(fn(),we())}function rp(i,s){return 4&i.type?new uc(s,i,Ws(i,s)):null}let ip=(()=>{class i{}return i.__NG_ELEMENT_ID__=sp,i})();function sp(){return mv(fn(),we())}const gv=ip,Hw=class extends gv{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return Ws(this._hostTNode,this._hostLView)}get injector(){return new Ei(this._hostTNode,this._hostLView)}get parentInjector(){const s=ii(this._hostTNode,this._hostLView);if(jc(s)){const a=_i(s,this._hostLView),u=an(s);return new Ei(a[1].data[u+8],a)}return new Ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Yn(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,f){const _=s&&!function $o(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,u=P.injector,c=P.projectableNodes,f=P.ngModuleRef}const I=_?s:new pm(Ut(s)),A=u||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?A:this.parentInjector).get(ka,null);V&&(f=V)}const S=I.create(A,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const u=s._lView,c=u[1];if(function Za(i){return Xr(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=u[3],V=new Hw(P,P[6],P[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function Kh(i,s,a,u){const c=10+u,f=a.length;u>0&&(a[c-1][4]=s),u<f-10?(s[4]=a[c],wl(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function cd(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,u,_,f);const E=ky(f,_),I=u[11],A=Ca(I,_[7]);return null!==A&&function Zh(i,s,a,u,c,f){u[0]=c,u[6]=s,sg(i,u,a,1,c,f)}(c,_[6],I,u,A,E),s.attachToViewContainerRef(),wl($t(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Yn(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=Sy(this._lContainer,a);u&&(ss($t(this._lContainer),a),xy(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=Sy(this._lContainer,a);return u&&null!=ss($t(this._lContainer),a)?new Xf(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Yn(i){return i[8]}function $t(i){return i[8]||(i[8]=[])}function mv(i,s){let a;const u=s[i.index];if(Xr(u))a=u;else{let c;if(8&i.type)c=tn(u);else{const f=s[11];c=f.createComment("");const _=dr(i,s);as(f,Ca(f,_),c,function eD(i,s){return cn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=n_(u,s,c,i),cf(s,a)}return new Hw(a,i,s)}class Kd{constructor(s){this.queryList=s,this.matches=null}clone(){return new Kd(this.queryList)}setDirty(){this.queryList.setDirty()}}class wr{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<u;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new wr(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==vv(s,a).matches&&this.queries[a].setDirty()}}class yn{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class Em{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new Em(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Hu{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Hu(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,a,xb(a,f)),this.matchTNodeWithReadOption(s,a,Vo(a,s,f,!1,!1))}else u===Zd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Vo(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Yf||c===ip||c===Zd&&4&a.type)this.addMatch(a.index,-2);else{const f=Vo(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function xb(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function Mb(i,s,a,u){return-1===a?function Ks(i,s){return 11&i.type?Ws(i,s):4&i.type?rp(i,s):null}(s,i):-2===a?function yv(i,s,a){return a===Yf?Ws(s,i):a===Zd?rp(s,i):a===ip?mv(s,i):void 0}(i,s,u):vi(i,i[1],a,s)}function Yd(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:Mb(s,f[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function _v(i,s,a,u){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=Yd(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)u.push(_[E/2]);else{const A=f[E+1],S=s[-I];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&_v(V[1],V,A,u)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const W=P[V];_v(W[1],W,A,u)}}}}}return u}function qw(i){const s=we(),a=Mt(),u=ll();cl(u+1);const c=vv(a,u);if(i.dirty&&As(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?_v(a,s,u,[]):Yd(a,s,c,u);i.reset(f,Qf),i.notifyOnChanges()}return!0}return!1}function zw(i,s,a,u){const c=Mt();if(c.firstCreatePass){const f=fn();(function up(i,s,a){null===i.queries&&(i.queries=new Em),i.queries.track(new Hu(s,a))})(c,new yn(s,a,u),f.index),function Ww(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Qd(i,s,a){const u=new vm(4==(4&a));gg(i,s,u,u.destroy),null===s[19]&&(s[19]=new wr),s[19].queries.push(new Kd(u))}(c,we(),a)}function op(){return function ap(i,s){return i[19].queries[s].queryList}(we(),ll())}function vv(i,s){return i.queries.getByIndex(s)}function Tm(...i){}const oI=new gn("Application Initializer");let Tv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Tm,this.reject=Tm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Gg(f))a.push(f);else if(S_(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ke(oI,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const aI=new gn("AppId",{providedIn:"root",factory:function uI(){return`${Av()}${Av()}${Av()}`}});function Av(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sv=new gn("Platform Initializer"),jb=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xv=new gn("appBootstrapListener");let fe=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const ds=new gn("LocaleId",{providedIn:"root",factory:()=>Ct(ds,st.Optional|st.SkipSelf)||function Am(){return"undefined"!=typeof $localize&&$localize.locale||tc}()}),Hb=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class pc{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let lI=(()=>{class i{compileModuleSync(a){return new tp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),f=p(sn(a).declarations).reduce((_,E)=>{const I=Ut(E);return I&&_.push(new pm(I)),_},[]);return new pc(u,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Nr=(()=>Promise.resolve(0))();function hp(i){"undefined"==typeof Zone?Nr.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class hs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zs(!1),this.onMicrotaskEmpty=new Zs(!1),this.onStable=new Zs(!1),this.onError=new Zs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Rv(){let i=Pt.requestAnimationFrame,s=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function cI(i){const s=()=>{!function qb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Pt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,eh(i),i.isCheckStableRunning=!0,xm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),eh(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,f,_,E)=>{try{return qu(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),zu(i)}},onInvoke:(a,u,c,f,_,E,I)=>{try{return qu(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),zu(i)}},onHasTask:(a,u,c,f)=>{a.hasTask(c,f),u===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,eh(i),xm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,Gu,Tm,Tm);try{return f.runTask(_,a,u)}finally{f.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const Gu={};function xm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function eh(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function qu(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function zu(i){i._nesting--,xm(i)}class th{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zs,this.onMicrotaskEmpty=new Zs,this.onStable=new Zs,this.onError=new Zs}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let nh=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hs.assertNotInAngularZone(),hp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ke(hs))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),dI=(()=>{class i{constructor(){this._applications=new Map,Mm.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return Mm.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Nv{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function Ov(i){Mm=i}let Mm=new Nv,gc=null;const kv=new gn("AllowMultipleToken"),Pv=new gn("PlatformOnDestroy");class zb{constructor(s,a){this.name=s,this.token=a}}function fI(i,s,a=[]){const u=`Platform: ${s}`,c=new gn(u);return(f=[])=>{let _=na();if(!_||_.injector.get(kv,!1)){const E=[...a,...f,{provide:c,useValue:!0}];i?i(E):function hI(i){if(gc&&!gc.get(kv,!1))throw new Oe(400,"");gc=i;const s=i.get(Wu),a=i.get(Sv,null);a&&a.forEach(u=>u())}(function Zb(i=[],s){return Qo.create({name:s,providers:[{provide:Ig,useValue:"platform"},{provide:Pv,useValue:()=>gc=null},...i]})}(E,u))}return function Wb(i){const s=na();if(!s)throw new Oe(401,"");return s}()}}function na(){var i;return null!==(i=null==gc?void 0:gc.get(Wu))&&void 0!==i?i:null}let Wu=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function pI(i,s){let a;return a="noop"===i?new th:("zone.js"===i?void 0:i)||new hs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:hs,useValue:E}];return E.run(()=>{const A=Qo.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),P=S.injector.get(yr,null);if(!P)throw new Oe(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:W=>{P.handleError(W)}});S.onDestroy(()=>{Zu(this._modules,S),V.unsubscribe()})}),function Kb(i,s,a){try{const u=a();return Gg(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(P,E,()=>{const V=S.injector.get(Tv);return V.runInitializers(),V.donePromise.then(()=>(function Y_(i){it(i,"Expected localeId to be defined"),"string"==typeof i&&(uw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(ds,tc)||tc),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=gI({},u);return function Fv(i,s,a){const u=new tp(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const u=a.injector.get(fp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const a=this._injector.get(Pv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ke(Qo))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function gI(i,s){return Array.isArray(s)?s.reduce(gI,i):Object.assign(Object.assign({},i),s)}let fp=(()=>{class i{constructor(a,u,c,f){this._zone=a,this._injector=u,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new O.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{hs.assertNotInAngularZone(),hp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(_,E.pipe((0,J.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Oe(405,"");let c;c=a instanceof $d?a:this._injector.get(dm).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function mc(i){return i.isBoundToModule}(c)?void 0:this._injector.get(ka),E=c.create(Qo.NULL,[],u||c.selector,f),I=E.location.nativeElement,A=E.injector.get(nh,null),S=A&&E.injector.get(dI);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Zu(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Zu(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(xv,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ke(hs),Ke(Qo),Ke(yr),Ke(Tv))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Zu(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let rh=!0,pp=!1;function Om(){return pp=!0,rh}function _I(){if(pp)throw new Error("Cannot enable prod mode after platform setup.");rh=!1}let Lv=(()=>{class i{}return i.__NG_ELEMENT_ID__=vI,i})();function vI(i){return function Ku(i,s,a){if(Is(i)&&!a){const u=hr(i.index,s);return new Xf(u,u)}return 47&i.type?new Xf(s[16],s):null}(fn(),we(),16==(16&i))}class Hv{constructor(){}supports(s){return ql(s)}create(s){return new II(s)}}const eC=(i,s)=>s;class II{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||eC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,f=null;for(;a||u;){const _=!u||a&&a.currentIndex<_p(u,c,f)?a:u,E=_p(_,c,f),I=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const W=V<f.length?f[V]:f[V]=0,me=W+V;S<=me&&me<A&&(f[V]=W+1)}f[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ql(s))throw new Oe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),u=!0),a=a._next}else c=0,function IE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[wd()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new Gv(a,u),f,c),s}_verifyReinsertion(s,a,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new oh),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oh),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Gv{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qv{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class oh{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new qv,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _p(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class Vm{constructor(){}supports(s){return s instanceof Map||qr(s)}create(){return new tC}}class tC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||qr(s)))throw new Oe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const u=new zv(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class zv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wv(){return new Zv([new Hv])}let Zv=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Wv()),deps:[[i,new fo,new ai]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new Oe(901,"")}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Wv}),i})();function Kv(){return new vp([new Vm])}let vp=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Kv()),deps:[[i,new fo,new ai]]}}find(a){const u=this.factories.find(f=>f.supports(a));if(u)return u;throw new Oe(901,"")}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Kv}),i})();const sC=fI(null,"core",[]);let ah=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ke(fp))},i.\u0275mod=K({type:i}),i.\u0275inj=Kt({}),i})()},3942:(rt,Ce,k)=>{k.d(Ce,{Z:()=>Oe});var g=k(2090),Z=k(4859),O=k(9681),oe=k(1877);class J{constructor(he,Ee){this._delegate=he,this.firebase=Ee,(0,O._addComponent)(he,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,Ee=O._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(he);return!ze.isInitialized()&&"EXPLICIT"===(null===(Je=ze.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:Ee})}_removeServiceInstance(he,Ee=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ee)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const Pe=function de(Pe){const he={},Ee={__esModule:!0,initializeApp:function De(je,ee={}){const q=O.initializeApp(je,ee);if((0,g.r3)(he,q.name))return he[q.name];const te=new Pe(q,Ee);return he[q.name]=te,te},app:ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(je){const ee=je.name,q=ee.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const te=(ge=ze())=>{if("function"!=typeof ge[q])throw ie.create("invalid-app-argument",{appName:ee});return ge[q]()};void 0!==je.serviceProps&&(0,g.ZB)(te,je.serviceProps),Ee[q]=te,Pe.prototype[q]=function(...ge){return this._getService.bind(this,ee).apply(this,je.multipleInstances?ge:[])}}return"PUBLIC"===je.type?Ee[q]:null},removeApp:function Je(je){delete he[je]},useAsService:function $e(je,ee){return"serverAuth"===ee?null:ee},modularAPIs:O}};function ze(je){if(!(0,g.r3)(he,je=je||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:je});return he[je]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function ye(){return Object.keys(he).map(je=>he[je])}}),ze.App=Pe,Ee}(J);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function he(Ee){(0,g.ZB)(Pe,Ee)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Pe}(),j=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=B;!function Te(Pe){(0,O.registerVersion)("@firebase/app-compat","0.1.22",Pe)}()},9681:(rt,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Dr,_DEFAULT_ENTRY_NAME:()=>An,_addComponent:()=>rn,_addOrOverwriteComponent:()=>pi,_apps:()=>ct,_clearComponents:()=>Lt,_components:()=>nn,_getProvider:()=>qi,_registerComponent:()=>Jt,_removeServiceInstance:()=>Kt,deleteApp:()=>Wi,getApp:()=>br,getApps:()=>zi,initializeApp:()=>xi,onLog:()=>qn,registerVersion:()=>kr,setLogLevel:()=>Un});var g=k(5861),Z=k(4859),O=k(1877),oe=k(2090);class J{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function pe(We){const be=We.getComponent();return"VERSION"===(null==be?void 0:be.type)}(Ze)){const ut=Ze.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(Ze=>Ze).join(" ")}}const ie="@firebase/app",ue=new O.Yd("@firebase/app"),An="[DEFAULT]",it={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ct=new Map,nn=new Map;function rn(We,be){try{We.container.addComponent(be)}catch(Ze){ue.debug(`Component ${be.name} failed to register with FirebaseApp ${We.name}`,Ze)}}function pi(We,be){We.container.addOrOverwriteComponent(be)}function Jt(We){const be=We.name;if(nn.has(be))return ue.debug(`There were multiple attempts to register component ${be}.`),!1;nn.set(be,We);for(const Ze of ct.values())rn(Ze,We);return!0}function qi(We,be){const Ze=We.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),We.container.getProvider(be)}function Kt(We,be,Ze=An){qi(We,be).clearInstance(Ze)}function Lt(){nn.clear()}const Kr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ys{constructor(be,Ze,ut){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}const Dr="9.6.11";function xi(We,be={}){"object"!=typeof be&&(be={name:be});const Ze=Object.assign({name:An,automaticDataCollectionEnabled:!1},be),ut=Ze.name;if("string"!=typeof ut||!ut)throw Kr.create("bad-app-name",{appName:String(ut)});const kt=ct.get(ut);if(kt){if((0,oe.vZ)(We,kt.options)&&(0,oe.vZ)(Ze,kt.config))return kt;throw Kr.create("duplicate-app",{appName:ut})}const xt=new Z.H0(ut);for(const L of nn.values())xt.addComponent(L);const U=new ys(We,Ze,xt);return ct.set(ut,U),U}function br(We=An){const be=ct.get(We);if(!be)throw Kr.create("no-app",{appName:We});return be}function zi(){return Array.from(ct.values())}function Wi(We){return st.apply(this,arguments)}function st(){return(st=(0,g.Z)(function*(We){const be=We.name;ct.has(be)&&(ct.delete(be),yield Promise.all(We.container.getProviders().map(Ze=>Ze.delete())),We.isDeleted=!0)})).apply(this,arguments)}function kr(We,be,Ze){var ut;let kt=null!==(ut=it[We])&&void 0!==ut?ut:We;Ze&&(kt+=`-${Ze}`);const xt=kt.match(/\s|\//),U=be.match(/\s|\//);if(xt||U){const L=[`Unable to register library "${kt}" with version "${be}":`];return xt&&L.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),xt&&U&&L.push("and"),U&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Jt(new Z.wA(`${kt}-version`,()=>({library:kt,version:be}),"VERSION"))}function qn(We,be){if(null!==We&&"function"!=typeof We)throw Kr.create("invalid-log-argument");(0,O.Am)(We,be)}function Un(We){(0,O.Ub)(We)}const hn="firebase-heartbeat-store";let zn=null;function _s(){return zn||(zn=(0,oe.X3)("firebase-heartbeat-database",1,(We,be)=>{0===be&&We.createObjectStore(hn)}).catch(We=>{throw Kr.create("storage-open",{originalErrorMessage:We.message})})),zn}function Vt(){return(Vt=(0,g.Z)(function*(We){try{return(yield _s()).transaction(hn).objectStore(hn).get(Jn(We))}catch(be){throw Kr.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function et(We,be){return gt.apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(We,be){try{const ut=(yield _s()).transaction(hn,"readwrite");return yield ut.objectStore(hn).put(be,Jn(We)),ut.complete}catch(Ze){throw Kr.create("storage-set",{originalErrorMessage:Ze.message})}})).apply(this,arguments)}function Jn(We){return`${We.name}!${We.options.appId}`}class Qs{constructor(be){this.container=be,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new at(Ze),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const ut=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=ur();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==kt&&!be._heartbeatsCache.heartbeats.some(xt=>xt.date===kt))return be._heartbeatsCache.heartbeats.push({date:kt,agent:ut}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(xt=>{const U=new Date(xt.date).valueOf();return Date.now()-U<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Ze=ur(),{heartbeatsToSend:ut,unsentEntries:kt}=function Xn(We,be=1024){const Ze=[];let ut=We.slice();for(const kt of We){const xt=Ze.find(U=>U.agent===kt.agent);if(xt){if(xt.dates.push(kt.date),lr(Ze)>be){xt.dates.pop();break}}else if(Ze.push({agent:kt.agent,dates:[kt.date]}),lr(Ze)>be){Ze.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:ut}}(be._heartbeatsCache.heartbeats),xt=(0,oe.L)(JSON.stringify({version:2,heartbeats:ut}));return be._heartbeatsCache.lastSentHeartbeatDate=Ze,kt.length>0?(be._heartbeatsCache.heartbeats=kt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),xt})()}}function ur(){return(new Date).toISOString().substring(0,10)}class at{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function ia(We){return Vt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Ze=this;return(0,g.Z)(function*(){var ut;if(yield Ze._canUseIndexedDBPromise){const xt=yield Ze.read();return et(Ze.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:xt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Ze=this;return(0,g.Z)(function*(){var ut;if(yield Ze._canUseIndexedDBPromise){const xt=yield Ze.read();return et(Ze.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...be.heartbeats]})}})()}}function lr(We){return(0,oe.L)(JSON.stringify({version:2,heartbeats:We})).length}!function Nt(We){Jt(new Z.wA("platform-logger",be=>new J(be),"PRIVATE")),Jt(new Z.wA("heartbeat",be=>new Qs(be),"PRIVATE")),kr(ie,"0.7.21",We),kr(ie,"0.7.21","esm2017"),kr("fire-js","")}("")},4859:(rt,Ce,k)=>{k.d(Ce,{H0:()=>de,wA:()=>O});var g=k(5861),Z=k(2090);class O{constructor(B,j,Y){this.name=B,this.instanceFactory=j,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Y=new Z.BH;if(this.instancesDeferred.set(j,Y),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:j});Ge&&Y.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Y=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),Ge=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Te){if(Ge)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ie(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(j){}for(const[j,Y]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:Ge});Y.resolve(Te)}catch(Te){}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...j.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:Y,options:j});for(const[Te,Oe]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Te)&&Oe.resolve(Ge);return Ge}onInit(B,j){var Y;const Ge=this.normalizeInstanceIdentifier(j),Te=null!==(Y=this.onInitCallbacks.get(Ge))&&void 0!==Y?Y:new Set;Te.add(B),this.onInitCallbacks.set(Ge,Te);const Oe=this.instances.get(Ge);return Oe&&B(Oe,Ge),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Y=this.onInitCallbacks.get(j);if(Y)for(const Ge of Y)try{Ge(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===oe?void 0:ue),options:j}),this.instances.set(B,Y),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch(Ge){}var ue;return Y||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(rt,Ce,k)=>{k.d(Ce,{Am:()=>ue,Ub:()=>de,Yd:()=>ie,in:()=>Z});const g=[];var Z=(()=>{return(B=Z||(Z={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Z;var B})();const O={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},oe=Z.INFO,J={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},pe=(B,j,...Y)=>{if(j<B.logLevel)return;const Ge=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${Ge}]  ${B.name}:`,...Y)};class ie{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Z))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...j),this._logHandler(this,Z.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...j),this._logHandler(this,Z.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...j),this._logHandler(this,Z.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...j),this._logHandler(this,Z.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...j),this._logHandler(this,Z.ERROR,...j)}}function de(B){g.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Y of g){let Ge=null;j&&j.level&&(Ge=O[j.level]),Y.userLogHandler=null===B?null:(Te,Oe,...Pe)=>{const he=Pe.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(Je){return null}}).filter(Ee=>Ee).join(" ");Oe>=(null!=Ge?Ge:Te.logLevel)&&B({level:Z[Oe].toLowerCase(),message:he,args:Pe,type:Te.name})}}}},5861:(rt,Ce,k)=>{function g(O,oe,J,pe,ie,de,ue){try{var B=O[de](ue),j=B.value}catch(Y){return void J(Y)}B.done?oe(j):Promise.resolve(j).then(pe,ie)}function Z(O){return function(){var oe=this,J=arguments;return new Promise(function(pe,ie){var de=O.apply(oe,J);function ue(j){g(de,pe,ie,ue,B,"next",j)}function B(j){g(de,pe,ie,ue,B,"throw",j)}ue(void 0)})}}k.d(Ce,{Z:()=>Z})}},rt=>{rt(rt.s=9975)}]);